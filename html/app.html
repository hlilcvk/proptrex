<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
<meta name="theme-color" content="#050508">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="PROPTREX">
<meta name="mobile-web-app-capable" content="yes">
<title>PROPTREX</title>
<link rel="manifest" href="/manifest.json">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@500;700&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PROPTREX PWA v3 â€” Gen-Z Glassmorphism
   Bebas Neue Â· Plus Jakarta Sans Â· JetBrains Mono
   Electric Pink Â· Acid Green Â· Cyan Â· Purple
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root{
  --bg:#050508;
  --glass:rgba(255,255,255,0.05);
  --glass2:rgba(255,255,255,0.09);
  --glass3:rgba(255,255,255,0.13);
  --border:rgba(255,255,255,0.08);
  --border2:rgba(255,255,255,0.15);
  --pink:#FF2D92;
  --cyan:#00D4FF;
  --green:#39FF14;
  --purple:#BF00FF;
  --yellow:#FFE500;
  --orange:#FF6B00;
  --red:#FF2D55;
  --txt:#F0F0FF;
  --txt2:rgba(240,240,255,0.55);
  --txt3:rgba(240,240,255,0.25);
  --fd:'Bebas Neue',sans-serif;
  --fb:'Plus Jakarta Sans',sans-serif;
  --fm:'JetBrains Mono',monospace;
  --nav-h:72px;
  --safe-t:env(safe-area-inset-top,0px);
  --safe-b:env(safe-area-inset-bottom,16px);
  --r:20px;
}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body,#root{height:100%;overflow:hidden}
body{background:var(--bg);color:var(--txt);font-family:var(--fb);font-size:14px;-webkit-font-smoothing:antialiased}
::-webkit-scrollbar{display:none}

/* â”€â”€ ORB MESH â”€â”€ */
.orbs{position:fixed;inset:0;z-index:0;pointer-events:none;overflow:hidden}
.orb{position:absolute;border-radius:50%;filter:blur(90px)}
.o1{width:360px;height:360px;top:-80px;left:-100px;background:rgba(255,45,146,0.2);animation:fl 9s ease-in-out infinite}
.o2{width:300px;height:300px;top:25%;right:-80px;background:rgba(0,212,255,0.16);animation:fl 11s ease-in-out infinite -3s}
.o3{width:320px;height:320px;bottom:25%;left:-60px;background:rgba(57,255,20,0.12);animation:fl 13s ease-in-out infinite -6s}
.o4{width:260px;height:260px;bottom:-60px;right:10%;background:rgba(143,0,255,0.14);animation:fl 10s ease-in-out infinite -2s}
@keyframes fl{0%,100%{transform:translate(0,0) scale(1)}40%{transform:translate(24px,-18px) scale(1.06)}70%{transform:translate(-18px,14px) scale(0.96)}}

/* â”€â”€ SHELL â”€â”€ */
.shell{position:relative;z-index:1;display:flex;flex-direction:column;height:100%;max-width:430px;margin:0 auto}

/* â”€â”€ HEADER â”€â”€ */
.hdr{display:flex;align-items:center;justify-content:space-between;padding:calc(var(--safe-t) + 14px) 20px 14px;flex-shrink:0}
.logo{display:flex;align-items:center;gap:10px}
.logo-hex{width:38px;height:38px;background:linear-gradient(135deg,var(--pink),var(--purple));clip-path:polygon(50% 0%,100% 25%,100% 75%,50% 100%,0% 75%,0% 25%);display:flex;align-items:center;justify-content:center;font-family:var(--fd);font-size:13px;color:#fff;animation:hpulse 3s ease-in-out infinite}
@keyframes hpulse{0%,100%{box-shadow:0 0 0 0 rgba(255,45,146,0)}50%{box-shadow:0 0 24px 8px rgba(255,45,146,0.4)}}
.logo-txt{font-family:var(--fd);font-size:22px;letter-spacing:2px;background:linear-gradient(90deg,var(--pink),var(--cyan));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hdr-r{display:flex;align-items:center;gap:8px}
.live-badge{display:flex;align-items:center;gap:5px;background:var(--glass2);border:1px solid rgba(57,255,20,0.3);backdrop-filter:blur(12px);padding:5px 12px;border-radius:20px;font-size:11px;font-weight:700;color:var(--green);font-family:var(--fm)}
.ldot{width:6px;height:6px;border-radius:50%;background:var(--green);animation:pulse 1.2s ease-in-out infinite}
.notif{width:38px;height:38px;background:var(--glass2);border:1px solid var(--border2);backdrop-filter:blur(12px);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:18px;cursor:pointer;position:relative}
.notif-dot{position:absolute;top:5px;right:5px;width:8px;height:8px;border-radius:50%;background:var(--red);border:1.5px solid var(--bg);animation:pulse 2s ease-in-out infinite}

/* â”€â”€ MARKET SWITCHER â”€â”€ */
.mkt-sw{display:flex;gap:8px;padding:0 20px 14px;overflow-x:auto;flex-shrink:0}
.mpill{display:flex;align-items:center;gap:5px;padding:7px 16px;border-radius:40px;font-size:13px;font-weight:700;white-space:nowrap;cursor:pointer;transition:all .25s cubic-bezier(.34,1.56,.64,1);background:var(--glass);border:1px solid var(--border);color:var(--txt2);flex-shrink:0}
.mpill.on{transform:scale(1.06);border-color:transparent}

/* â”€â”€ CONTENT â”€â”€ */
.content{flex:1;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;padding-bottom:calc(var(--nav-h) + var(--safe-b) + 16px)}

/* â”€â”€ GLASS CARD â”€â”€ */
.gc{margin:0 16px 14px;background:var(--glass);backdrop-filter:blur(24px);-webkit-backdrop-filter:blur(24px);border-radius:var(--r);border:1px solid var(--border2);overflow:hidden;position:relative;animation:sup .4s cubic-bezier(.16,1,.3,1) both;transition:transform .15s}
.gc:active{transform:scale(.97)}
@keyframes sup{from{opacity:0;transform:translateY(28px) scale(.97)}to{opacity:1;transform:none}}

/* â”€â”€ TOKEN HEAD â”€â”€ */
.th{display:flex;align-items:center;justify-content:space-between;padding:18px 18px 12px}
.tl{display:flex;align-items:center;gap:12px}
.tav{width:46px;height:46px;border-radius:14px;display:flex;align-items:center;justify-content:center;font-family:var(--fd);font-size:12px;letter-spacing:1px;flex-shrink:0}
.tname{font-family:var(--fd);font-size:22px;letter-spacing:1px;line-height:1.1}
.tmeta{display:flex;align-items:center;gap:6px;margin-top:3px}
.ctag{font-size:10px;font-weight:700;font-family:var(--fm);padding:2px 7px;border-radius:6px;background:var(--glass2);border:1px solid var(--border2)}

/* â”€â”€ SCORE RING â”€â”€ */
.srw{position:relative;width:54px;height:54px;flex-shrink:0}
.srw svg{transform:rotate(-90deg);position:absolute;inset:0}
.srbg{fill:none;stroke:rgba(255,255,255,0.07);stroke-width:4}
.srfill{fill:none;stroke-width:4;stroke-linecap:round;transition:stroke-dashoffset 1s cubic-bezier(.34,1.56,.64,1)}
.srnum{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center}
.srv{font-family:var(--fd);font-size:20px;line-height:1}
.srl{font-size:7px;color:var(--txt3);letter-spacing:.1em;text-transform:uppercase;margin-top:1px}

/* â”€â”€ PRICE ROW â”€â”€ */
.pr{display:flex;align-items:baseline;gap:10px;padding:0 18px 12px;flex-wrap:wrap}
.pmain{font-family:var(--fd);font-size:32px;letter-spacing:1px}
.pchg{font-family:var(--fm);font-size:14px;font-weight:700;padding:3px 10px;border-radius:8px}
.pchg.up{background:rgba(57,255,20,0.15);color:var(--green)}
.pchg.dn{background:rgba(255,45,85,0.15);color:var(--red)}
.pchg.nu{background:var(--glass2);color:var(--txt2)}

/* â”€â”€ STATS GRID â”€â”€ */
.sg{display:grid;grid-template-columns:1fr 1fr 1fr;gap:1px;background:var(--border);border-top:1px solid var(--border)}
.sc{background:var(--glass);padding:12px 14px;text-align:center}
.scv{font-family:var(--fd);font-size:16px;color:var(--txt);line-height:1.2}
.scl{font-size:9px;color:var(--txt3);text-transform:uppercase;letter-spacing:.1em;margin-top:2px}

/* â”€â”€ SIGS â”€â”€ */
.sigs{display:flex;flex-wrap:wrap;gap:5px;padding:12px 18px 4px}
.stag{font-size:11px;font-weight:600;padding:3px 10px;border-radius:8px;background:var(--glass2);border:1px solid var(--border2);color:var(--txt2)}
.ltag{font-size:11px;font-weight:800;padding:3px 10px;border-radius:8px;font-family:var(--fm);letter-spacing:.05em;color:#000}

/* â”€â”€ ACTIONS â”€â”€ */
.acts{display:grid;grid-template-columns:1fr 1fr;gap:10px;padding:14px 18px}
.bbuy{display:flex;align-items:center;justify-content:center;gap:6px;padding:14px;border-radius:14px;border:none;cursor:pointer;font-family:var(--fb);font-size:14px;font-weight:800;background:linear-gradient(135deg,#00FF88,#00D4FF);color:#000;transition:transform .15s,box-shadow .15s;text-decoration:none;box-shadow:0 4px 20px rgba(0,255,136,0.35)}
.bbuy:active{transform:scale(.95);box-shadow:0 2px 10px rgba(0,255,136,0.2)}
.bai{display:flex;align-items:center;justify-content:center;gap:6px;padding:14px;border-radius:14px;border:1px solid rgba(191,0,255,0.4);cursor:pointer;font-family:var(--fb);font-size:14px;font-weight:800;background:rgba(191,0,255,0.1);color:var(--purple);transition:transform .15s,box-shadow .15s;box-shadow:0 4px 16px rgba(191,0,255,0.2)}
.bai:active{transform:scale(.95)}

/* â”€â”€ CHIPS â”€â”€ */
.chips{display:flex;gap:6px;padding:0 18px 16px;overflow-x:auto}
.chip{display:inline-flex;align-items:center;gap:4px;padding:5px 12px;border-radius:10px;font-size:11px;font-weight:700;font-family:var(--fm);text-decoration:none;white-space:nowrap;flex-shrink:0;transition:opacity .15s,transform .15s}
.chip:active{opacity:.7;transform:scale(.95)}

/* â”€â”€ SECTION HEAD â”€â”€ */
.sh{display:flex;align-items:center;justify-content:space-between;padding:16px 20px 8px}
.st{font-family:var(--fd);font-size:20px;letter-spacing:1px;display:flex;align-items:center;gap:8px}
.sc2{font-family:var(--fm);font-size:11px;color:var(--txt3);background:var(--glass2);padding:2px 8px;border-radius:6px}

/* â”€â”€ STATS STRIP â”€â”€ */
.strip{display:flex;gap:8px;padding:0 16px 14px;overflow-x:auto}
.schip{background:var(--glass);backdrop-filter:blur(16px);border:1px solid var(--border2);border-radius:14px;padding:12px 16px;flex-shrink:0;text-align:center;min-width:76px}
.schipv{font-family:var(--fd);font-size:22px;line-height:1.1}
.schipl{font-size:9px;color:var(--txt3);text-transform:uppercase;letter-spacing:.1em;margin-top:3px}

/* â”€â”€ FILTER BAR â”€â”€ */
.fbar{display:flex;gap:6px;padding:0 16px 14px;overflow-x:auto}
.fb{padding:7px 16px;border-radius:10px;font-size:12px;font-weight:700;cursor:pointer;white-space:nowrap;flex-shrink:0;transition:all .2s cubic-bezier(.34,1.56,.64,1);background:var(--glass);border:1px solid var(--border2);color:var(--txt2);font-family:var(--fb)}
.fb.on{background:linear-gradient(135deg,rgba(255,45,146,0.2),rgba(0,212,255,0.2));border-color:rgba(0,212,255,0.5);color:var(--cyan);transform:scale(1.05)}

/* â”€â”€ MARKET TABLE â”€â”€ */
.mtbl{padding:0 16px}
.mrow{display:flex;align-items:center;gap:12px;padding:14px 0;border-bottom:1px solid var(--border);cursor:pointer;transition:opacity .15s}
.mrow:active{opacity:.7}
.mrow:last-child{border-bottom:none}
.mico{width:40px;height:40px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-family:var(--fd);font-size:11px;flex-shrink:0}
.mname{font-weight:700;font-size:15px;color:var(--txt)}
.msub{font-size:11px;color:var(--txt2);margin-top:2px}
.mprice{font-family:var(--fm);font-size:14px;font-weight:700}
.mchg{font-family:var(--fm);font-size:13px;font-weight:700;text-align:right;margin-top:2px}

/* â”€â”€ WHALE CARD â”€â”€ */
.wc{margin:0 16px 12px;background:var(--glass);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-radius:var(--r);border:1px solid var(--border2);padding:18px;animation:sup .4s cubic-bezier(.16,1,.3,1) both;position:relative;overflow:hidden}
.wc::before{content:'';position:absolute;top:0;left:0;right:0;height:2px}
.wc.buy::before{background:linear-gradient(90deg,var(--green),var(--cyan))}
.wc.sell::before{background:linear-gradient(90deg,var(--red),var(--orange))}
.wtop{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:12px}
.wem{font-size:28px;line-height:1}
.winfo{flex:1;margin-left:12px}
.wtok{font-family:var(--fd);font-size:24px;letter-spacing:1px;line-height:1.1}
.wchain{font-size:11px;font-weight:700;font-family:var(--fm);margin-top:3px}
.wamt{font-family:var(--fd);font-size:26px;text-align:right}
.wage{font-size:11px;color:var(--txt3);text-align:right;margin-top:3px}
.waddr{font-family:var(--fm);font-size:11px;color:var(--txt3);background:var(--glass2);padding:6px 10px;border-radius:8px;margin-bottom:12px;display:inline-block}
.wbtns{display:flex;gap:8px;flex-wrap:wrap}
.wbtn{display:inline-flex;align-items:center;gap:5px;padding:9px 16px;border-radius:12px;font-size:13px;font-weight:700;text-decoration:none;cursor:pointer;transition:transform .15s,opacity .15s;font-family:var(--fb)}
.wbtn:active{transform:scale(.95);opacity:.85}
.wbtn.pri{flex:1;justify-content:center}
.wbtn.buy-b{background:linear-gradient(135deg,var(--green),var(--cyan));color:#000;box-shadow:0 4px 16px rgba(57,255,20,0.3)}
.wbtn.sell-b{background:linear-gradient(135deg,var(--red),var(--orange));color:#fff;box-shadow:0 4px 16px rgba(255,45,85,0.3)}
.wbtn.sec{background:var(--glass2);border:1px solid var(--border2);color:var(--txt2)}

/* â”€â”€ AI PANEL â”€â”€ */
.ai-empty{padding:70px 24px;text-align:center}
.ai-em-ico{font-size:64px;margin-bottom:16px;animation:fl2 4s ease-in-out infinite}
@keyframes fl2{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
.ai-em-title{font-family:var(--fd);font-size:28px;letter-spacing:1px;background:linear-gradient(90deg,var(--pink),var(--purple),var(--cyan));-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:10px}
.ai-em-sub{font-size:14px;color:var(--txt2);line-height:1.6}
.aicard{margin:16px;background:var(--glass);backdrop-filter:blur(24px);border:1px solid var(--border2);border-radius:var(--r);overflow:hidden;position:relative}
.aicard::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--pink),var(--purple),var(--cyan))}
.aihead{display:flex;align-items:center;gap:12px;padding:18px;border-bottom:1px solid var(--border)}
.aiav{width:46px;height:46px;border-radius:14px;background:linear-gradient(135deg,var(--pink),var(--purple));display:flex;align-items:center;justify-content:center;font-family:var(--fd);font-size:13px;color:#fff;flex-shrink:0}
.ainame{font-family:var(--fd);font-size:20px;letter-spacing:1px;flex:1}
.airef{background:var(--glass2);border:1px solid var(--border2);color:var(--cyan);border-radius:10px;padding:8px 14px;font-size:12px;font-weight:700;cursor:pointer;font-family:var(--fb)}
.aiload{display:flex;align-items:center;gap:12px;padding:28px 18px;color:var(--txt2)}
.spin{width:22px;height:22px;border:2px solid var(--border);border-top-color:var(--cyan);border-radius:50%;animation:sp .8s linear infinite;flex-shrink:0}
@keyframes sp{to{transform:rotate(360deg)}}
.aibody{padding:18px;font-size:14px;line-height:1.8;color:rgba(220,230,255,0.85);white-space:pre-wrap}
.ailinks{padding:14px 18px;border-top:1px solid var(--border)}
.ailbl{font-size:10px;color:var(--txt3);font-family:var(--fm);text-transform:uppercase;letter-spacing:.1em;margin-bottom:8px}

/* â”€â”€ ALERTS â”€â”€ */
.alcard{margin:0 16px 12px;background:var(--glass);backdrop-filter:blur(20px);border:1px solid var(--border2);border-radius:18px;padding:16px;animation:sup .35s cubic-bezier(.16,1,.3,1) both;position:relative;overflow:hidden}
.alcard.str::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--green),var(--cyan))}
.altop{display:flex;align-items:center;gap:8px;margin-bottom:10px;flex-wrap:wrap}
.alname{font-family:var(--fd);font-size:18px;flex:1}
.altime{font-family:var(--fm);font-size:10px;color:var(--txt3)}
.alaim{width:100%;padding:11px;background:linear-gradient(135deg,rgba(191,0,255,0.15),rgba(0,212,255,0.15));border:1px solid rgba(191,0,255,0.3);border-radius:12px;color:var(--cyan);font-size:13px;font-weight:700;cursor:pointer;font-family:var(--fb);margin-top:10px;transition:transform .15s}
.alaim:active{transform:scale(.97)}

/* â”€â”€ INSTALL BANNER â”€â”€ */
.inst{margin:0 16px 14px;background:linear-gradient(135deg,rgba(255,45,146,0.12),rgba(191,0,255,0.12));backdrop-filter:blur(20px);border:1px solid rgba(255,45,146,0.3);border-radius:var(--r);padding:16px;display:flex;align-items:center;gap:12px;animation:sup .4s ease both}
.inst-ico{width:46px;height:46px;flex-shrink:0;background:linear-gradient(135deg,var(--pink),var(--purple));clip-path:polygon(50% 0%,100% 25%,100% 75%,50% 100%,0% 75%,0% 25%);display:flex;align-items:center;justify-content:center;font-family:var(--fd);font-size:14px;color:#fff}
.inst-info{flex:1}
.inst-t{font-family:var(--fd);font-size:16px;letter-spacing:.5px}
.inst-s{font-size:11px;color:var(--txt2);margin-top:2px}
.inst-btn{padding:10px 16px;border-radius:12px;border:none;cursor:pointer;background:linear-gradient(135deg,var(--pink),var(--purple));color:#fff;font-size:13px;font-weight:800;font-family:var(--fb);white-space:nowrap;flex-shrink:0;box-shadow:0 4px 16px rgba(255,45,146,0.4)}

/* â”€â”€ FOREX â”€â”€ */
.fxcard{margin:0 16px 10px;background:var(--glass);backdrop-filter:blur(20px);border:1px solid var(--border2);border-radius:18px;padding:16px 18px;display:flex;align-items:center;gap:12px;cursor:pointer;transition:transform .15s;animation:sup .35s cubic-bezier(.16,1,.3,1) both}
.fxcard:active{transform:scale(.97)}
.fxpair{font-family:var(--fd);font-size:20px;letter-spacing:1px;flex:1}
.fxprice{font-family:var(--fm);font-size:15px;font-weight:700}
.fxchg{font-family:var(--fm);font-size:13px;font-weight:700;text-align:right;margin-top:2px}
.sigpill{padding:5px 12px;border-radius:10px;font-size:11px;font-weight:800;font-family:var(--fm)}

/* â”€â”€ BOTTOM NAV â”€â”€ */
.nav{position:fixed;bottom:0;left:50%;transform:translateX(-50%);width:100%;max-width:430px;height:calc(var(--nav-h) + var(--safe-b));background:rgba(5,5,8,0.82);backdrop-filter:blur(32px);-webkit-backdrop-filter:blur(32px);border-top:1px solid var(--border2);display:flex;align-items:flex-start;justify-content:space-around;padding-top:10px;z-index:100}
.ni{display:flex;flex-direction:column;align-items:center;gap:4px;cursor:pointer;flex:1;padding:4px 0;transition:transform .2s cubic-bezier(.34,1.56,.64,1)}
.ni.on{transform:translateY(-4px)}
.niw{position:relative;font-size:22px;line-height:1;transition:filter .2s}
.ni.on .niw{filter:drop-shadow(0 0 8px var(--nc))}
.nbadge{position:absolute;top:-5px;right:-8px;min-width:17px;height:17px;border-radius:9px;background:var(--red);border:1.5px solid var(--bg);font-family:var(--fm);font-size:9px;font-weight:700;color:#fff;display:flex;align-items:center;justify-content:center;padding:0 3px}
.nl{font-size:10px;font-weight:700;color:var(--txt3);transition:color .2s}
.ni.on .nl{color:var(--nc)}
.nind{width:4px;height:4px;border-radius:50%;margin-top:2px;background:transparent;transition:all .25s}
.ni.on .nind{background:var(--nc);box-shadow:0 0 8px var(--nc)}

/* â”€â”€ UTILS â”€â”€ */
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.3}}
.up{color:var(--green)} .dn{color:var(--red)} .nu{color:var(--txt2)}
.empty{text-align:center;padding:60px 24px}
.eico{font-size:48px;margin-bottom:14px}
.etit{font-family:var(--fd);font-size:22px;color:var(--txt);margin-bottom:8px}
.esub{font-size:13px;color:var(--txt2);line-height:1.6}
@keyframes shim{0%{background-position:200% 0}100%{background-position:-200% 0}}
.skel{background:linear-gradient(90deg,var(--glass) 25%,var(--glass2) 50%,var(--glass) 75%);background-size:200% 100%;animation:shim 1.5s infinite;border-radius:var(--r);margin:0 16px 14px;height:200px}
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const {useState,useEffect,useRef,useCallback,useMemo}=React;

// â•â•â•â•â•â•â• CONSTANTS â•â•â•â•â•â•â•
const CHAIN_COL={solana:"#9945FF",ethereum:"#627EEA",bsc:"#F3BA2F",arbitrum:"#28A0F0",base:"#0052FF",polygon:"#8247E5"};

const MKTS=[
  {id:"crypto",icon:"â‚¿",label:"Kripto",grad:"linear-gradient(135deg,#FF2D92,#00D4FF)",sh:"rgba(255,45,146,0.4)"},
  {id:"forex",icon:"ğŸ’±",label:"Forex",grad:"linear-gradient(135deg,#FFE500,#FF6B00)",sh:"rgba(255,229,0,0.4)"},
  {id:"stock",icon:"ğŸ“ˆ",label:"Hisse",grad:"linear-gradient(135deg,#3B82F6,#06B6D4)",sh:"rgba(59,130,246,0.4)"},
  {id:"etf",icon:"ğŸ§©",label:"BYF",grad:"linear-gradient(135deg,#8B5CF6,#BF00FF)",sh:"rgba(139,92,246,0.4)"},
  {id:"bond",icon:"ğŸ¦",label:"Tahvil",grad:"linear-gradient(135deg,#F59E0B,#EF4444)",sh:"rgba(245,158,11,0.4)"},
];

const NAV=[
  {id:"signals",icon:"ğŸ”¥",label:"Sinyaller",clr:"#FF2D92"},
  {id:"markets",icon:"ğŸ“Š",label:"Piyasa",clr:"#00D4FF"},
  {id:"whales",icon:"ğŸ‹",label:"Balinalar",clr:"#39FF14"},
  {id:"ai",icon:"ğŸ¤–",label:"AI",clr:"#BF00FF"},
  {id:"alerts",icon:"ğŸ””",label:"UyarÄ±lar",clr:"#FFE500"},
];

const TV_FILTERS=[["volume","ğŸ“Š Hacim"],["gainers","ğŸš€ YÃ¼kselen"],["oversold","âš¡ AÅŸÄ±rÄ± SatÄ±m"],["momentum","ğŸ”¥ Momentum"],["whale","ğŸ‹ Balina"],["dip","ğŸ¯ Dip"]];

const WHALES=[
  {id:"w1",short:"0x3f5Câ€¦a8D2",label:"ğŸ‹ Balina #1",action:"ALIM",token:"PEPE",sym:"PEPE",amount:1200000,chain:"ethereum",age:1,type:"dex"},
  {id:"w2",short:"7xKfâ€¦pQrS",label:"ğŸ‹ Balina #2",action:"ALIM",token:"WIF",sym:"WIF",amount:340000,chain:"solana",age:2,type:"dex"},
  {id:"w3",short:"0x8b2Aâ€¦eE3B",label:"ğŸ¦ˆ KÃ¶pek BalÄ±ÄŸÄ±",action:"ALIM",token:"ARB",sym:"ARB",amount:780000,chain:"arbitrum",age:3,type:"dex"},
  {id:"w4",short:"BnM2â€¦zT1W",label:"âš ï¸ Bilinmeyen",action:"SATIÅ",token:"BONK",sym:"BONK",amount:220000,chain:"solana",age:4,type:"dex"},
  {id:"w5",short:"0x1Da9â€¦9Ab0",label:"ğŸ‹ Balina #3",action:"ALIM",token:"LINK",sym:"LINK",amount:890000,chain:"ethereum",age:5,type:"cex"},
  {id:"w6",short:"4hTrVâ€¦mS8P",label:"ğŸ³ Orta Balina",action:"ALIM",token:"JUP",sym:"JUP",amount:150000,chain:"solana",age:6,type:"dex"},
  {id:"w7",short:"0xD4a7â€¦1Cc9",label:"ğŸ‹ Balina #5",action:"ALIM",token:"AAVE",sym:"AAVE",amount:2100000,chain:"ethereum",age:9,type:"cex"},
  {id:"w8",short:"AxT3â€¦wP6L",label:"ğŸ³ Orta Balina",action:"ALIM",token:"POPCAT",sym:"POPCAT",amount:95000,chain:"solana",age:11,type:"dex"},
  {id:"w9",short:"0xF8c2â€¦7Gh5",label:"ğŸ‹ Balina #6",action:"SATIÅ",token:"UNI",sym:"UNI",amount:650000,chain:"ethereum",age:13,type:"cex"},
];

const FOREX_DATA=[
  {sym:"EUR/USD",price:1.08421,chg:+0.24,sig:"AL"},
  {sym:"GBP/USD",price:1.26840,chg:-0.11,sig:"SAT"},
  {sym:"USD/JPY",price:154.820,chg:+0.03,sig:"BEKLE"},
  {sym:"XAU/USD",price:2648.30,chg:+0.62,sig:"AL"},
  {sym:"USD/CHF",price:0.90124,chg:-0.08,sig:"SAT"},
  {sym:"AUD/USD",price:0.65240,chg:+0.14,sig:"AL"},
  {sym:"XAG/USD",price:29.840,chg:+0.88,sig:"AL"},
  {sym:"USD/TRY",price:33.840,chg:+0.12,sig:"SAT"},
  {sym:"NZD/USD",price:0.60140,chg:+0.18,sig:"AL"},
  {sym:"EUR/GBP",price:0.85420,chg:+0.07,sig:"BEKLE"},
];

// â•â•â•â•â•â•â• HELPERS â•â•â•â•â•â•â•
const fU=n=>{if(!n)return"â€”";const v=Math.abs(n);if(v>=1e9)return"$"+(n/1e9).toFixed(2)+"B";if(v>=1e6)return"$"+(n/1e6).toFixed(2)+"M";if(v>=1e3)return"$"+(n/1e3).toFixed(1)+"K";return"$"+Number(n).toPrecision(3)};
const fP=n=>{if(!n)return"â€”";const v=Math.abs(n);if(v<0.01)return"$"+Number(n).toFixed(6);if(v<1)return"$"+Number(n).toFixed(4);return"$"+Number(n).toLocaleString("tr-TR",{maximumFractionDigits:2})};
const fC=n=>n==null?"â€”":(n>0?"+":"")+Number(n).toFixed(2)+"%";
const sc=s=>s>=70?"#39FF14":s>=45?"#A8FF00":s>=25?"#FFE500":"rgba(255,255,255,0.2)";
const lg=l=>l==="GÃœÃ‡LÃœ AL"?"linear-gradient(90deg,#39FF14,#00D4FF)":l==="AL"?"linear-gradient(90deg,#A8FF00,#39FF14)":l==="Ä°ZLE"?"linear-gradient(90deg,#FFE500,#FF6B00)":null;
const cc=n=>(n??0)>0?"up":(n??0)<0?"dn":"nu";

// â•â•â•â•â•â•â• SIGNAL ALGOS (OmniScan) â•â•â•â•â•â•â•
function analyzeTV(t){
  const rsi=t.RSI??50,ch=t.change??0,rec=t.Recommend_All??0;
  const vol=t.volume??0,avg=t.average_volume_10d_calc??1;
  const ema20=t.EMA20??t.close,ema50=t.EMA50??t.close,price=t.close??0;
  let score=0;const signals=[];
  const vr=avg>0?vol/avg:0;
  if(vr>5){score+=35;signals.push(`ğŸš€ Hacim x${vr.toFixed(1)}`)}else if(vr>2.5){score+=18;signals.push(`ğŸ“ˆ Hacim x${vr.toFixed(1)}`)}
  if(rsi<30){score+=30;signals.push(`âš¡ AÅŸÄ±rÄ± satÄ±m RSI:${rsi.toFixed(0)}`)}else if(rsi<40){score+=15;signals.push(`ğŸ“‰ RSI:${rsi.toFixed(0)}`)}else if(rsi>70){score-=10}
  if(price>ema20&&ema20>ema50){score+=20;signals.push("ğŸŸ¢ EMA yÃ¼kselen")}
  if(rec>0.5){score+=25;signals.push("ğŸ“Š TV gÃ¼Ã§lÃ¼ AL")}else if(rec>0.2){score+=12;signals.push("ğŸ“Š TV AL")}
  if(ch>5&&ch<25){score+=15;signals.push(`â¬†ï¸ +${ch.toFixed(1)}%`)}
  if(vr>3&&Math.abs(ch)<5){score+=25;signals.push("ğŸ‹ Sessiz birikim")}
  const level=score>=70?"GÃœÃ‡LÃœ AL":score>=45?"AL":score>=25?"Ä°ZLE":null;
  return{score:Math.max(0,Math.min(score,100)),level,signals};
}
function analyzeCoin(c){
  const ch1=c["1h_change_percentage"]??0,ch24=c["24h_change_percentage"]??0,ch7=c["7d_change_percentage"]??0;
  const vol=c["24h_vol_usd"]??0,mc=c["market_cap_usd"]??0,price=c["price_usd"]??0,l24=c["low_24h"]??price;
  let score=0;const signals=[];
  if(ch1>2&&ch24>5){score+=30;signals.push(`ğŸ”¥ Momentum 1s+${ch1.toFixed(1)}%`)}
  if(ch7<-20&&ch24>3){score+=35;signals.push("ğŸ¯ HaftalÄ±k dipten dÃ¶nÃ¼ÅŸ")}
  if(ch24<-10&&ch1>0){score+=25;signals.push("ğŸ”„ Dip geri alÄ±m")}
  if(mc>0&&vol/mc>0.1){score+=20;signals.push(`ğŸ’° Vol/MC:${(vol/mc*100).toFixed(0)}%`)}
  if(l24>0&&price/l24<1.05&&ch1>0){score+=25;signals.push("âš¡ 24s dip dÃ¶nÃ¼ÅŸÃ¼")}
  const level=score>=65?"GÃœÃ‡LÃœ AL":score>=40?"AL":score>=20?"Ä°ZLE":null;
  return{score:Math.max(0,Math.min(score,100)),level,signals};
}
function rugRisk(p){
  let r=0;
  const liq=p.liquidity?.usd??0,age=p.pairCreatedAt?(Date.now()-p.pairCreatedAt)/3600000:999;
  const buys=p.txns?.h1?.buys??0,sells=p.txns?.h1?.sells??0;
  if(liq<5000)r+=55;else if(liq<20000)r+=30;else if(liq<50000)r+=10;
  if(age<0.5)r+=40;else if(age<2)r+=25;else if(age<6)r+=10;
  if(buys>0&&sells===0&&buys>5)r+=35;
  return Math.min(r,100);
}
function analyzeDEX(p){
  const rug=rugRisk(p);if(rug>65)return null;
  const vol1h=p.volume?.h1??0,vol6h=p.volume?.h6??0,ch1=p.priceChange?.h1??0,buys=p.txns?.h1?.buys??0,sells=p.txns?.h1?.sells??0;
  let score=0;const sigs=[];
  const avg=vol6h/6;
  if(avg>0&&vol1h/avg>4){score+=40;sigs.push(`ğŸš€ x${(vol1h/avg).toFixed(1)} hacim`)}
  if(buys>sells*2&&buys>5){score+=25;sigs.push(`ğŸ’š ${buys}/${sells} Al/Sat`)}
  if(ch1>5&&ch1<50){score+=20;sigs.push(`+${ch1.toFixed(1)}%`)}
  const level=score>=70?"GÃœÃ‡LÃœ AL":score>=45?"AL":score>=25?"Ä°ZLE":null;
  return level?{score,level,sigs,rug}:null;
}

// â•â•â•â•â•â•â• EXCHANGE LINKS â•â•â•â•â•â•â•
function getLinks(token,src){
  const L=[];
  if(src==="TV"){
    const sym=(token.name||"").split(":").pop()||"",ex=(token.exchange||"").toUpperCase();
    L.push({n:"TradingView",c:"#1E88E5",url:`https://tr.tradingview.com/chart/?symbol=${encodeURIComponent(token._id||sym)}`});
    if(ex.includes("BINANCE"))L.push({n:"Binance",c:"#F3BA2F",url:`https://www.binance.com/tr/trade/${sym}_USDT`});
    if(ex.includes("BYBIT"))L.push({n:"Bybit",c:"#F7A600",url:`https://www.bybit.com/trade/usdt/${sym}USDT`});
    if(ex.includes("OKX"))L.push({n:"OKX",c:"#E0E0E0",url:`https://www.okx.com/trade-spot/${sym.toLowerCase()}-usdt`});
    if(L.length<2){L.push({n:"Binance",c:"#F3BA2F",url:`https://www.binance.com/tr/trade/${sym}_USDT`});L.push({n:"Bybit",c:"#F7A600",url:`https://www.bybit.com/trade/usdt/${sym}USDT`});}
  }else if(src==="COIN"){
    const sym=token.name||"";
    L.push({n:"Binance",c:"#F3BA2F",url:`https://www.binance.com/tr/trade/${sym}_USDT`});
    L.push({n:"Bybit",c:"#F7A600",url:`https://www.bybit.com/trade/usdt/${sym}USDT`});
    L.push({n:"OKX",c:"#E0E0E0",url:`https://www.okx.com/trade-spot/${sym.toLowerCase()}-usdt`});
    L.push({n:"CoinGecko",c:"#8CC63F",url:`https://www.coingecko.com/tr/coins/${sym.toLowerCase()}`});
  }else{
    const addr=token.baseToken?.address||token.pairAddress||"",chain=token.chainId||"ethereum";
    L.push({n:"DexScreener",c:"#00D4FF",url:`https://dexscreener.com/${chain}/${token.pairAddress||addr}`});
    if(chain==="solana"){L.push({n:"Jupiter",c:"#E8923A",url:`https://jup.ag/swap/SOL-${addr}`});L.push({n:"GMGN",c:"#39FF14",url:`https://gmgn.ai/sol/token/${addr}`});}
    else{L.push({n:"Uniswap",c:"#FF007A",url:`https://app.uniswap.org/swap?outputCurrency=${addr}`});L.push({n:"GMGN",c:"#39FF14",url:`https://gmgn.ai/eth/token/${addr}`});}
    L.push({n:"Bubblemaps",c:"#FF6B35",url:`https://app.bubblemaps.io/${chain}/token/${addr}`});
  }
  return L.slice(0,5);
}

// â•â•â•â•â•â•â• COMPONENTS â•â•â•â•â•â•â•
const ExChip=({l})=>(
  <a href={l.url} target="_blank" rel="noopener noreferrer" className="chip"
    style={{background:l.c+"18",border:`1px solid ${l.c}44`,color:l.c}}>
    {l.n} â†—
  </a>
);

const LTag=({level})=>{
  const g=lg(level);
  if(!g)return null;
  return<span className="ltag" style={{background:g}}>{level}</span>;
};

function Ring({score}){
  const col=sc(score),r=22,circ=2*Math.PI*r;
  return(
    <div className="srw">
      <svg viewBox="0 0 50 50" width="54" height="54">
        <circle className="srbg" cx="25" cy="25" r={r}/>
        <circle className="srfill" cx="25" cy="25" r={r}
          stroke={col} strokeDasharray={circ} strokeDashoffset={circ*(1-score/100)}/>
      </svg>
      <div className="srnum">
        <div className="srv" style={{color:col}}>{score}</div>
        <div className="srl">SKOR</div>
      </div>
    </div>
  );
}

function SigCard({item,src,onAI,delay=0}){
  const a=src==="DEX"?(item._sig||{}):(item._analysis||{});
  const sym=src==="DEX"?item.baseToken?.symbol:(item.name?.split(":")[1]||item.name);
  const price=src==="DEX"?item.priceUsd:src==="COIN"?item.price_usd:item.close;
  const chg=src==="DEX"?item.priceChange?.h1:src==="COIN"?item["24h_change_percentage"]:item.change;
  const vol=src==="DEX"?item.volume?.h24:src==="COIN"?item["24h_vol_usd"]:item.volume;
  const mc=src==="DEX"?item.fdv:src==="COIN"?item.market_cap_usd:item.market_cap_calc;
  const score=a.score||0,sigs=(a.signals||a.sigs||[]).slice(0,3),links=item._links||[];
  const col=sc(score),strong=a.level==="GÃœÃ‡LÃœ AL";
  const buyUrl=links[1]?.url||links[0]?.url||"#";
  const grad=src==="DEX"?"linear-gradient(135deg,rgba(255,45,146,0.07),rgba(191,0,255,0.07))":
             src==="COIN"?"linear-gradient(135deg,rgba(191,0,255,0.07),rgba(0,212,255,0.07))":
             "linear-gradient(135deg,rgba(0,212,255,0.07),rgba(57,255,20,0.07))";
  return(
    <div className={`gc${strong?" str":""}`} style={{animationDelay:`${delay}ms`}}>
      <div style={{position:"absolute",inset:0,borderRadius:"var(--r)",background:grad,pointerEvents:"none"}}/>
      <div style={{position:"absolute",top:0,left:0,right:0,height:"2px",background:`linear-gradient(90deg,${col},transparent)`}}/>
      {/* HEAD */}
      <div className="th">
        <div className="tl">
          <div className="tav" style={{background:col+"22",border:`1px solid ${col}44`,color:col}}>{(sym||"?").slice(0,4)}</div>
          <div>
            <div className="tname">{sym||"â€”"}</div>
            <div className="tmeta">
              {src==="DEX"&&<span className="ctag" style={{color:CHAIN_COL[item.chainId]||"#888"}}>{(item.chainId||"").toUpperCase()}</span>}
              {src==="TV"&&<span className="ctag" style={{color:"rgba(0,212,255,0.8)"}}>{(item.exchange||"CEX").slice(0,10)}</span>}
              {src==="COIN"&&<span className="ctag" style={{color:"rgba(191,0,255,0.8)"}}>COIN</span>}
              {a.rug!=null&&<span style={{fontSize:"10px",color:a.rug<30?"#39FF14":a.rug<60?"#FFE500":"#FF2D55"}}>Rug:{a.rug}</span>}
            </div>
          </div>
        </div>
        <Ring score={score}/>
      </div>
      {/* PRICE */}
      <div className="pr">
        <div className="pmain">{fP(price)}</div>
        <div className={`pchg ${cc(chg)}`}>{fC(chg)}</div>
        {a.level&&<LTag level={a.level}/>}
      </div>
      {/* STATS */}
      <div className="sg">
        <div className="sc"><div className="scv">{fU(vol)}</div><div className="scl">Hacim</div></div>
        <div className="sc"><div className="scv">{fU(mc)}</div><div className="scl">Piy.DeÄŸ.</div></div>
        <div className="sc"><div className="scv" style={{color:item.RSI<30?"#39FF14":item.RSI>70?"#FF2D55":"var(--txt)"}}>{item.RSI?item.RSI.toFixed(0):"â€”"}</div><div className="scl">RSI</div></div>
      </div>
      {/* SIGNALS */}
      {sigs.length>0&&<div className="sigs">{sigs.map((s,i)=><span key={i} className="stag">{s}</span>)}</div>}
      {/* ACTIONS */}
      <div className="acts">
        <a href={buyUrl} target="_blank" rel="noopener noreferrer" className="bbuy">ğŸ›’ Åimdi AL â†’</a>
        <button className="bai" onClick={()=>onAI(item,src)}>ğŸ¤– AI Analiz</button>
      </div>
      {/* CHIPS */}
      {links.length>0&&<div className="chips">{links.map((l,i)=><ExChip key={i} l={l}/>)}</div>}
    </div>
  );
}

// â•â•â•â•â•â•â• MAIN APP â•â•â•â•â•â•â•
export default function App(){
  const [tab,setTab]=useState("signals");
  const [mkt,setMkt]=useState("crypto");
  const [tvf,setTvf]=useState("volume");
  const [tvData,setTvData]=useState([]);
  const [coinData,setCoinData]=useState([]);
  const [dexData,setDexData]=useState([]);
  const [alerts,setAlerts]=useState([]);
  const [sel,setSel]=useState(null);
  const [aiTxt,setAiTxt]=useState("");
  const [aiLoad,setAiLoad]=useState(false);
  const [loading,setLoading]=useState(true);
  const [scanN,setScanN]=useState(0);
  const [wf,setWf]=useState("all");
  const [forex,setForex]=useState(FOREX_DATA);
  const [instEvt,setInstEvt]=useState(null);
  const [showBanner,setShowBanner]=useState(false);
  const seen=useRef(new Set());
  const aref=useRef([]);

  useEffect(()=>{
    window.addEventListener('beforeinstallprompt',e=>{e.preventDefault();setInstEvt(e);setShowBanner(true);});
    if('serviceWorker' in navigator)navigator.serviceWorker.register('/sw.js').catch(()=>{});
  },[]);

  const doInstall=async()=>{
    if(!instEvt)return;
    instEvt.prompt();
    const{outcome}=await instEvt.userChoice;
    if(outcome==='accepted')setShowBanner(false);
    setInstEvt(null);
  };

  // Forex live
  useEffect(()=>{
    const t=setInterval(()=>{
      setForex(p=>p.map(f=>{const v=f.sym.includes("JPY")||f.sym.includes("TRY")?0.07:0.00013;return{...f,price:+(f.price+(Math.random()-.5)*v).toFixed(f.price>100?2:5)};}));
    },2000);
    return()=>clearInterval(t);
  },[]);

  const buildTV=(f)=>({
    filter:{
      volume:[{left:"volume",operation:"greater",right:500000}],
      gainers:[{left:"change",operation:"greater",right:5},{left:"volume",operation:"greater",right:100000}],
      oversold:[{left:"RSI",operation:"less",right:35},{left:"volume",operation:"greater",right:100000}],
      momentum:[{left:"Recommend.All",operation:"greater",right:0.3},{left:"volume",operation:"greater",right:500000}],
      whale:[{left:"volume",operation:"greater",right:5000000},{left:"change",operation:"in_range",right:[0,20]}],
      dip:[{left:"change",operation:"less",right:-5},{left:"RSI",operation:"in_range",right:[25,45]}],
    }[f]||[{left:"volume",operation:"greater",right:500000}],
    options:{lang:"tr"},markets:["crypto"],symbols:{query:{types:[]},tickers:[]},
    columns:["name","description","close","change","volume","market_cap_calc","Recommend.All","RSI","EMA20","EMA50","average_volume_10d_calc","exchange","type"],
    sort:{sortBy:"volume",sortOrder:"desc"},range:[0,100],
  });

  const fetchTV=useCallback(async(f=tvf)=>{
    try{
      const res=await fetch("https://scanner.tradingview.com/crypto/scan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(buildTV(f))});
      if(!res.ok)return;
      const json=await res.json();
      const cols=["name","description","close","change","volume","market_cap_calc","Recommend.All","RSI","EMA20","EMA50","average_volume_10d_calc","exchange","type"];
      const rows=(json.data||[]).map(item=>{
        const d=item.d||[];const obj={};cols.forEach((c,i)=>obj[c.replace(/\./g,"_")]=d[i]);
        const analysis=analyzeTV(obj);return{...obj,_analysis:analysis,_links:getLinks(obj,"TV"),_id:item.s};
      }).sort((a,b)=>b._analysis.score-a._analysis.score);
      setTvData(rows);
      rows.filter(t=>t._analysis?.level).forEach(t=>{
        const key=`tv-${t._id}-${Math.floor(Date.now()/60000)}`;
        if(!seen.current.has(key)){seen.current.add(key);aref.current=[{id:key,ts:new Date(),src:"TV",name:t.name?.split(":")[1]||t.name,level:t._analysis.level,score:t._analysis.score,signals:t._analysis.signals,price:t.close,change:t.change,vol:t.volume,links:t._links,raw:t},...aref.current].slice(0,100);setAlerts([...aref.current]);}
      });
    }catch(e){}
  },[tvf]);

  const fetchCoin=useCallback(async()=>{
    try{
      const body={filter:[{left:"24h_vol_usd",operation:"greater",right:100000}],options:{lang:"tr"},markets:["coin"],symbols:{query:{types:[]},tickers:[]},columns:["name","description","price_usd","24h_vol_usd","market_cap_usd","1h_change_percentage","24h_change_percentage","7d_change_percentage","high_24h","low_24h","ath_usd"],sort:{sortBy:"24h_vol_usd",sortOrder:"desc"},range:[0,80]};
      const res=await fetch("https://scanner.tradingview.com/coin/scan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(body)});
      if(!res.ok)return;
      const json=await res.json();
      const cols=["name","description","price_usd","24h_vol_usd","market_cap_usd","1h_change_percentage","24h_change_percentage","7d_change_percentage","high_24h","low_24h","ath_usd"];
      const rows=(json.data||[]).map(item=>{
        const d=item.d||[];const obj={};cols.forEach((c,i)=>obj[c]=d[i]);
        return{...obj,_analysis:analyzeCoin(obj),_links:getLinks(obj,"COIN"),_id:item.s};
      }).sort((a,b)=>b._analysis.score-a._analysis.score);
      setCoinData(rows);
    }catch(e){}
  },[]);

  const fetchDEX=useCallback(async()=>{
    const terms=["eth","sol","bnb","pepe","wif","arb","link","bonk"];
    const q=terms[scanN%terms.length];
    try{
      const res=await fetch(`https://api.dexscreener.com/latest/dex/search?q=${q}`);
      if(!res.ok)return;
      const d=await res.json();
      const pairs=(d.pairs||[]).slice(0,60).filter(p=>p?.baseToken&&p?.priceUsd);
      const enriched=pairs.map(p=>({...p,_sig:analyzeDEX(p),_rug:rugRisk(p),_links:getLinks(p,"DEX")})).filter(p=>p._sig);
      setDexData(prev=>{
        const map=new Map(prev.map(p=>[p.pairAddress,p]));
        enriched.forEach(p=>map.set(p.pairAddress,p));
        return Array.from(map.values()).sort((a,b)=>(b._sig?.score||0)-(a._sig?.score||0)).slice(0,150);
      });
      enriched.filter(p=>p._sig?.level==="GÃœÃ‡LÃœ AL").forEach(p=>{
        const key=`dex-${p.pairAddress}-${Math.floor(Date.now()/60000)}`;
        if(!seen.current.has(key)){seen.current.add(key);aref.current=[{id:key,ts:new Date(),src:"DEX",name:p.baseToken?.symbol,level:p._sig.level,score:p._sig.score,signals:p._sig.sigs,price:p.priceUsd,change:p.priceChange?.h1,vol:p.volume?.h24,chain:p.chainId,links:p._links,raw:p},...aref.current].slice(0,100);setAlerts([...aref.current]);}
      });
    }catch(e){}
    setScanN(c=>c+1);setLoading(false);
  },[scanN]);

  const fetchAll=useCallback(()=>{fetchTV();fetchCoin();fetchDEX();},[fetchTV,fetchCoin,fetchDEX]);
  useEffect(()=>{fetchAll();const t=setInterval(fetchAll,10000);return()=>clearInterval(t);},[]);

  const runAI=async(token,src)=>{
    setSel({...token,_ds:src});setAiTxt("");setAiLoad(true);setTab("ai");
    let ctx="";
    if(src==="TV"){ctx=`Token:${token.name}|Ex:${token.exchange||"â€”"}|Fiyat:$${token.close}|DeÄŸ:${fC(token.change)}|Hacim:${fU(token.volume)}|RSI:${(token.RSI||0).toFixed(1)}|Sinyaller:${token._analysis?.signals?.join(",")||"â€”"}`;}
    else if(src==="COIN"){ctx=`Coin:${token.name}|Fiyat:${fP(token.price_usd)}|1s:${fC(token["1h_change_percentage"])}|24s:${fC(token["24h_change_percentage"])}|7g:${fC(token["7d_change_percentage"])}|Hacim:${fU(token["24h_vol_usd"])}|MC:${fU(token.market_cap_usd)}`;}
    else if(src==="FOREX"){ctx=`Parite:${token.sym}|Fiyat:${token.price}|DeÄŸ:${fC(token.chg)}|Sinyal:${token.sig}`;}
    else{const p=token;ctx=`Token:${p.baseToken?.name}(${p.baseToken?.symbol})|Chain:${p.chainId}|Fiyat:${fP(p.priceUsd)}|1s:${fC(p.priceChange?.h1)}|Liq:${fU(p.liquidity?.usd)}|Vol:${fU(p.volume?.h24)}|Al/Sat:${p.txns?.h1?.buys||0}/${p.txns?.h1?.sells||0}|Rug:${p._rug||0}/100`;}
    try{
      const res=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"claude-sonnet-4-20250514",max_tokens:800,messages:[{role:"user",content:`Profesyonel kripto/forex analist olarak kÄ±sa ve aksiyon odaklÄ± analiz yap.\nKAYNAK:${src}\n${ctx}\n\nğŸ“Š Genel Durum:\nğŸ¯ GiriÅŸ BÃ¶lgesi:\nğŸ›‘ Stop-Loss:\nğŸ¯ Hedef 1/Hedef 2:\nâš ï¸ Risk:\nâœ… KARAR: AL/BEKLE/KAÃ‡IN\n\nMaks 150 kelime. TÃ¼rkÃ§e.`}]})});
      const d=await res.json();setAiTxt(d.content?.[0]?.text||"Analiz alÄ±namadÄ±.");
    }catch(e){setAiTxt("BaÄŸlantÄ± hatasÄ±.");}
    setAiLoad(false);
  };

  const allSigs=useMemo(()=>{
    const tv=tvData.filter(t=>t._analysis?.level).map(t=>({...t,_type:"TV"}));
    const coin=coinData.filter(c=>c._analysis?.level).map(c=>({...c,_type:"COIN"}));
    const dex=dexData.filter(d=>d._sig?.level).map(d=>({...d,_type:"DEX"}));
    return[...tv,...coin,...dex].sort((a,b)=>{const sa=a._type==="DEX"?a._sig.score:a._analysis.score;const sb=b._type==="DEX"?b._sig.score:b._analysis.score;return sb-sa;});
  },[tvData,coinData,dexData]);

  const whales=wf==="buy"?WHALES.filter(w=>w.action==="ALIM"):wf==="sell"?WHALES.filter(w=>w.action==="SATIÅ"):WHALES;

  return(
    <div className="shell">
      {/* ORBS */}
      <div className="orbs"><div className="orb o1"/><div className="orb o2"/><div className="orb o3"/><div className="orb o4"/></div>

      {/* HEADER */}
      <div className="hdr">
        <div className="logo">
          <div className="logo-hex">PX</div>
          <div className="logo-txt">PROPTREX</div>
        </div>
        <div className="hdr-r">
          <div className="live-badge"><div className="ldot"/>{loading?"TARAMA":"CANLI"}</div>
          <div className="notif" onClick={()=>setTab("alerts")}>ğŸ””{alerts.length>0&&<div className="notif-dot"/>}</div>
        </div>
      </div>

      {/* MARKET SWITCHER */}
      <div className="mkt-sw">
        {MKTS.map(m=>(
          <div key={m.id} className={`mpill${mkt===m.id?" on":""}`}
            style={mkt===m.id?{background:m.grad,color:"#000",boxShadow:`0 4px 20px ${m.sh}`}:{}}
            onClick={()=>setMkt(m.id)}>
            {m.icon} {m.label}
          </div>
        ))}
      </div>

      {/* CONTENT */}
      <div className="content">

        {/* INSTALL BANNER */}
        {showBanner&&tab==="signals"&&(
          <div className="inst">
            <div className="inst-ico">PX</div>
            <div className="inst-info"><div className="inst-t">UygulamayÄ± YÃ¼kle</div><div className="inst-s">Ana ekrana ekle, uygulama gibi kullan</div></div>
            <button className="inst-btn" onClick={doInstall}>YÃ¼kle</button>
          </div>
        )}

        {/* â”€â”€ SIGNALS â”€â”€ */}
        {tab==="signals"&&(
          <>
            <div className="strip">
              {[[allSigs.filter(s=>(s._sig||s._analysis)?.level==="GÃœÃ‡LÃœ AL").length,"GÃ¼Ã§lÃ¼ AL","#39FF14"],
                [tvData.length,"TV","#00D4FF"],[dexData.length,"DEX","#FF2D92"],
                [coinData.length,"Coin","#BF00FF"],[alerts.length,"UyarÄ±","#FFE500"]
              ].map(([v,l,c])=>(
                <div key={l} className="schip">
                  <div className="schipv" style={{color:c}}>{v}</div>
                  <div className="schipl">{l}</div>
                </div>
              ))}
            </div>

            <div className="fbar">
              {TV_FILTERS.map(([k,l])=>(
                <button key={k} className={`fb${tvf===k?" on":""}`} onClick={()=>{setTvf(k);fetchTV(k);}}>{l}</button>
              ))}
            </div>

            <div className="sh">
              <div className="st">ğŸ”¥ AI Sinyalleri<span className="sc2">{allSigs.length}</span></div>
            </div>

            {loading&&[0,1,2].map(i=><div key={i} className="skel" style={{animationDelay:`${i*150}ms`}}/>)}

            {!loading&&mkt==="crypto"&&allSigs.slice(0,50).map((item,i)=>{
              const src=item._type;
              return<SigCard key={item.pairAddress||item._id||i} item={item} src={src} onAI={runAI} delay={Math.min(i*35,500)}/>;
            })}

            {!loading&&mkt==="crypto"&&allSigs.length===0&&(
              <div className="empty"><div className="eico">ğŸ“¡</div><div className="etit">TaranÄ±yor...</div><div className="esub">TradingView ve DexScreener verisi yÃ¼kleniyor</div></div>
            )}

            {!loading&&mkt==="forex"&&forex.map((f,i)=>(
              <div key={f.sym} className="fxcard" style={{animationDelay:`${i*50}ms`}} onClick={()=>runAI(f,"FOREX")}>
                <div><div className="fxpair">{f.sym}</div><div style={{fontSize:"11px",color:"var(--txt3)",marginTop:"2px"}}>Forex Â· Spot Â· CanlÄ±</div></div>
                <div style={{flex:1}}/>
                <div style={{textAlign:"right",marginRight:"10px"}}>
                  <div className="fxprice">{f.price.toFixed(f.price>100?2:5)}</div>
                  <div className={`fxchg ${cc(f.chg)}`}>{fC(f.chg)}</div>
                </div>
                <div className="sigpill"
                  style={{background:(f.sig==="AL"?"#39FF14":f.sig==="SAT"?"#FF2D55":"#FFE500")+"22",color:f.sig==="AL"?"#39FF14":f.sig==="SAT"?"#FF2D55":"#FFE500",border:`1px solid ${(f.sig==="AL"?"#39FF14":f.sig==="SAT"?"#FF2D55":"#FFE500")}44`}}>
                  {f.sig}
                </div>
              </div>
            ))}

            {!loading&&(mkt==="stock"||mkt==="etf"||mkt==="bond")&&(
              <div className="empty">
                <div className="eico">{mkt==="stock"?"ğŸ“ˆ":mkt==="etf"?"ğŸ§©":"ğŸ¦"}</div>
                <div className="etit">{mkt==="stock"?"Hisse Sinyalleri":mkt==="etf"?"BYF Sinyalleri":"Tahvil Sinyalleri"}</div>
                <div className="esub">API entegrasyonu yakÄ±nda geliyor.<br/>Åu an <span style={{color:"#FF2D92"}}>Kripto</span> ve <span style={{color:"#FFE500"}}>Forex</span> canlÄ± Ã§alÄ±ÅŸÄ±yor.</div>
              </div>
            )}
          </>
        )}

        {/* â”€â”€ MARKETS â”€â”€ */}
        {tab==="markets"&&(
          <>
            <div className="sh"><div className="st">ğŸ“Š CanlÄ± Piyasa</div></div>
            <div className="mtbl">
              {tvData.slice(0,40).map((t,i)=>{
                const sym=t.name?.split(":")[1]||t.name,s=t._analysis?.score||0,col=sc(s);
                return(
                  <div key={t._id||i} className="mrow" onClick={()=>runAI(t,"TV")}>
                    <div className="mico" style={{background:col+"20",color:col}}>{(sym||"?").slice(0,4)}</div>
                    <div style={{flex:1}}><div className="mname">{sym}</div><div className="msub">{t.exchange||"CEX"} Â· RSI {(t.RSI||0).toFixed(0)}</div></div>
                    <div><div className="mprice">{fP(t.close)}</div><div className={`mchg ${cc(t.change)}`}>{fC(t.change)}</div></div>
                    {t._analysis?.level&&<LTag level={t._analysis.level}/>}
                  </div>
                );
              })}
              {loading&&<div className="empty"><div style={{display:"flex",alignItems:"center",gap:"10px",justifyContent:"center"}}><div className="spin"/><span style={{color:"var(--txt2)"}}>Veriler yÃ¼kleniyor...</span></div></div>}
            </div>
          </>
        )}

        {/* â”€â”€ WHALES â”€â”€ */}
        {tab==="whales"&&(
          <>
            <div className="sh"><div className="st">ğŸ‹ Balina Hareketleri</div></div>
            <div className="fbar">
              {[["all","ğŸ‹ TÃ¼mÃ¼"],["buy","ğŸ’š AlÄ±mlar"],["sell","ğŸ”´ SatÄ±ÅŸlar"]].map(([k,l])=>(
                <button key={k} className={`fb${wf===k?" on":""}`} onClick={()=>setWf(k)}>{l}</button>
              ))}
            </div>

            {whales.map((w,i)=>{
              const isAl=w.action==="ALIM";
              const buyUrl=w.type==="dex"?(w.chain==="solana"?`https://jup.ag/swap/SOL-${w.sym}`:`https://app.uniswap.org/swap?outputCurrency=${w.sym}`):`https://www.binance.com/tr/trade/${w.sym}_USDT`;
              return(
                <div key={w.id} className={`wc ${isAl?"buy":"sell"}`} style={{animationDelay:`${i*60}ms`}}>
                  <div className="wtop">
                    <div className="wem">{isAl?"ğŸ‹":"âš ï¸"}</div>
                    <div className="winfo">
                      <div className="wtok">{w.token}</div>
                      <div className="wchain" style={{color:CHAIN_COL[w.chain]||"#888"}}>{w.chain.toUpperCase()}</div>
                    </div>
                    <div><div className="wamt" style={{color:isAl?"#39FF14":"#FF2D55"}}>{fU(w.amount)}</div><div className="wage">{w.age}dk Ã¶nce</div></div>
                  </div>
                  <div className="waddr">{w.label} Â· {w.short}</div>
                  <div className="wbtns">
                    <a href={buyUrl} target="_blank" rel="noopener noreferrer" className={`wbtn pri ${isAl?"buy-b":"sell-b"}`}>{isAl?"ğŸ›’ Åimdi AL â†’":"ğŸ“¤ Pozisyon Kapat"}</a>
                    {w.chain==="solana"&&<a href={`https://jup.ag/swap/SOL-${w.sym}`} target="_blank" rel="noopener noreferrer" className="wbtn sec">â™ƒ Jupiter</a>}
                    {(w.chain==="ethereum"||w.chain==="arbitrum")&&<a href={`https://app.uniswap.org/swap?outputCurrency=${w.sym}`} target="_blank" rel="noopener noreferrer" className="wbtn sec">ğŸ¦„ Uniswap</a>}
                    <a href={`https://www.bybit.com/trade/usdt/${w.sym}USDT`} target="_blank" rel="noopener noreferrer" className="wbtn sec">By Bybit</a>
                  </div>
                </div>
              );
            })}

            <div style={{padding:"8px 16px 24px"}}>
              <div style={{fontFamily:"var(--fd)",fontSize:"16px",letterSpacing:"1px",color:"var(--txt2)",marginBottom:"12px"}}>ğŸ”— PROFESYONEL PLATFORMLAR</div>
              {[["Nansen.ai","AkÄ±llÄ± cÃ¼zdan etiketleme","https://nansen.ai","#FF6B35"],["Arkham","CÃ¼zdan takibi & analiz","https://platform.arkhamintelligence.com","#00D4FF"],["GMGN.ai","Solana balina copy trading","https://gmgn.ai","#39FF14"],["Bubblemaps","Holder gÃ¶rsel analizi","https://app.bubblemaps.io","#FF6B35"],["Lookonchain","BÃ¼yÃ¼k iÅŸlem takibi","https://lookonchain.com","#00D4FF"],["Whale Alert","$500K+ bildirimler","https://whale-alert.io","#FFE500"]].map(([name,desc,url,col])=>(
                <a key={name} href={url} target="_blank" rel="noopener noreferrer" style={{display:"flex",alignItems:"center",gap:"12px",padding:"13px 0",borderBottom:"1px solid var(--border)",textDecoration:"none"}}>
                  <div style={{width:"38px",height:"38px",borderRadius:"12px",background:col+"18",border:`1px solid ${col}33`,flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px"}}>ğŸ”—</div>
                  <div style={{flex:1}}><div style={{fontWeight:"700",color:"var(--txt)",fontSize:"14px"}}>{name}</div><div style={{fontSize:"11px",color:"var(--txt2)",marginTop:"2px"}}>{desc}</div></div>
                  <span style={{color:col,fontSize:"20px"}}>â†—</span>
                </a>
              ))}
            </div>
          </>
        )}

        {/* â”€â”€ AI â”€â”€ */}
        {tab==="ai"&&(
          <>
            {!sel&&(
              <div className="ai-empty">
                <div className="ai-em-ico">ğŸ¤–</div>
                <div className="ai-em-title">CLAUDE AI ANALÄ°ZÄ°</div>
                <div className="ai-em-sub">Sinyaller sekmesinden bir token seÃ§in<br/><strong style={{color:"var(--pink)"}}>AI Analiz</strong> butonuna basÄ±n<br/>GiriÅŸ Â· Stop-Loss Â· Hedef seviyelerini alÄ±n</div>
              </div>
            )}
            {sel&&(
              <div className="aicard">
                <div className="aihead">
                  <div className="aiav">{(sel._ds==="DEX"?sel.baseToken?.symbol:sel._ds==="FOREX"?sel.sym:sel.name?.split(":")[1]||sel.name||"?").slice(0,3)}</div>
                  <div><div className="ainame">{sel._ds==="DEX"?sel.baseToken?.symbol:sel._ds==="FOREX"?sel.sym:sel.name?.split(":")[1]||sel.name}</div><div style={{fontSize:"11px",color:"var(--txt2)",marginTop:"2px"}}>{sel._ds} Â· Claude Sonnet</div></div>
                  <button className="airef" onClick={()=>runAI(sel,sel._ds)}>{aiLoad?"âŸ³":"â†º"} Yenile</button>
                </div>
                {aiLoad&&<div className="aiload"><div className="spin"/>Claude AI analiz ediyor...</div>}
                {!aiLoad&&aiTxt&&<div className="aibody">{aiTxt}</div>}
                {sel._links?.length>0&&<div className="ailinks"><div className="ailbl">Borsa Linkleri</div><div style={{display:"flex",gap:"6px",flexWrap:"wrap"}}>{sel._links.map((l,i)=><ExChip key={i} l={l}/>)}</div></div>}
              </div>
            )}
          </>
        )}

        {/* â”€â”€ ALERTS â”€â”€ */}
        {tab==="alerts"&&(
          <>
            <div className="sh"><div className="st">ğŸ”” UyarÄ±lar{alerts.length>0&&<span className="sc2">{alerts.length}</span>}</div></div>
            {alerts.length===0&&<div className="empty"><div className="eico">ğŸ””</div><div className="etit">UyarÄ± Bekleniyor</div><div className="esub">GÃ¼Ã§lÃ¼ AL sinyali tespit edilince burada gÃ¶rÃ¼nÃ¼r</div></div>}
            {alerts.map((a,i)=>{
              const strong=a.level==="GÃœÃ‡LÃœ AL",col=strong?"#39FF14":"#A8FF00";
              return(
                <div key={a.id} className={`alcard${strong?" str":""}`} style={{animationDelay:`${i*40}ms`}}>
                  <div className="altop">
                    <LTag level={a.level}/>
                    <div className="alname">{a.name}</div>
                    <span style={{background:col+"22",border:`1px solid ${col}44`,color:col,padding:"2px 8px",borderRadius:"8px",fontFamily:"var(--fm)",fontSize:"11px",fontWeight:"700"}}>{a.score}</span>
                    <div className="altime">{a.ts.toLocaleTimeString("tr-TR")}</div>
                  </div>
                  <div style={{display:"flex",gap:"8px",fontSize:"12px",marginBottom:"10px"}}>
                    <span style={{color:"var(--txt2)"}}>Fiyat:<span style={{color:"var(--txt)",fontFamily:"var(--fm)",fontWeight:"700",marginLeft:"4px"}}>{fP(a.price)}</span></span>
                    <span className={cc(a.change)} style={{fontFamily:"var(--fm)",fontWeight:"700"}}>{fC(a.change)}</span>
                    {a.chain&&<span style={{color:CHAIN_COL[a.chain]||"#888",fontWeight:"700",fontSize:"11px"}}>{a.chain.toUpperCase()}</span>}
                  </div>
                  <div style={{display:"flex",flexWrap:"wrap",gap:"5px",marginBottom:"10px"}}>
                    {(a.signals||[]).slice(0,3).map((s,j)=><span key={j} className="stag">{s}</span>)}
                    <span className="stag" style={{color:"var(--txt3)"}}>{a.src}</span>
                  </div>
                  {a.links?.length>0&&<div style={{display:"flex",gap:"6px",flexWrap:"wrap",paddingTop:"10px",borderTop:"1px solid var(--border)"}}>{a.links.map((l,j)=><ExChip key={j} l={l}/>)}</div>}
                  <button className="alaim" onClick={()=>runAI(a.raw,a.src)}>ğŸ¤– AI ile Analiz Et</button>
                </div>
              );
            })}
          </>
        )}

      </div>{/* /content */}

      {/* BOTTOM NAV */}
      <div className="nav">
        {NAV.map(item=>(
          <div key={item.id} className={`ni${tab===item.id?" on":""}`} style={{"--nc":item.clr}} onClick={()=>setTab(item.id)}>
            <div className="niw">
              {item.icon}
              {item.id==="alerts"&&alerts.length>0&&<div className="nbadge">{alerts.length>9?"9+":alerts.length}</div>}
            </div>
            <div className="nl">{item.label}</div>
            <div className="nind"/>
          </div>
        ))}
      </div>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
if('serviceWorker' in navigator){window.addEventListener('load',()=>navigator.serviceWorker.register('/sw.js').catch(()=>{}));}
</script>
</body>
</html>
