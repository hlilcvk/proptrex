<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PROPTREX â€” Global Market Intelligence</title>
<meta name="description" content="PROPTREX: Kripto, Forex, Hisse, BYF, Tahvil â€” 4 AI Agent, gerÃ§ek zamanlÄ± tarama, balina takibi, Claude AI analizi">
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Oxanium:wght@400;600;700;800&family=Space+Grotesk:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#04070d;--bg2:#070c14;--s1:#0a1220;--s2:#0f1c2e;
  --b1:#142238;--b2:#1a2e48;
  --cyan:#00e5ff;--purple:#b026ff;--green:#00ff88;--red:#ff2d55;
  --yellow:#ffe040;--orange:#ff8c00;
  --txt:#a8c8e0;--txt2:#5a8aaa;--txt3:#2e5a7a;--white:#e8f4ff;
  --head:'Oxanium',sans-serif;--body:'Space Grotesk',sans-serif;--mono:'JetBrains Mono',monospace;
}
html,body,#root{height:100%;overflow:hidden}
body{background:var(--bg);color:var(--txt);font-family:var(--mono);font-size:11px}
body::before{content:'';position:fixed;inset:0;z-index:9998;pointer-events:none;
  background:repeating-linear-gradient(0deg,transparent,transparent 3px,rgba(0,0,0,.025) 3px,rgba(0,0,0,.025) 4px)}
body::after{content:'';position:fixed;inset:0;z-index:0;pointer-events:none;
  background-image:linear-gradient(rgba(0,229,255,.018) 1px,transparent 1px),linear-gradient(90deg,rgba(0,229,255,.018) 1px,transparent 1px);
  background-size:64px 64px}
::-webkit-scrollbar{width:3px;height:3px}
::-webkit-scrollbar-track{background:var(--bg)}
::-webkit-scrollbar-thumb{background:var(--b2);border-radius:2px}
::-webkit-scrollbar-thumb:hover{background:#1e3a58}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}
@keyframes glow{0%,100%{filter:brightness(1)}50%{filter:brightness(1.6)}}
@keyframes slideIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
@keyframes hexPulse{0%,100%{box-shadow:0 0 0 0 rgba(0,229,255,0)}50%{box-shadow:0 0 20px 4px rgba(0,229,255,.25)}}
@keyframes scanline{0%{transform:translateY(-100%)}100%{transform:translateY(100vh)}}
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel" data-presets="react">
const {useState,useEffect,useRef,useCallback,useMemo}=React;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• CONSTANTS & THEME â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const C={bg:"#020810",bg2:"#060f1a",bg3:"#0a1520",bg4:"#0d1c2a",
  accent:"#00e5ff",accent2:"#b026ff",green:"#00ff88",red:"#ff2d55",
  yellow:"#ffe040",orange:"#ff8c00",dim:"#1a3a5a",text:"#a8c8e0",muted:"#2e5a7a",white:"#e8f4ff"};

const CHAIN_COL={solana:"#9945ff",ethereum:"#627eea",bsc:"#f3ba2f",arbitrum:"#28a0f0",
  base:"#0052ff",polygon:"#8247e5",avalanche:"#e84142",ton:"#0088cc",optimism:"#ff0420",fantom:"#1969ff"};

const MARKETS={
  crypto:{color:"#00e5ff",icon:"â‚¿",label:"Kripto Para",sub:"TV Scanner + DexScreener + Balina",live:"847 sinyal/dk"},
  cex:{color:"#00ff88",icon:"âš¡",label:"CEX TakipÃ§isi",sub:"Binance Â· Bybit Â· OKX Â· 12 borsa",live:"1,240 emir/sn"},
  dex:{color:"#f43f5e",icon:"ğŸ”—",label:"DEX TakipÃ§isi",sub:"Uniswap Â· Raydium Â· PancakeSwap",live:"382 swap/dk"},
  stock:{color:"#3b82f6",icon:"ğŸ“Š",label:"Hisse TakipÃ§isi",sub:"NYSE Â· NASDAQ Â· BIST Â· LSE",live:"92 sinyal/dk"},
  etf:{color:"#8b5cf6",icon:"ğŸ§©",label:"BYF TakipÃ§isi",sub:"8,470 ETF Â· Bitcoin ETF dahil",live:"148 gÃ¼ncelleme/dk"},
  bond:{color:"#f59e0b",icon:"ğŸ¦",label:"Tahvil TakipÃ§isi",sub:"ABD Â· AB Â· EM Â· Getiri EÄŸrisi",live:"64 sinyal/dk"},
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• EXCHANGE LINKS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const EXCHANGES={
  BINANCE:{name:"Binance",color:"#f3ba2f",icon:"B",url:s=>`https://www.binance.com/tr/trade/${s}_USDT`},
  BYBIT:{name:"Bybit",color:"#f7a600",icon:"By",url:s=>`https://www.bybit.com/trade/usdt/${s}USDT`},
  OKX:{name:"OKX",color:"#e0e0e0",icon:"O",url:s=>`https://www.okx.com/trade-spot/${s.toLowerCase()}-usdt`},
  COINBASE:{name:"Coinbase",color:"#0052ff",icon:"C",url:s=>`https://www.coinbase.com/advanced-trade/spot/${s}-USD`},
  KRAKEN:{name:"Kraken",color:"#5741d9",icon:"K",url:s=>`https://www.kraken.com/prices/${s.toLowerCase()}`},
  KUCOIN:{name:"KuCoin",color:"#00a37a",icon:"Ku",url:s=>`https://www.kucoin.com/trade/${s}-USDT`},
  GATE:{name:"Gate.io",color:"#2354e6",icon:"G",url:s=>`https://www.gate.io/trade/${s}_USDT`},
  MEXC:{name:"MEXC",color:"#2a85ff",icon:"M",url:s=>`https://www.mexc.com/tr-TR/exchange/${s}_USDT`},
  HTX:{name:"HTX",color:"#0ab4f1",icon:"H",url:s=>`https://www.htx.com/tr-tr/trade/${s.toLowerCase()}_usdt/`},
  BITGET:{name:"Bitget",color:"#00f0ff",icon:"Bg",url:s=>`https://www.bitget.com/spot/${s}USDT`},
  UNISWAP:{name:"Uniswap",color:"#ff007a",icon:"ğŸ¦„",url:a=>`https://app.uniswap.org/swap?outputCurrency=${a}`},
  RAYDIUM:{name:"Raydium",color:"#c200fb",icon:"â˜€ï¸",url:a=>`https://raydium.io/swap/?outputMint=${a}`},
  JUPITER:{name:"Jupiter",color:"#e8923a",icon:"â™ƒ",url:a=>`https://jup.ag/swap/SOL-${a}`},
  PANCAKE:{name:"PancakeSwap",color:"#1fc7d4",icon:"ğŸ¥",url:a=>`https://pancakeswap.finance/swap?outputCurrency=${a}`},
  DEXSCR:{name:"DexScreener",color:"#00e5ff",icon:"ğŸ“Š",url:(a,c)=>`https://dexscreener.com/${c}/${a}`},
  BIRDEYE:{name:"Birdeye",color:"#7b2fff",icon:"ğŸ¦…",url:a=>`https://birdeye.so/token/${a}`},
  GMGN:{name:"GMGN.ai",color:"#00ff88",icon:"ğŸ¤–",url:(a,c)=>`https://gmgn.ai/${c==="solana"?"sol":"eth"}/token/${a}`},
};

function getExchangeLinks(token,src){
  const links=[];
  if(src==="TV"){
    const sym=(token.name||"").split(":").pop()||token.name||"";
    const ex=(token.exchange||"").toUpperCase();
    links.push({name:"TradingView",color:"#1e88e5",icon:"ğŸ“ˆ",url:`https://tr.tradingview.com/chart/?symbol=${encodeURIComponent(token._id||sym)}`});
    if(ex.includes("BINANCE")) links.push({...EXCHANGES.BINANCE,url:EXCHANGES.BINANCE.url(sym)});
    if(ex.includes("BYBIT"))   links.push({...EXCHANGES.BYBIT,url:EXCHANGES.BYBIT.url(sym)});
    if(ex.includes("OKX"))     links.push({...EXCHANGES.OKX,url:EXCHANGES.OKX.url(sym)});
    if(ex.includes("COINBASE"))links.push({...EXCHANGES.COINBASE,url:EXCHANGES.COINBASE.url(sym)});
    if(ex.includes("KRAKEN"))  links.push({...EXCHANGES.KRAKEN,url:EXCHANGES.KRAKEN.url(sym)});
    if(ex.includes("KUCOIN"))  links.push({...EXCHANGES.KUCOIN,url:EXCHANGES.KUCOIN.url(sym)});
    if(ex.includes("GATE"))    links.push({...EXCHANGES.GATE,url:EXCHANGES.GATE.url(sym)});
    if(ex.includes("MEXC"))    links.push({...EXCHANGES.MEXC,url:EXCHANGES.MEXC.url(sym)});
    if(ex.includes("HTX"))     links.push({...EXCHANGES.HTX,url:EXCHANGES.HTX.url(sym)});
    if(ex.includes("BITGET"))  links.push({...EXCHANGES.BITGET,url:EXCHANGES.BITGET.url(sym)});
    if(links.length<2){links.push({...EXCHANGES.BINANCE,url:EXCHANGES.BINANCE.url(sym)});links.push({...EXCHANGES.BYBIT,url:EXCHANGES.BYBIT.url(sym)});links.push({...EXCHANGES.OKX,url:EXCHANGES.OKX.url(sym)});}
  } else if(src==="COIN"){
    const sym=token.name||"";
    links.push({name:"TradingView",color:"#1e88e5",icon:"ğŸ“ˆ",url:`https://tr.tradingview.com/chart/?symbol=${sym}USDT`});
    links.push({...EXCHANGES.BINANCE,url:EXCHANGES.BINANCE.url(sym)});
    links.push({...EXCHANGES.BYBIT,url:EXCHANGES.BYBIT.url(sym)});
    links.push({...EXCHANGES.OKX,url:EXCHANGES.OKX.url(sym)});
    links.push({...EXCHANGES.COINBASE,url:EXCHANGES.COINBASE.url(sym)});
    links.push({...EXCHANGES.KUCOIN,url:EXCHANGES.KUCOIN.url(sym)});
    links.push({name:"CoinGecko",color:"#8cc63f",icon:"ğŸ¦",url:`https://www.coingecko.com/tr/coins/${sym.toLowerCase()}`});
  } else {
    const addr=token.baseToken?.address||token.pairAddress||"";
    const chain=token.chainId||"ethereum";
    links.push({name:"DexScreener",color:EXCHANGES.DEXSCR.color,icon:"ğŸ“Š",url:EXCHANGES.DEXSCR.url(token.pairAddress||addr,chain)});
    if(chain==="solana"){
      links.push({name:"Jupiter",color:EXCHANGES.JUPITER.color,icon:"â™ƒ",url:EXCHANGES.JUPITER.url(addr)});
      links.push({name:"Raydium",color:EXCHANGES.RAYDIUM.color,icon:"â˜€ï¸",url:EXCHANGES.RAYDIUM.url(addr)});
      links.push({name:"Birdeye",color:EXCHANGES.BIRDEYE.color,icon:"ğŸ¦…",url:EXCHANGES.BIRDEYE.url(addr)});
      links.push({name:"GMGN.ai",color:EXCHANGES.GMGN.color,icon:"ğŸ¤–",url:EXCHANGES.GMGN.url(addr,"solana")});
      links.push({name:"Solscan",color:"#9945ff",icon:"ğŸ”",url:`https://solscan.io/token/${addr}`});
    } else if(chain==="bsc"){
      links.push({name:"PancakeSwap",color:EXCHANGES.PANCAKE.color,icon:"ğŸ¥",url:EXCHANGES.PANCAKE.url(addr)});
      links.push({name:"GMGN.ai",color:EXCHANGES.GMGN.color,icon:"ğŸ¤–",url:EXCHANGES.GMGN.url(addr,"bsc")});
      links.push({name:"BSCScan",color:"#f3ba2f",icon:"ğŸ”",url:`https://bscscan.com/token/${addr}`});
    } else if(chain==="base"){
      links.push({name:"Uniswap",color:EXCHANGES.UNISWAP.color,icon:"ğŸ¦„",url:EXCHANGES.UNISWAP.url(addr,chain)});
      links.push({name:"BaseScan",color:"#0052ff",icon:"ğŸ”",url:`https://basescan.org/token/${addr}`});
    } else if(chain==="arbitrum"){
      links.push({name:"Uniswap",color:EXCHANGES.UNISWAP.color,icon:"ğŸ¦„",url:EXCHANGES.UNISWAP.url(addr,chain)});
      links.push({name:"Arbiscan",color:"#28a0f0",icon:"ğŸ”",url:`https://arbiscan.io/token/${addr}`});
    } else {
      links.push({name:"Uniswap",color:EXCHANGES.UNISWAP.color,icon:"ğŸ¦„",url:EXCHANGES.UNISWAP.url(addr,chain)});
      links.push({name:"Etherscan",color:"#627eea",icon:"ğŸ”",url:`https://etherscan.io/token/${addr}`});
      links.push({name:"GMGN.ai",color:EXCHANGES.GMGN.color,icon:"ğŸ¤–",url:EXCHANGES.GMGN.url(addr,"eth")});
    }
    links.push({name:"Bubblemaps",color:"#ff6b35",icon:"ğŸ«§",url:`https://app.bubblemaps.io/${chain}/token/${addr}`});
  }
  return links.slice(0,7);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• WHALE DATA â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const WHALE_DB=[
  {id:"w1",addr:"0x3f5CE5FEFe0...a8D2",short:"0x3f5C...a8D2",label:"ğŸ‹ Balina #1",action:"ALIM",token:"PEPE",sym:"PEPE",amount:1200000,chain:"ethereum",exchange:"Uniswap",age:1,type:"dex"},
  {id:"w2",addr:"7xKf9JmN3q...pQrS",short:"7xKf...pQrS",label:"ğŸ‹ Balina #2",action:"ALIM",token:"WIF",sym:"WIF",amount:340000,chain:"solana",exchange:"Jupiter",age:2,type:"dex"},
  {id:"w3",addr:"0x8b2A1c4F7...eE3B",short:"0x8b2A...eE3B",label:"ğŸ¦ˆ KÃ¶pek BalÄ±ÄŸÄ±",action:"ALIM",token:"ARB",sym:"ARB",amount:780000,chain:"arbitrum",exchange:"Uniswap",age:3,type:"dex"},
  {id:"w4",addr:"BnM2KqpR7s...zT1W",short:"BnM2...zT1W",label:"âš ï¸ Bilinmeyen",action:"SATIÅ",token:"BONK",sym:"BONK",amount:220000,chain:"solana",exchange:"Raydium",age:4,type:"dex"},
  {id:"w5",addr:"0x1Da9F3c8...9Ab0",short:"0x1Da9...9Ab0",label:"ğŸ‹ Balina #3",action:"ALIM",token:"LINK",sym:"LINK",amount:890000,chain:"ethereum",exchange:"Binance",age:5,type:"cex"},
  {id:"w6",addr:"4hTrV9kL2n...mS8P",short:"4hTrV...mS8P",label:"ğŸ³ Orta Balina",action:"ALIM",token:"JUP",sym:"JUP",amount:150000,chain:"solana",exchange:"Jupiter",age:6,type:"dex"},
  {id:"w7",addr:"0x6Ef39Aa1...cB4D",short:"0x6Ef3...cB4D",label:"ğŸ‹ Balina #4",action:"ALIM",token:"OP",sym:"OP",amount:430000,chain:"optimism",exchange:"Uniswap",age:7,type:"dex"},
  {id:"w8",addr:"GmP5XzwQ8r...hJ2K",short:"GmP5...hJ2K",label:"âš ï¸ Bilinmeyen",action:"SATIÅ",token:"RNDR",sym:"RNDR",amount:560000,chain:"ethereum",exchange:"Coinbase",age:8,type:"cex"},
  {id:"w9",addr:"0xD4a7Fb3e...1Cc9",short:"0xD4a7...1Cc9",label:"ğŸ‹ Balina #5",action:"ALIM",token:"AAVE",sym:"AAVE",amount:2100000,chain:"ethereum",exchange:"Binance",age:9,type:"cex"},
  {id:"w10",addr:"AxT3mYqRs7...wP6L",short:"AxT3...wP6L",label:"ğŸ³ Orta Balina",action:"ALIM",token:"POPCAT",sym:"POPCAT",amount:95000,chain:"solana",exchange:"Raydium",age:11,type:"dex"},
  {id:"w11",addr:"0xF8c2Ed9b...7Gh5",short:"0xF8c2...7Gh5",label:"ğŸ‹ Balina #6",action:"SATIÅ",token:"UNI",sym:"UNI",amount:650000,chain:"ethereum",exchange:"Binance",age:13,type:"cex"},
  {id:"w12",addr:"Kq9nVzLmT4...sR2X",short:"Kq9n...sR2X",label:"ğŸ³ Orta Balina",action:"ALIM",token:"PYTH",sym:"PYTH",amount:180000,chain:"solana",exchange:"Jupiter",age:15,type:"dex"},
];

const SOCIAL=[
  {src:"PumpFun",icon:"ğŸ¯",msg:"BONK2 â€” 500+ holder 8 dakikada",chain:"sol",hot:true,url:"https://pump.fun"},
  {src:"Twitter",icon:"ğŸ¦",msg:"@elonmusk DOGE retweetledi â†’ trending #1",chain:"eth",hot:true,url:"https://twitter.com/search?q=DOGE"},
  {src:"GMGN.ai",icon:"ğŸ¤–",msg:"AkÄ±llÄ± cÃ¼zdan $200K POPCAT aldÄ±",chain:"sol",hot:true,url:"https://gmgn.ai"},
  {src:"Telegram",icon:"ğŸ“±",msg:"KOL Ã§aÄŸrÄ±sÄ±: PEPE2.0 bÃ¼yÃ¼k birikim",chain:"eth",hot:true,url:"https://t.me"},
  {src:"Discord",icon:"ğŸ’¬",msg:"ARB ekosistemi yeni airdrop sÄ±zdÄ±",chain:"arb",hot:true,url:"https://discord.com"},
  {src:"Website",icon:"ğŸŒ",msg:"AAVE v4 resmi TGE duyurusu â€” 2 saat",chain:"eth",hot:true,url:"https://aave.com"},
  {src:"CoinGecko",icon:"ğŸ“Š",msg:"WIF trendde #3 â€” 1M$ gÃ¼nlÃ¼k yeni alÄ±cÄ±",chain:"sol",hot:false,url:"https://coingecko.com"},
  {src:"Binance",icon:"ğŸ…±ï¸",msg:"Yeni listing: HMSTR oylamada 1. sÄ±ra",chain:"ton",hot:true,url:"https://www.binance.com/tr/vote-listing"},
  {src:"Kryll.io",icon:"âš™ï¸",msg:"X-Ray: 3 yeni balina hareketi tespit edildi",chain:"eth",hot:true,url:"https://app.kryll.io/x-ray"},
  {src:"GMGN.ai",icon:"ğŸ¤–",msg:"Balina wallet $500K LINK biriktirdi",chain:"eth",hot:true,url:"https://gmgn.ai"},
  {src:"Website",icon:"ğŸŒ",msg:"BASE ecosystem grant â€” 10 yeni proje",chain:"base",hot:false,url:"https://base.org"},
  {src:"Reuters",icon:"ğŸ“°",msg:"Fed faiz kararÄ± Ã¶ncesi piyasalar temkinli",chain:"eth",hot:false,url:"https://reuters.com"},
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SIGNAL ALGORITHMS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function analyzeTV(t){
  const rsi=t.RSI??50,ch=t.change??0,rec=t.Recommend_All??0;
  const vol=t.volume??0,avg=t.average_volume_10d_calc??1;
  const ema20=t.EMA20??t.close,ema50=t.EMA50??t.close,price=t.close??0;
  let score=0;const signals=[];const risks=[];
  const vr=avg>0?vol/avg:0;
  if(vr>5){score+=35;signals.push(`ğŸš€ Hacim x${vr.toFixed(1)}`)}
  else if(vr>2.5){score+=18;signals.push(`ğŸ“ˆ Hacim x${vr.toFixed(1)}`)}
  if(rsi<30){score+=30;signals.push(`âš¡ AÅŸÄ±rÄ± satÄ±m RSI:${rsi.toFixed(0)}`)}
  else if(rsi<40){score+=15;signals.push(`ğŸ“‰ RSI:${rsi.toFixed(0)}`)}
  else if(rsi>70){risks.push(`âš ï¸ AÅŸÄ±rÄ± alÄ±m RSI:${rsi.toFixed(0)}`);score-=10}
  if(price>ema20&&ema20>ema50){score+=20;signals.push("ğŸŸ¢ EMA yÃ¼kselen")}
  if(rec>0.5){score+=25;signals.push(`ğŸ“Š TV gÃ¼Ã§lÃ¼ AL`)}
  else if(rec>0.2){score+=12;signals.push(`ğŸ“Š TV AL`)}
  else if(rec<-0.3){risks.push("ğŸ“Š TV SAT");score-=15}
  if(ch>5&&ch<25){score+=15;signals.push(`â¬†ï¸ +${ch.toFixed(1)}%`)}
  if(vr>3&&Math.abs(ch)<5){score+=25;signals.push("ğŸ‹ Sessiz birikim")}
  const level=score>=70?"GÃœÃ‡LÃœ AL":score>=45?"AL":score>=25?"Ä°ZLE":null;
  return{score:Math.max(0,Math.min(score,100)),level,signals,risks};
}

function analyzeCoin(c){
  const ch1=c["1h_change_percentage"]??0,ch24=c["24h_change_percentage"]??0,ch7=c["7d_change_percentage"]??0;
  const vol=c["24h_vol_usd"]??0,mc=c["market_cap_usd"]??0;
  const price=c["price_usd"]??0,h24=c["high_24h"]??price,l24=c["low_24h"]??price;
  let score=0;const signals=[];
  if(ch1>2&&ch24>5){score+=30;signals.push(`ğŸ”¥ Momentum: 1s+${ch1.toFixed(1)}%`)}
  if(ch7<-20&&ch24>3){score+=35;signals.push("ğŸ¯ HaftalÄ±k dipten dÃ¶nÃ¼ÅŸ")}
  if(ch24<-10&&ch1>0){score+=25;signals.push("ğŸ”„ GÃ¼nlÃ¼k dip geri alÄ±m")}
  if(mc>0&&vol/mc>0.1){score+=20;signals.push(`ğŸ’° Vol/MC: ${(vol/mc*100).toFixed(0)}%`)}
  if(h24>0&&price/h24>0.95&&ch24>5){score+=20;signals.push("ğŸš€ 24s yÃ¼ksek kÄ±rÄ±lÄ±m")}
  if(l24>0&&price/l24<1.05&&ch1>0){score+=25;signals.push("âš¡ 24s dip dÃ¶nÃ¼ÅŸÃ¼")}
  const level=score>=65?"GÃœÃ‡LÃœ AL":score>=40?"AL":score>=20?"Ä°ZLE":null;
  return{score:Math.max(0,Math.min(score,100)),level,signals};
}

function rugRisk(p){
  let r=0;
  const liq=p.liquidity?.usd??0,age=p.pairCreatedAt?(Date.now()-p.pairCreatedAt)/3600000:999;
  const buys=p.txns?.h1?.buys??0,sells=p.txns?.h1?.sells??0;
  if(liq<5000)r+=55;else if(liq<20000)r+=30;else if(liq<50000)r+=10;
  if(age<0.5)r+=40;else if(age<2)r+=25;else if(age<6)r+=10;
  if(buys>0&&sells===0&&buys>5)r+=35;
  if(liq>0&&(p.volume?.h24??0)/liq>20)r+=15;
  return Math.min(r,100);
}

function analyzeDEX(p){
  const rug=rugRisk(p);if(rug>65)return null;
  const vol1h=p.volume?.h1??0,vol6h=p.volume?.h6??0,liq=p.liquidity?.usd??0;
  const ch1=p.priceChange?.h1??0,buys=p.txns?.h1?.buys??0,sells=p.txns?.h1?.sells??0;
  let score=0;const sigs=[];
  const avg=vol6h/6;
  if(avg>0&&vol1h/avg>4){score+=40;sigs.push(`ğŸš€ x${(vol1h/avg).toFixed(1)} hacim`)}
  if(buys>sells*2&&buys>5){score+=25;sigs.push(`ğŸ’š ${buys}/${sells}`)}
  if(ch1>5&&ch1<50){score+=20;sigs.push(`+${ch1.toFixed(1)}%`)}
  if(liq>0&&vol1h/liq>2&&ch1<10){score+=20;sigs.push("ğŸ‹ Sessiz birikim")}
  const avgTxSize=(buys+sells)>0?vol1h/(buys+sells):0;
  if(avgTxSize>50000){score+=25;sigs.push(`ğŸ‹ Ort tx: ${fU(avgTxSize)}`)}
  const level=score>=70?"GÃœÃ‡LÃœ AL":score>=45?"AL":score>=25?"Ä°ZLE":null;
  return level?{score,level,sigs,rug}:null;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• FORMATTERS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const fU=n=>{if(!n)return"â€”";const v=Math.abs(n);if(v>=1e12)return"$"+(n/1e12).toFixed(2)+"T";if(v>=1e9)return"$"+(n/1e9).toFixed(2)+"B";if(v>=1e6)return"$"+(n/1e6).toFixed(2)+"M";if(v>=1e3)return"$"+(n/1e3).toFixed(1)+"K";return"$"+Number(n).toPrecision(3)};
const fP=n=>{if(!n)return"â€”";const v=Math.abs(n);if(v<0.000001)return"$"+Number(n).toExponential(2);if(v<0.01)return"$"+Number(n).toFixed(6);if(v<1)return"$"+Number(n).toFixed(4);return"$"+Number(n).toLocaleString("tr-TR",{maximumFractionDigits:2})};
const fC=n=>n==null?"â€”":(n>0?"+":"")+Number(n).toFixed(2)+"%";
const pC=n=>(n??0)>0?C.green:(n??0)<0?C.red:C.muted;

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SUB-COMPONENTS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const ExLink=({link})=>(
  <a href={link.url} target="_blank" rel="noopener noreferrer"
    style={{display:"inline-flex",alignItems:"center",gap:"3px",background:link.color+"18",
      border:`1px solid ${link.color}44`,color:link.color,borderRadius:"3px",
      padding:"2px 7px",fontSize:"8px",fontWeight:"bold",textDecoration:"none",whiteSpace:"nowrap"}}
    onMouseEnter={e=>e.currentTarget.style.background=link.color+"30"}
    onMouseLeave={e=>e.currentTarget.style.background=link.color+"18"}>
    <span>{link.icon}</span>{link.name}â†—
  </a>
);

const ScoreBadge=({score,level})=>{
  const col=level==="GÃœÃ‡LÃœ AL"?C.green:level==="AL"?"#7fff00":level==="Ä°ZLE"?C.yellow:C.muted;
  return(
    <span style={{display:"inline-flex",alignItems:"center",gap:"4px"}}>
      <span style={{display:"inline-block",width:"44px",height:"4px",background:"#091c2c",borderRadius:"2px",overflow:"hidden"}}>
        <span style={{display:"block",height:"100%",width:score+"%",background:col,borderRadius:"2px"}}/>
      </span>
      <span style={{color:col,fontSize:"8px",fontWeight:"bold"}}>{score}</span>
    </span>
  );
};

const LevelPill=({level})=>{
  const m={"GÃœÃ‡LÃœ AL":C.green,"AL":"#7fff00","Ä°ZLE":C.yellow};
  const col=m[level]||C.muted;
  if(!level)return<span style={{color:C.muted,fontSize:"8px"}}>â€”</span>;
  return<span style={{background:col+"22",border:`1px solid ${col}55`,color:col,borderRadius:"3px",padding:"1px 7px",fontSize:"8px",fontWeight:"bold",letterSpacing:"1px",whiteSpace:"nowrap"}}>{level}</span>;
};

// Whale helpers
const getWhaleTrade=w=>{if(w.type==="dex"){if(w.chain==="solana")return`https://jup.ag/swap/SOL-${w.sym}`;if(w.chain==="bsc")return`https://pancakeswap.finance/swap?outputCurrency=${w.sym}`;return`https://app.uniswap.org/swap?outputCurrency=${w.sym}`}return`https://www.binance.com/tr/trade/${w.sym}_USDT`};
const getWhaleExplorer=w=>{if(w.chain==="solana")return`https://solscan.io/account/${w.addr}`;if(w.chain==="bsc")return`https://bscscan.com/address/${w.addr}`;if(w.chain==="arbitrum")return`https://arbiscan.io/address/${w.addr}`;if(w.chain==="optimism")return`https://optimistic.etherscan.io/address/${w.addr}`;return`https://etherscan.io/address/${w.addr}`};

// TV payload builders
const TV_URL="https://scanner.tradingview.com/crypto/scan";
const COIN_URL="https://scanner.tradingview.com/coin/scan";
const TV_FILTERS=[["volume","ğŸ“Š Hacim"],["gainers","ğŸ“ˆ YÃ¼kselenler"],["oversold","âš¡ AÅŸÄ±rÄ± SatÄ±m"],["momentum","ğŸ”¥ Momentum"],["whale","ğŸ‹ Balina"],["dip","ğŸ¯ Dip"],["new_high","ğŸš€ Yeni YÃ¼ksek"]];

const buildTV=(filter,limit=150)=>({
  filter:{
    volume:[{left:"volume",operation:"greater",right:500000}],
    gainers:[{left:"change",operation:"greater",right:5},{left:"volume",operation:"greater",right:100000}],
    oversold:[{left:"RSI",operation:"less",right:35},{left:"volume",operation:"greater",right:100000}],
    momentum:[{left:"Recommend.All",operation:"greater",right:0.3},{left:"volume",operation:"greater",right:500000}],
    whale:[{left:"volume",operation:"greater",right:5000000},{left:"change",operation:"in_range",right:[0,20]}],
    dip:[{left:"change",operation:"less",right:-5},{left:"RSI",operation:"in_range",right:[25,45]}],
    new_high:[{left:"change",operation:"greater",right:10},{left:"RSI",operation:"less",right:80}],
  }[filter]||[{left:"volume",operation:"greater",right:500000}],
  options:{lang:"tr"},markets:["crypto"],symbols:{query:{types:[]},tickers:[]},
  columns:["name","description","close","change","change_abs","volume","market_cap_calc","Recommend.All","RSI","RSI[1]","MACD.macd","MACD.signal","EMA20","EMA50","EMA200","Volatility.D","average_volume_10d_calc","exchange","currency_code","type"],
  sort:{sortBy:"volume",sortOrder:"desc"},range:[0,limit],
});

const buildCoin=(limit=150)=>({
  filter:[{left:"24h_vol_usd",operation:"greater",right:100000}],
  options:{lang:"tr"},markets:["coin"],symbols:{query:{types:[]},tickers:[]},
  columns:["name","description","price_usd","24h_vol_usd","market_cap_usd","1h_change_percentage","24h_change_percentage","7d_change_percentage","fully_diluted_valuation","total_supply","circulating_supply","exchanges_list","blockchain_list","high_24h","low_24h","ath_usd","atl_usd"],
  sort:{sortBy:"24h_vol_usd",sortOrder:"desc"},range:[0,limit],
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• STATIC DATA (Forex / Stock / ETF / Bond) â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const FOREX_PAIRS=[
  {sym:"EUR/USD",price:1.08421,chg:+0.24,sig:"AL"},
  {sym:"GBP/USD",price:1.26840,chg:-0.11,sig:"SAT"},
  {sym:"USD/JPY",price:154.820,chg:+0.03,sig:"BEKLE"},
  {sym:"XAU/USD",price:2648.30,chg:+0.62,sig:"AL"},
  {sym:"USD/CHF",price:0.90124,chg:-0.08,sig:"SAT"},
  {sym:"AUD/USD",price:0.65240,chg:+0.14,sig:"AL"},
  {sym:"USD/CAD",price:1.36281,chg:+0.01,sig:"BEKLE"},
  {sym:"NZD/USD",price:0.60140,chg:+0.18,sig:"AL"},
  {sym:"EUR/GBP",price:0.85420,chg:+0.07,sig:"BEKLE"},
  {sym:"USD/TRY",price:33.840,chg:+0.12,sig:"SAT"},
  {sym:"XAG/USD",price:29.840,chg:+0.88,sig:"AL"},
  {sym:"US30",price:39142.23,chg:+0.18,sig:"AL"},
];

const ECO_CAL=[
  {time:"13:30",flag:"ğŸ‡ºğŸ‡¸",event:"ABD Ã‡ekirdek TÃœFE (aylÄ±k)",impact:"YÃœK",forecast:"0.3%"},
  {time:"14:00",flag:"ğŸ‡ªğŸ‡º",event:"ECB Faiz KararÄ±",impact:"YÃœK",forecast:"3.50%"},
  {time:"15:30",flag:"ğŸ‡ºğŸ‡¸",event:"Ä°ÅŸsizlik BaÅŸvurularÄ±",impact:"ORT",forecast:"215K"},
  {time:"17:00",flag:"ğŸ‡ºğŸ‡¸",event:"Ham Petrol StoklarÄ±",impact:"ORT",forecast:"-1.2M"},
  {time:"19:00",flag:"ğŸ‡¬ğŸ‡§",event:"BoE Para PolitikasÄ±",impact:"DÃœÅ",forecast:"5.00%"},
];

const INDICES=[
  {name:"S&P 500",val:"5,248.42",chg:"+0.42%",up:true,open:true},
  {name:"NASDAQ",val:"16,421",chg:"+0.61%",up:true,open:true},
  {name:"DOW",val:"39,142",chg:"+0.18%",up:true,open:true},
  {name:"BIST 100",val:"9,240",chg:"-0.18%",up:false,open:true},
  {name:"DAX",val:"18,412",chg:"+0.34%",up:true,open:false},
  {name:"Nikkei",val:"40,168",chg:"+0.92%",up:true,open:false},
  {name:"FTSE 100",val:"7,843",chg:"-0.09%",up:false,open:false},
  {name:"CAC 40",val:"8,124",chg:"+0.27%",up:true,open:false},
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  MAIN APP
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function ProPtrex(){
  const [market,setMarket]=useState("crypto");
  const [tab,setTab]=useState("whale_wallets");
  const [tvFilter,setTvFilter]=useState("volume");
  const [tvData,setTvData]=useState([]);
  const [coinData,setCoinData]=useState([]);
  const [dexData,setDexData]=useState([]);
  const [alerts,setAlerts]=useState([]);
  const [selected,setSelected]=useState(null);
  const [aiText,setAiText]=useState("");
  const [aiLoading,setAiLoading]=useState(false);
  const [loading,setLoading]=useState({tv:false,coin:false,dex:false});
  const [lastScan,setLastScan]=useState(null);
  const [scanCount,setScanCount]=useState(0);
  const [ticker,setTicker]=useState(0);
  const [whaleFilter,setWhaleFilter]=useState("all");
  const [forexPrices,setForexPrices]=useState(FOREX_PAIRS);
  const [clock,setClock]=useState("");
  const seenAlerts=useRef(new Set());
  const alertsRef=useRef([]);

  const m=MARKETS[market];

  // Clock
  useEffect(()=>{
    const t=setInterval(()=>{
      const now=new Date();
      setClock(now.toUTCString().match(/(\d\d:\d\d:\d\d)/)[1]);
    },1000);
    return()=>clearInterval(t);
  },[]);

  // Forex live simulation
  useEffect(()=>{
    const t=setInterval(()=>{
      setForexPrices(prev=>prev.map(p=>{
        const vol=p.sym.includes("JPY")||p.sym.includes("TRY")||p.sym.includes("US30")?0.08:0.00015;
        const np=+(p.price+(Math.random()-.5)*vol).toFixed(p.price>100?2:p.price>1?5:5);
        return{...p,price:np};
      }));
    },2000);
    return()=>clearInterval(t);
  },[]);

  // Fetch TV
  const fetchTV=useCallback(async(filter=tvFilter)=>{
    setLoading(l=>({...l,tv:true}));
    try{
      const res=await fetch(TV_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(buildTV(filter))});
      if(!res.ok)throw new Error(res.status);
      const json=await res.json();
      const cols=["name","description","close","change","change_abs","volume","market_cap_calc","Recommend.All","RSI","RSI[1]","MACD.macd","MACD.signal","EMA20","EMA50","EMA200","Volatility.D","average_volume_10d_calc","exchange","currency_code","type"];
      const rows=(json.data||[]).map(item=>{
        const d=item.d||[];const obj={};cols.forEach((c,i)=>obj[c.replace(/\./g,"_")]=d[i]);
        const analysis=analyzeTV(obj);const links=getExchangeLinks(obj,"TV");
        return{...obj,_src:"TV",_analysis:analysis,_links:links,_id:item.s};
      }).sort((a,b)=>b._analysis.score-a._analysis.score);
      setTvData(rows);
      rows.filter(t=>t._analysis.level==="GÃœÃ‡LÃœ AL").forEach(t=>{
        const key=`tv-${t._id}-${Math.floor(Date.now()/60000)}`;
        if(!seenAlerts.current.has(key)){
          seenAlerts.current.add(key);
          alertsRef.current=[{id:key,ts:new Date(),src:"TV",name:t.name,desc:t.description,
            level:t._analysis.level,score:t._analysis.score,signals:t._analysis.signals,
            price:t.close,change:t.change,vol:t.volume,exchange:t.exchange,links:t._links,raw:t},...alertsRef.current].slice(0,150);
          setAlerts([...alertsRef.current]);
        }
      });
    }catch(e){console.error("TV:",e);}
    setLoading(l=>({...l,tv:false}));
  },[tvFilter]);

  // Fetch Coin
  const fetchCoin=useCallback(async()=>{
    setLoading(l=>({...l,coin:true}));
    try{
      const res=await fetch(COIN_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(buildCoin())});
      if(!res.ok)throw new Error(res.status);
      const json=await res.json();
      const cols=["name","description","price_usd","24h_vol_usd","market_cap_usd","1h_change_percentage","24h_change_percentage","7d_change_percentage","fully_diluted_valuation","total_supply","circulating_supply","exchanges_list","blockchain_list","high_24h","low_24h","ath_usd","atl_usd"];
      const rows=(json.data||[]).map(item=>{
        const d=item.d||[];const obj={};cols.forEach((c,i)=>obj[c]=d[i]);
        const analysis=analyzeCoin(obj);const links=getExchangeLinks(obj,"COIN");
        return{...obj,_src:"COIN",_analysis:analysis,_links:links,_id:item.s};
      }).sort((a,b)=>b._analysis.score-a._analysis.score);
      setCoinData(rows);
    }catch(e){console.error("COIN:",e);}
    setLoading(l=>({...l,coin:false}));
  },[]);

  // Fetch DEX
  const fetchDEX=useCallback(async()=>{
    setLoading(l=>({...l,dex:true}));
    const terms=["eth","sol","bnb","pepe","ai","doge","wif","arb","link","rndr","bonk","jup"];
    const q=terms[scanCount%terms.length];
    try{
      const [s1,s2]=await Promise.allSettled([
        fetch(`https://api.dexscreener.com/latest/dex/search?q=${q}`),
        fetch("https://api.dexscreener.com/token-boosts/latest/v1"),
      ]);
      let pairs=[];
      if(s1.status==="fulfilled"&&s1.value.ok){const d=await s1.value.json();if(d.pairs)pairs.push(...d.pairs.slice(0,50));}
      if(s2.status==="fulfilled"&&s2.value.ok){
        const d=await s2.value.json();
        if(Array.isArray(d)){
          const addrs=d.slice(0,15).map(t=>t.tokenAddress).filter(Boolean);
          if(addrs.length){try{const r=await fetch(`https://api.dexscreener.com/latest/dex/tokens/${addrs.join(",")}`);if(r.ok){const td=await r.json();if(td.pairs)pairs.push(...td.pairs.slice(0,30));}}catch{}}
        }
      }
      const enriched=pairs.filter(p=>p?.baseToken&&p?.priceUsd).map(p=>{
        const sig=analyzeDEX(p);const links=getExchangeLinks(p,"DEX");
        return{...p,_sig:sig,_rug:rugRisk(p),_links:links,_src:"DEX"};
      });
      setDexData(prev=>{
        const map=new Map(prev.map(p=>[p.pairAddress,p]));
        enriched.forEach(p=>map.set(p.pairAddress,p));
        return Array.from(map.values()).sort((a,b)=>(b._sig?.score||0)-(a._sig?.score||0)).slice(0,200);
      });
      enriched.filter(p=>p._sig?.level==="GÃœÃ‡LÃœ AL").forEach(p=>{
        const key=`dex-${p.pairAddress}-${Math.floor(Date.now()/60000)}`;
        if(!seenAlerts.current.has(key)){
          seenAlerts.current.add(key);
          alertsRef.current=[{id:key,ts:new Date(),src:"DEX",name:p.baseToken?.symbol,desc:p.baseToken?.name,
            level:p._sig.level,score:p._sig.score,signals:p._sig.sigs,
            price:p.priceUsd,change:p.priceChange?.h1,vol:p.volume?.h24,chain:p.chainId,links:p._links,raw:p},...alertsRef.current].slice(0,150);
          setAlerts([...alertsRef.current]);
        }
      });
    }catch(e){console.error("DEX:",e);}
    setLoading(l=>({...l,dex:false}));
    setScanCount(c=>c+1);setLastScan(new Date());
  },[scanCount]);

  const fetchAll=useCallback(()=>{fetchTV();fetchCoin();fetchDEX();},[fetchTV,fetchCoin,fetchDEX]);
  useEffect(()=>{fetchAll();const t=setInterval(fetchAll,10000);return()=>clearInterval(t);},[]);
  useEffect(()=>{const t=setInterval(()=>setTicker(c=>c+1),1000);return()=>clearInterval(t);},[]);

  const countdown=lastScan?Math.max(0,Math.ceil((10000-(Date.now()-lastScan.getTime()))/1000)):10;
  const isLoading=loading.tv||loading.coin||loading.dex;
  const strongAlerts=alerts.filter(a=>a.level==="GÃœÃ‡LÃœ AL").length;

  // AI
  const runAI=async(token,src)=>{
    setSelected({...token,_displaySrc:src});setAiText("");setAiLoading(true);setTab("ai");
    let ctx="";
    if(src==="TV"){const t=token;ctx=`Token: ${t.name} | Exchange: ${t.exchange||"â€”"}\nFiyat: $${t.close} | DeÄŸiÅŸim: ${fC(t.change)}\nHacim: ${fU(t.volume)} | MC: ${fU(t.market_cap_calc)}\nRSI: ${(t.RSI||0).toFixed(1)} | TV Ã–neri: ${((t.Recommend_All||0)*100).toFixed(0)}\nEMA20: ${(t.EMA20||0).toFixed(4)} | EMA50: ${(t.EMA50||0).toFixed(4)}\nHacim/10g ort: ${t.average_volume_10d_calc>0?((t.volume/t.average_volume_10d_calc).toFixed(1)+"x"):"â€”"}\nSinyaller: ${t._analysis?.signals?.join(", ")||"â€”"}`;}
    else if(src==="COIN"){const c=token;ctx=`Coin: ${c.name} | Fiyat: ${fP(c.price_usd)}\n1s: ${fC(c["1h_change_percentage"])} | 24s: ${fC(c["24h_change_percentage"])} | 7g: ${fC(c["7d_change_percentage"])}\nHacim: ${fU(c["24h_vol_usd"])} | MC: ${fU(c.market_cap_usd)}\nATH: ${fP(c.ath_usd)} | 24s YÃ¼k: ${fP(c.high_24h)} | DÃ¼ÅŸ: ${fP(c.low_24h)}\nSinyaller: ${token._analysis?.signals?.join(", ")||"â€”"}`;}
    else if(src==="FOREX"){ctx=`Parite: ${token.sym}\nFiyat: ${token.price} | DeÄŸiÅŸim: ${fC(token.chg)}\nMevcut Sinyal: ${token.sig}\nSeans: ${getSessionStatus()}`;}
    else{const p=token;ctx=`Token: ${p.baseToken?.name} (${p.baseToken?.symbol}) â€” ${p.chainId?.toUpperCase()}\nFiyat: ${fP(p.priceUsd)} | 1s: ${fC(p.priceChange?.h1)} | 24s: ${fC(p.priceChange?.h24)}\nLikidite: ${fU(p.liquidity?.usd)} | 24s Hacim: ${fU(p.volume?.h24)} | 1s Hacim: ${fU(p.volume?.h1)}\n1s AlÄ±m: ${p.txns?.h1?.buys||0} | SatÄ±ÅŸ: ${p.txns?.h1?.sells||0}\nFDV: ${fU(p.fdv)} | Rug Risk: ${p._rug||0}/100\nSinyaller: ${p._sig?.sigs?.join(", ")||"â€”"}`;}
    try{
      const res=await fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json"},
        body:JSON.stringify({model:"claude-sonnet-4-20250514",max_tokens:1000,messages:[{role:"user",content:`Sen profesyonel kripto/forex trader ve teknik analistsin. KAYNAK: ${src}\n\n${ctx}\n\n1. Genel DeÄŸerlendirme\n2. Teknik Analiz (RSI, EMA, hacim/momentum)\n3. Balina/AkÄ±llÄ± Para hareketi\n4. Risk Analizi\n5. AL/BEKLE/KAÃ‡IN kararÄ± + gerekÃ§e\n6. GiriÅŸ, Stop-Loss, Hedef seviyeleri\n\nKÄ±sa, net, trader dilinde. TÃ¼rkÃ§e.`}]})});
      const d=await res.json();setAiText(d.content?.[0]?.text||"Analiz alÄ±namadÄ±.");
    }catch(e){setAiText("Hata: "+e.message);}
    setAiLoading(false);
  };

  // â•â•â• SESSION STATUS â•â•â•
  const getSessionStatus=()=>{
    const h=new Date().getUTCHours();
    const tok=h>=0&&h<9,lon=h>=8&&h<17,ny=h>=13&&h<22,ovl=lon&&ny;
    return`Tokyo:${tok?"AÃ‡IK":"KAPALI"} London:${lon?"AÃ‡IK":"KAPALI"} NY:${ny?"AÃ‡IK":"KAPALI"}${ovl?" | OVERLAP AKTIF":""}`;
  };
  const getSessionPills=()=>{
    const h=new Date().getUTCHours();
    return[
      {label:"TYO",on:h>=0&&h<9},
      {label:"LON",on:h>=8&&h<17},
      {label:"OVLP",on:(h>=8&&h<17)&&(h>=13&&h<22),ov:true},
      {label:"NYC",on:h>=13&&h<22},
    ];
  };

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TABS per market â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  const CRYPTO_TABS=[
    ["whale_wallets","ğŸ‹ Balina"],
    ["tv_pairs","ğŸ“Š TV CEX"],
    ["tv_coins","ğŸª™ TV Coins"],
    ["dex","ğŸ”· DEX"],
    ["alerts",`ğŸ”” UyarÄ±${alerts.length>0?` (${alerts.length})`:""}`],
    ["social","ğŸ“¡ Sosyal"],
    ["ai","ğŸ¤– AI"],
  ];
  const FOREX_TABS=[["forex_pairs","ğŸ“ˆ Pariteler"],["forex_sessions","ğŸ• Seanslar"],["forex_cal","ğŸ“… Ekonomi"],["social","ğŸ“¡ Sosyal"],["ai","ğŸ¤– AI"]];
  const STOCK_TABS=[["stock_table","ğŸ“Š Hisseler"],["indices","ğŸŒ Endeksler"],["social","ğŸ“¡ Sosyal"],["ai","ğŸ¤– AI"]];
  const ETF_TABS=[["etf_table","ğŸ§© ETF'ler"],["btcetf","â‚¿ BTC ETF"],["social","ğŸ“¡ Sosyal"],["ai","ğŸ¤– AI"]];
  const BOND_TABS=[["yield_curve","ğŸ“ˆ Getiri EÄŸrisi"],["bond_global","ğŸŒ KÃ¼resel"],["corp_bonds","ğŸ¢ Åirket"],["social","ğŸ“¡ Sosyal"],["ai","ğŸ¤– AI"]];

  const currentTabs=market==="crypto"||market==="cex"||market==="dex"?CRYPTO_TABS:
    market==="stock"?STOCK_TABS:market==="etf"?ETF_TABS:market==="bond"?BOND_TABS:FOREX_TABS;

  // Switch market â†’ set default tab
  const handleMarket=(mk)=>{
    setMarket(mk);
    const defaults={crypto:"whale_wallets",cex:"tv_pairs",dex:"dex",stock:"stock_table",etf:"etf_table",bond:"yield_curve"};
    setTab(defaults[mk]||"whale_wallets");
  };

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• STYLES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  const S={
    pill:(c)=>({background:c+"18",border:`1px solid ${c}44`,color:c,borderRadius:"3px",padding:"1px 8px",fontSize:"8px",fontWeight:"bold",letterSpacing:"1px"}),
    btn:(a,c)=>({background:a?(c||C.accent)+"22":"transparent",border:`1px solid ${a?(c||C.accent):"#0a2030"}`,
      color:a?(c||C.accent):C.muted,borderRadius:"4px",padding:"3px 10px",cursor:"pointer",fontSize:"8px",fontWeight:a?"bold":"normal"}),
    th:{padding:"5px 8px",textAlign:"left",fontSize:"7px",color:C.muted,textTransform:"uppercase",letterSpacing:"1px",borderBottom:`1px solid #091c2c`,whiteSpace:"nowrap"},
    td:{padding:"4px 8px",borderBottom:`1px solid #060f1c`,verticalAlign:"middle"},
    scroll:{overflowX:"auto",overflowY:"auto",maxHeight:"calc(100vh - 210px)"},
    tbl:{width:"100%",borderCollapse:"collapse"},
    aiBox:{background:C.bg2,border:`1px solid #0d2a3e`,borderRadius:"8px",padding:"16px",margin:"12px 14px",lineHeight:"1.7",whiteSpace:"pre-wrap",fontSize:"11px",color:"#90b8d0"},
    whaleCard:(a)=>({background:a==="ALIM"?"#041810":"#180408",border:`1px solid ${a==="ALIM"?C.green:C.red}22`,borderRadius:"6px",padding:"10px 14px",marginBottom:"6px"}),
    linkRow:{display:"flex",gap:"4px",flexWrap:"wrap",padding:"4px 8px 6px",background:"#040d18",borderBottom:`1px solid #060f1c`},
  };

  const whales=whaleFilter==="buy"?WHALE_DB.filter(w=>w.action==="ALIM"):whaleFilter==="sell"?WHALE_DB.filter(w=>w.action==="SATIÅ"):WHALE_DB;

  return (
    <div style={{display:"flex",height:"100vh",background:C.bg,color:C.text,fontFamily:C.mono||"'JetBrains Mono',monospace",fontSize:"11px",position:"relative",zIndex:1}}>
      <style>{`
        @keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}
        @keyframes glow{0%,100%{filter:brightness(1)}50%{filter:brightness(1.5)}}
        @keyframes hexPulse{0%,100%{box-shadow:0 0 0 0 rgba(0,229,255,0)}50%{box-shadow:0 0 20px 4px rgba(0,229,255,.22)}}
        tbody tr:hover td{background:#0a1c2c!important;cursor:pointer}
        a:hover{opacity:.82}
      `}</style>

      {/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• SIDEBAR â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}
      <div style={{width:"190px",flexShrink:0,background:"#040b14",borderRight:`1px solid #0e2030`,display:"flex",flexDirection:"column",height:"100vh",overflow:"hidden"}}>

        {/* Logo */}
        <div style={{padding:"14px 14px 10px",borderBottom:`1px solid #0e2030`}}>
          <div style={{display:"flex",alignItems:"center",gap:"10px"}}>
            <div style={{width:"32px",height:"32px",background:`linear-gradient(135deg,${m.color},rgba(0,0,0,.4))`,
              clipPath:"polygon(50% 0%,100% 25%,100% 75%,50% 100%,0% 75%,0% 25%)",
              display:"flex",alignItems:"center",justifyContent:"center",
              fontSize:"12px",fontWeight:"800",color:"#fff",animation:"hexPulse 4s ease-in-out infinite",
              fontFamily:"'Oxanium',sans-serif",transition:"background .4s"}}>PX</div>
            <div>
              <div style={{fontFamily:"'Oxanium',sans-serif",fontSize:"16px",fontWeight:"800",letterSpacing:"2px",color:C.white}}>
                PROP<span style={{color:m.color,transition:"color .4s"}}>TREX</span>
              </div>
              <div style={{fontSize:"7px",color:C.muted,letterSpacing:"1px"}}>GLOBAL INTEL</div>
            </div>
          </div>
        </div>

        {/* Market nav */}
        <div style={{padding:"8px 8px",flex:1}}>
          <div style={{fontSize:"8px",color:C.muted,letterSpacing:"2px",textTransform:"uppercase",padding:"8px 6px 4px"}}>Piyasalar</div>
          {Object.entries(MARKETS).map(([k,v])=>{
            const active=market===k;
            return(
              <div key={k} onClick={()=>handleMarket(k)}
                style={{display:"flex",alignItems:"center",gap:"8px",padding:"8px 10px",cursor:"pointer",
                  borderRadius:"5px",marginBottom:"2px",transition:"all .15s",
                  background:active?"rgba(255,255,255,.05)":"transparent",
                  borderLeft:active?`2px solid ${v.color}`:"2px solid transparent"}}
                onMouseEnter={e=>{if(!active)e.currentTarget.style.background="rgba(255,255,255,.03)"}}
                onMouseLeave={e=>{if(!active)e.currentTarget.style.background="transparent"}}>
                <div style={{width:"7px",height:"7px",borderRadius:"50%",background:active?v.color:C.muted,
                  boxShadow:active?`0 0 8px 2px ${v.color}`:undefined,
                  animation:active?"pulse 2s ease-in-out infinite":undefined,
                  transition:"all .3s"}}/>
                <span style={{fontSize:"12px",fontWeight:active?"700":"500",color:active?C.white:C.text,flex:1,transition:"color .15s"}}>{v.label}</span>
                {active&&<span style={{...S.pill(v.color),fontSize:"7px",padding:"1px 5px"}}>CANLI</span>}
              </div>
            );
          })}
        </div>

        {/* Session + clock */}
        <div style={{padding:"10px 12px",borderTop:`1px solid #0e2030`}}>
          <a href="/exchange" style={{display:"flex",alignItems:"center",gap:"6px",padding:"6px 8px",marginBottom:"8px",
            background:"linear-gradient(135deg,rgba(251,191,36,.1),rgba(245,158,11,.05))",
            border:"1px solid rgba(251,191,36,.3)",borderRadius:"5px",textDecoration:"none",cursor:"pointer"}}>
            <span style={{fontSize:"12px"}}>ğŸ“Š</span>
            <span style={{fontSize:"9px",fontWeight:"800",color:"#fbbf24",letterSpacing:"0.5px"}}>EXCHANGE HUB</span>
            <span style={{marginLeft:"auto",fontSize:"8px",color:"#f59e0b"}}>â†’</span>
          </a>
          <div style={{fontSize:"9px",color:C.muted,marginBottom:"6px",fontFamily:"'JetBrains Mono',monospace"}}>UTC {clock}</div>
          <div style={{display:"flex",gap:"3px",flexWrap:"wrap"}}>
            {getSessionPills().map(s=>(
              <span key={s.label} style={{padding:"2px 5px",fontSize:"8px",fontWeight:"bold",borderRadius:"3px",
                background:s.ov&&s.on?"rgba(251,146,60,.15)":s.on?"rgba(34,197,94,.12)":"rgba(255,255,255,.04)",
                color:s.ov&&s.on?"#fb923c":s.on?C.green:C.muted,
                border:`1px solid ${s.ov&&s.on?"rgba(251,146,60,.25)":s.on?"rgba(34,197,94,.2)":"#0e2030"}`,
                animation:s.ov&&s.on?"pulse 2s ease-in-out infinite":undefined}}>{s.label}</span>
            ))}
          </div>
        </div>
      </div>

      {/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• MAIN â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}
      <div style={{flex:1,display:"flex",flexDirection:"column",minWidth:0,overflow:"hidden"}}>

        {/* â”€â”€ TOP BAR â”€â”€ */}
        <div style={{height:"52px",background:"#040b14",borderBottom:`1px solid #0e2030`,display:"flex",alignItems:"center",padding:"0 16px",gap:"12px",flexShrink:0}}>
          <span style={{fontSize:"20px"}}>{m.icon}</span>
          <div>
            <div style={{fontFamily:"'Oxanium',sans-serif",fontSize:"14px",fontWeight:"800",color:m.color,letterSpacing:"0.5px",transition:"color .4s"}}>{m.label.toUpperCase()}</div>
            <div style={{fontSize:"9px",color:C.muted}}>{m.sub}</div>
          </div>
          <div style={{marginLeft:"auto",display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"}}>
            {market==="crypto"||market==="cex"||market==="dex"?<>
              {[[tvData.length,"TV",C.accent],[coinData.length,"Coins",C.accent2],[dexData.length,"DEX",C.orange],
                [WHALE_DB.filter(w=>w.action==="ALIM").length,"Balina",C.green],
                [alerts.length,"UyarÄ±",C.yellow],[strongAlerts,"GÃ¼Ã§lÃ¼",C.green],
              ].map(([v,l,c])=>(
                <div key={l} style={{background:C.bg2,border:`1px solid #0a2030`,padding:"3px 10px",minWidth:"52px"}}>
                  <div style={{fontSize:"13px",fontWeight:"bold",color:c,lineHeight:1.2}}>{v}</div>
                  <div style={{fontSize:"7px",color:C.muted,textTransform:"uppercase",letterSpacing:"1px"}}>{l}</div>
                </div>
              ))}
            </>:null}
            <div style={{display:"flex",alignItems:"center",gap:"5px",background:"rgba(34,197,94,.07)",border:"1px solid rgba(34,197,94,.15)",padding:"4px 10px",borderRadius:"3px"}}>
              <div style={{width:"5px",height:"5px",borderRadius:"50%",background:C.green,animation:"pulse 1s step-end infinite"}}/>
              <span style={{fontSize:"9px",color:C.green}}>{m.live}</span>
            </div>
            {isLoading&&<span style={{...S.pill(C.yellow),animation:"pulse 1s infinite"}}>âŸ³ TARAMA</span>}
            <button style={S.btn(false,C.accent)} onClick={fetchAll}>â†º YENÄ°LE</button>
          </div>
        </div>

        {/* â”€â”€ PROGRESS BAR â”€â”€ */}
        <div style={{height:"2px",background:"#040d18",position:"relative",overflow:"hidden",flexShrink:0}}>
          <div style={{position:"absolute",left:0,top:0,height:"100%",background:`linear-gradient(90deg,${C.accent2},${C.accent})`,transition:"width 1s linear",width:`${lastScan?(1-countdown/10)*100:0}%`}}/>
        </div>

        {/* â”€â”€ SOCIAL TICKER â”€â”€ */}
        <div style={{background:"#040c16",borderBottom:`1px solid #0a1e2e`,padding:"0 14px",display:"flex",gap:"0",overflowX:"auto",alignItems:"stretch",flexShrink:0}}>
          <span style={{color:C.red,fontSize:"8px",fontWeight:"bold",padding:"4px 10px 4px 0",whiteSpace:"nowrap",display:"flex",alignItems:"center",borderRight:`1px solid #0a1e2e`,marginRight:"10px"}}>ğŸ“¡ CANLI</span>
          {SOCIAL.map((n,i)=>(
            <a key={i} href={n.url} target="_blank" rel="noopener noreferrer"
              style={{whiteSpace:"nowrap",fontSize:"9px",padding:"3px 10px",color:n.hot?"#5a9ab8":C.muted,borderRight:`1px solid #07121c`,textDecoration:"none",display:"flex",alignItems:"center",gap:"4px"}}>
              <span>{n.icon}</span>
              <span style={{color:n.hot?C.yellow:C.muted,fontWeight:"bold"}}>[{n.src}]</span>
              <span>{n.msg}</span>
              {n.hot&&<span style={{color:C.red,fontSize:"7px",animation:"pulse 1.5s infinite"}}>ğŸ”¥</span>}
            </a>
          ))}
        </div>

        {/* â”€â”€ TABS â”€â”€ */}
        <div style={{display:"flex",background:"#030c16",borderBottom:`1px solid #091c2c`,padding:"0 14px",overflowX:"auto",flexShrink:0}}>
          {currentTabs.map(([k,l])=>(
            <div key={k} style={{padding:"7px 13px",cursor:"pointer",fontSize:"9px",letterSpacing:"1px",fontWeight:tab===k?"bold":"normal",
              borderBottom:tab===k?`2px solid ${m.color}`:"2px solid transparent",
              color:tab===k?m.color:C.muted,whiteSpace:"nowrap",transition:"all .15s"}}
              onClick={()=>setTab(k)}>{l}</div>
          ))}
        </div>

        {/* â”€â”€ CONTENT AREA â”€â”€ */}
        <div style={{flex:1,overflowY:"auto",minHeight:0}}>

          {/* â•â•â• WHALE WALLETS â•â•â• */}
          {tab==="whale_wallets"&&(
            <div>
              <div style={{display:"flex",gap:"6px",padding:"8px 14px",background:"#040d18",borderBottom:`1px solid #091c2c`,flexWrap:"wrap",alignItems:"center"}}>
                <span style={{color:C.muted,fontSize:"8px"}}>FÄ°LTRE:</span>
                {[["all","ğŸ‹ TÃ¼mÃ¼"],["buy","ğŸ’š AlÄ±mlar"],["sell","ğŸ”´ SatÄ±ÅŸlar"]].map(([k,l])=>(
                  <button key={k} style={S.btn(whaleFilter===k,C.accent)} onClick={()=>setWhaleFilter(k)}>{l}</button>
                ))}
                <span style={{color:C.muted,fontSize:"8px",marginLeft:"12px"}}>Platform baÄŸlantÄ±larÄ±:</span>
                {[["Nansen","https://nansen.ai","#ff6b35"],["Arkham","https://platform.arkhamintelligence.com","#00e5ff"],["GMGN","https://gmgn.ai","#00ff88"],["Bubblemaps","https://app.bubblemaps.io","#ff6b35"],["Lookonchain","https://lookonchain.com","#00e5ff"],["Whale Alert","https://whale-alert.io","#f3ba2f"]].map(([name,url,c])=>(
                  <a key={name} href={url} target="_blank" rel="noopener noreferrer" style={{...S.pill(c),textDecoration:"none"}}>{name}â†—</a>
                ))}
              </div>
              <div style={{padding:"10px 14px",maxHeight:"calc(100vh - 260px)",overflowY:"auto"}}>
                {whales.map((w)=>{
                  const isAl=w.action==="ALIM";
                  return(
                    <div key={w.id} style={S.whaleCard(w.action)}>
                      <div style={{display:"flex",gap:"10px",alignItems:"center",flexWrap:"wrap"}}>
                        <span style={{fontSize:"20px"}}>{isAl?"ğŸ‹":"âš ï¸"}</span>
                        <span style={{...S.pill(isAl?C.green:C.red),fontSize:"9px"}}>{w.action}</span>
                        <div>
                          <span style={{fontWeight:"bold",color:C.white,fontSize:"13px"}}>{w.token}</span>
                          <span style={{color:CHAIN_COL[w.chain]||"#888",fontSize:"8px",marginLeft:"6px",fontWeight:"bold"}}>{w.chain.toUpperCase()}</span>
                        </div>
                        <span style={{color:isAl?C.green:C.red,fontWeight:"bold",fontSize:"13px"}}>{fU(w.amount)}</span>
                        <span style={S.pill("#6090a8")}>{w.label}</span>
                        <span style={{color:C.muted,fontSize:"8px",marginLeft:"auto"}}>{w.age}dk Ã¶nce</span>
                      </div>
                      <div style={{margin:"6px 0 8px",fontSize:"9px",color:C.muted,display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"}}>
                        <span>ğŸ‘ CÃ¼zdan:</span>
                        <span style={{fontFamily:"monospace",color:"#4a8aaa"}}>{w.short}</span>
                        <a href={getWhaleExplorer(w)} target="_blank" rel="noopener noreferrer" style={{color:C.accent,fontSize:"8px",textDecoration:"none"}}>Explorer â†—</a>
                        <span style={{color:C.muted}}>| {w.exchange} Ã¼zerinde iÅŸlem</span>
                      </div>
                      <div style={{display:"flex",gap:"6px",flexWrap:"wrap",alignItems:"center"}}>
                        <span style={{color:C.muted,fontSize:"8px"}}>ğŸ”— Ä°ÅŸleme gir:</span>
                        <a href={getWhaleTrade(w)} target="_blank" rel="noopener noreferrer"
                          style={{background:isAl?C.green+"22":C.red+"22",border:`1px solid ${isAl?C.green:C.red}55`,
                            color:isAl?C.green:C.red,borderRadius:"3px",padding:"3px 10px",fontSize:"9px",fontWeight:"bold",textDecoration:"none"}}>
                          {isAl?"ğŸ›’ Åimdi AL â†’":"ğŸ“¤ Pozisyon Kapat â†’"}
                        </a>
                        {w.chain==="solana"&&<>
                          <a href={`https://jup.ag/swap/SOL-${w.sym}`} target="_blank" rel="noopener noreferrer" style={{...S.pill("#e8923a"),textDecoration:"none"}}>Jupiterâ†—</a>
                          <a href={`https://gmgn.ai/sol/token/${w.sym}`} target="_blank" rel="noopener noreferrer" style={{...S.pill(C.green),textDecoration:"none"}}>GMGNâ†—</a>
                        </>}
                        {(w.chain==="ethereum"||w.chain==="arbitrum")&&<>
                          <a href={`https://app.uniswap.org/swap?outputCurrency=${w.sym}`} target="_blank" rel="noopener noreferrer" style={{...S.pill("#ff007a"),textDecoration:"none"}}>Uniswapâ†—</a>
                        </>}
                        <a href={`https://www.bybit.com/trade/usdt/${w.sym}USDT`} target="_blank" rel="noopener noreferrer" style={{...S.pill("#f7a600"),textDecoration:"none"}}>Bybitâ†—</a>
                      </div>
                    </div>
                  );
                })}
                {/* Platform links box */}
                <div style={{background:C.bg2,border:`1px solid ${C.accent}22`,borderRadius:"6px",padding:"12px 14px",marginTop:"12px"}}>
                  <div style={{color:C.accent,fontWeight:"bold",fontSize:"9px",marginBottom:"8px",letterSpacing:"1px"}}>ğŸ”— GERÃ‡EK ZAMANLI BALÄ°NA TAKÄ°P PLATFORMLARI</div>
                  {[["Nansen.ai","AkÄ±llÄ± cÃ¼zdan etiketleme & cluster analizi","https://nansen.ai","#ff6b35"],
                    ["Arkham Intelligence","CÃ¼zdan takibi, borsa etiketleri, ÅŸÃ¼pheli iÅŸlemler","https://platform.arkhamintelligence.com","#00e5ff"],
                    ["GMGN.ai","Solana/ETH balina takibi, copy trading","https://gmgn.ai","#00ff88"],
                    ["Bubblemaps","Token holder gÃ¶rsel analizi","https://app.bubblemaps.io","#ff6b35"],
                    ["Lookonchain","On-chain bÃ¼yÃ¼k iÅŸlem takibi","https://lookonchain.com","#00e5ff"],
                    ["Whale Alert","$500K+ anlÄ±k transfer bildirimleri","https://whale-alert.io","#f3ba2f"],
                    ["DeBank","Cross-chain portfÃ¶y & cÃ¼zdan","https://debank.com","#627eea"],
                    ["Kryll X-Ray","Multi-chain akÄ±llÄ± para hareketleri","https://app.kryll.io/x-ray","#b026ff"],
                  ].map(([name,desc,url,c])=>(
                    <div key={name} style={{display:"flex",gap:"8px",alignItems:"center",marginBottom:"5px",paddingBottom:"5px",borderBottom:`1px solid #060f1c`}}>
                      <span style={{color:c,width:"140px",fontSize:"9px",fontWeight:"bold"}}>{name}</span>
                      <span style={{color:C.muted,fontSize:"9px",flex:1}}>{desc}</span>
                      <a href={url} target="_blank" rel="noopener noreferrer" style={{...S.pill(c),textDecoration:"none"}}>AÃ§ â†—</a>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          )}

          {/* â•â•â• TV CEX PAIRS â•â•â• */}
          {tab==="tv_pairs"&&(
            <div>
              <div style={{display:"flex",gap:"4px",padding:"7px 14px",background:"#040d18",borderBottom:`1px solid #091c2c`,flexWrap:"wrap",alignItems:"center"}}>
                {TV_FILTERS.map(([k,l])=>(
                  <button key={k} style={S.btn(tvFilter===k,C.accent)} onClick={()=>{setTvFilter(k);fetchTV(k);}}>{l}</button>
                ))}
              </div>
              <div style={S.scroll}>
                <table style={S.tbl}>
                  <thead><tr>{["#","SÄ°MGE","BORSA","FÄ°YAT","24S%","HACÄ°M","MC","RSI","SKORU","KARAR","BORSA LÄ°NKLERÄ°"].map(h=><th key={h} style={S.th}>{h}</th>)}</tr></thead>
                  <tbody>
                    {tvData.length===0&&<tr><td colSpan={11} style={{...S.td,textAlign:"center",padding:"40px",color:C.muted}}>{loading.tv?"âŸ³ TradingView yÃ¼kleniyor...":"Veri bulunamadÄ±"}</td></tr>}
                    {tvData.slice(0,100).map((t,i)=>{
                      const a=t._analysis;
                      return(
                        <tr key={t._id||i} onClick={()=>runAI(t,"TV")}>
                          <td style={S.td}><span style={{color:C.muted}}>{i+1}</span></td>
                          <td style={S.td}><div style={{fontWeight:"bold",color:C.white}}>{t.name?.split(":")[1]||t.name}</div><div style={{color:C.muted,fontSize:"8px"}}>{(t.description||"").slice(0,14)}</div></td>
                          <td style={S.td}><span style={{color:"#5a8aaa",fontSize:"8px"}}>{t.exchange||"â€”"}</span></td>
                          <td style={S.td}><span style={{color:C.white}}>{fP(t.close)}</span></td>
                          <td style={S.td}><span style={{color:pC(t.change),fontWeight:"bold"}}>{fC(t.change)}</span></td>
                          <td style={S.td}><span style={{color:"#6a9ab0"}}>{fU(t.volume)}</span></td>
                          <td style={S.td}><span style={{color:"#4a7a90"}}>{fU(t.market_cap_calc)}</span></td>
                          <td style={S.td}><span style={{color:(t.RSI||50)<30?C.green:(t.RSI||50)>70?C.red:C.text}}>{(t.RSI||0).toFixed(1)}</span></td>
                          <td style={S.td}><ScoreBadge score={a.score} level={a.level}/></td>
                          <td style={S.td}><LevelPill level={a.level}/></td>
                          <td style={S.td} onClick={e=>e.stopPropagation()}>
                            <div style={{display:"flex",gap:"3px",flexWrap:"wrap"}}>
                              {(t._links||[]).slice(0,4).map((l,j)=><ExLink key={j} link={l}/>)}
                              <button style={{...S.btn(false,C.accent),fontSize:"7px"}} onClick={e=>{e.stopPropagation();runAI(t,"TV");}}>AIâ–¸</button>
                            </div>
                          </td>
                        </tr>
                      );
                    })}
                  </tbody>
                </table>
              </div>
            </div>
          )}

          {/* â•â•â• TV COINS â•â•â• */}
          {tab==="tv_coins"&&(
            <div style={S.scroll}>
              <table style={S.tbl}>
                <thead><tr>{["#","COIN","FÄ°YAT","1S%","24S%","7G%","HACÄ°M","MC","ATH'DEN","SKORU","KARAR","BORSA LÄ°NKLERÄ°"].map(h=><th key={h} style={S.th}>{h}</th>)}</tr></thead>
                <tbody>
                  {coinData.length===0&&<tr><td colSpan={12} style={{...S.td,textAlign:"center",padding:"40px",color:C.muted}}>{loading.coin?"âŸ³ Coin verileri yÃ¼kleniyor...":"Veri bulunamadÄ±"}</td></tr>}
                  {coinData.slice(0,100).map((c,i)=>{
                    const a=c._analysis;
                    const fromAth=c.ath_usd&&c.price_usd?((c.price_usd/c.ath_usd-1)*100):null;
                    return(
                      <tr key={c._id||i} onClick={()=>runAI(c,"COIN")}>
                        <td style={S.td}><span style={{color:C.muted}}>{i+1}</span></td>
                        <td style={S.td}><div style={{fontWeight:"bold",color:C.white}}>{c.name}</div><div style={{color:C.muted,fontSize:"8px"}}>{(c.description||"").slice(0,14)}</div></td>
                        <td style={S.td}><span style={{color:C.white}}>{fP(c.price_usd)}</span></td>
                        <td style={S.td}><span style={{color:pC(c["1h_change_percentage"]),fontWeight:"bold"}}>{fC(c["1h_change_percentage"])}</span></td>
                        <td style={S.td}><span style={{color:pC(c["24h_change_percentage"])}}>{fC(c["24h_change_percentage"])}</span></td>
                        <td style={S.td}><span style={{color:pC(c["7d_change_percentage"])}}>{fC(c["7d_change_percentage"])}</span></td>
                        <td style={S.td}><span style={{color:"#6a9ab0"}}>{fU(c["24h_vol_usd"])}</span></td>
                        <td style={S.td}><span style={{color:"#4a7a90"}}>{fU(c.market_cap_usd)}</span></td>
                        <td style={S.td}>{fromAth!=null&&<span style={{color:fromAth>-20?C.orange:fromAth>-50?C.yellow:C.green,fontSize:"9px"}}>{fC(fromAth)}</span>}</td>
                        <td style={S.td}><ScoreBadge score={a.score} level={a.level}/></td>
                        <td style={S.td}><LevelPill level={a.level}/></td>
                        <td style={S.td} onClick={e=>e.stopPropagation()}>
                          <div style={{display:"flex",gap:"3px",flexWrap:"wrap"}}>
                            {(c._links||[]).slice(0,4).map((l,j)=><ExLink key={j} link={l}/>)}
                            <button style={{...S.btn(false,C.accent2),fontSize:"7px"}} onClick={e=>{e.stopPropagation();runAI(c,"COIN");}}>AIâ–¸</button>
                          </div>
                        </td>
                      </tr>
                    );
                  })}
                </tbody>
              </table>
            </div>
          )}

          {/* â•â•â• DEX TOKENS â•â•â• */}
          {tab==="dex"&&(
            <div style={S.scroll}>
              <table style={S.tbl}>
                <thead><tr>{["#","TOKEN","ZÄ°NCÄ°R","FÄ°YAT","1S%","24S%","LÄ°KÄ°DÄ°TE","HACÄ°M","ALIM/SAT","RUG","SKORU","KARAR","BORSA / DEX LÄ°NKLERÄ°"].map(h=><th key={h} style={S.th}>{h}</th>)}</tr></thead>
                <tbody>
                  {dexData.length===0&&<tr><td colSpan={13} style={{...S.td,textAlign:"center",padding:"40px",color:C.muted}}>âŸ³ DEX verileri yÃ¼kleniyor...</td></tr>}
                  {dexData.slice(0,100).map((p,i)=>{
                    const s=p._sig;
                    return(
                      <tr key={p.pairAddress} onClick={()=>runAI(p,"DEX")}>
                        <td style={S.td}><span style={{color:C.muted}}>{i+1}</span></td>
                        <td style={S.td}><div style={{fontWeight:"bold",color:C.white}}>{p.baseToken?.symbol}</div><div style={{color:C.muted,fontSize:"8px"}}>{(p.baseToken?.name||"").slice(0,14)}</div></td>
                        <td style={S.td}><span style={{color:CHAIN_COL[p.chainId]||"#888",fontSize:"8px",fontWeight:"bold"}}>{p.chainId?.toUpperCase()?.slice(0,7)}</span></td>
                        <td style={S.td}><span style={{color:C.white}}>{fP(p.priceUsd)}</span></td>
                        <td style={S.td}><span style={{color:pC(p.priceChange?.h1),fontWeight:"bold"}}>{fC(p.priceChange?.h1)}</span></td>
                        <td style={S.td}><span style={{color:pC(p.priceChange?.h24)}}>{fC(p.priceChange?.h24)}</span></td>
                        <td style={S.td}><span style={{color:"#6a9ab0"}}>{fU(p.liquidity?.usd)}</span></td>
                        <td style={S.td}><span style={{color:"#4a7a90"}}>{fU(p.volume?.h24)}</span></td>
                        <td style={S.td}><span style={{color:C.green,fontSize:"9px"}}>{p.txns?.h1?.buys||0}</span><span style={{color:C.muted}}>/</span><span style={{color:C.red,fontSize:"9px"}}>{p.txns?.h1?.sells||0}</span></td>
                        <td style={S.td}><span style={{color:p._rug<30?C.green:p._rug<60?C.yellow:C.red,fontSize:"9px",fontWeight:"bold"}}>{p._rug}</span></td>
                        <td style={S.td}>{s&&<ScoreBadge score={s.score} level={s.level}/>}</td>
                        <td style={S.td}><LevelPill level={s?.level}/></td>
                        <td style={S.td} onClick={e=>e.stopPropagation()}>
                          <div style={{display:"flex",gap:"3px",flexWrap:"wrap"}}>
                            {(p._links||[]).slice(0,5).map((l,j)=><ExLink key={j} link={l}/>)}
                            <button style={{...S.btn(false,C.orange),fontSize:"7px"}} onClick={e=>{e.stopPropagation();runAI(p,"DEX");}}>AIâ–¸</button>
                          </div>
                        </td>
                      </tr>
                    );
                  })}
                </tbody>
              </table>
            </div>
          )}

          {/* â•â•â• ALERTS â•â•â• */}
          {tab==="alerts"&&(
            <div style={{padding:"10px 14px",maxHeight:"calc(100vh-210px)",overflowY:"auto"}}>
              {alerts.length===0&&<div style={{textAlign:"center",color:C.muted,padding:"60px"}}>âŸ³ UyarÄ± bekleniyor...</div>}
              {alerts.map(a=>{
                const col=a.level==="GÃœÃ‡LÃœ AL"?C.green:"#7fff00";
                return(
                  <div key={a.id} style={{background:C.bg2,border:`1px solid ${col}25`,borderRadius:"6px",padding:"9px 12px",marginBottom:"6px"}}>
                    <div style={{display:"flex",gap:"8px",alignItems:"center",marginBottom:"4px",flexWrap:"wrap"}}>
                      <LevelPill level={a.level}/>
                      <span style={{fontWeight:"bold",color:C.white}}>{a.name}</span>
                      {a.desc&&<span style={{color:C.muted,fontSize:"9px"}}>{a.desc.slice(0,20)}</span>}
                      <span style={S.pill("#6090a8")}>{a.src}</span>
                      {a.exchange&&<span style={{color:"#5a7a90",fontSize:"8px"}}>{a.exchange}</span>}
                      {a.chain&&<span style={{color:CHAIN_COL[a.chain]||"#888",fontSize:"8px",fontWeight:"bold"}}>{a.chain.toUpperCase()}</span>}
                      <span style={{color:col,fontSize:"9px",fontWeight:"bold"}}>GÃ¼Ã§:{a.score}</span>
                      <span style={{color:C.muted,fontSize:"8px",marginLeft:"auto"}}>{a.ts.toLocaleTimeString("tr-TR")}</span>
                      <button style={{...S.btn(true,C.accent),fontSize:"8px"}} onClick={()=>runAI(a.raw,a.src)}>ğŸ¤– AI</button>
                    </div>
                    <div style={{display:"flex",gap:"8px",fontSize:"9px",marginBottom:"6px"}}>
                      <span>Fiyat: <span style={{color:C.white}}>{fP(a.price)}</span></span>
                      <span>DeÄŸiÅŸim: <span style={{color:pC(a.change)}}>{fC(a.change)}</span></span>
                      <span>Hacim: <span style={{color:"#6a9ab0"}}>{fU(a.vol)}</span></span>
                    </div>
                    <div style={{display:"flex",gap:"4px",flexWrap:"wrap",marginBottom:"6px"}}>
                      {(a.signals||[]).slice(0,4).map((s,i)=>(
                        <span key={i} style={{background:"#091c2c",border:"1px solid #0d2a3e",borderRadius:"3px",padding:"1px 6px",fontSize:"8px",color:"#6aa0b8"}}>{s}</span>
                      ))}
                    </div>
                    {a.links&&a.links.length>0&&(
                      <div style={{display:"flex",gap:"4px",flexWrap:"wrap",alignItems:"center"}}>
                        <span style={{color:C.muted,fontSize:"8px"}}>ğŸ”—</span>
                        {a.links.map((l,i)=><ExLink key={i} link={l}/>)}
                      </div>
                    )}
                  </div>
                );
              })}
            </div>
          )}

          {/* â•â•â• SOCIAL & HABERLER â•â•â• */}
          {tab==="social"&&(
            <div style={{padding:"12px 14px",maxHeight:"calc(100vh - 210px)",overflowY:"auto"}}>
              <div style={{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"}}>
                <div>
                  <div style={{color:C.accent,fontWeight:"bold",fontSize:"9px",marginBottom:"8px",letterSpacing:"1px"}}>ğŸ“¡ SOSYAL SÄ°NYALLER</div>
                  {SOCIAL.map((n,i)=>(
                    <a key={i} href={n.url} target="_blank" rel="noopener noreferrer"
                      style={{display:"flex",gap:"8px",padding:"7px 0",borderBottom:`1px solid #07121c`,textDecoration:"none",alignItems:"center"}}>
                      <span style={{fontSize:"14px"}}>{n.icon}</span>
                      <div style={{flex:1}}>
                        <div style={{fontSize:"8px",color:n.hot?C.yellow:C.muted,fontWeight:"bold"}}>[{n.src}]</div>
                        <div style={{color:n.hot?"#c0dff0":C.muted,fontSize:"10px"}}>{n.msg}</div>
                      </div>
                      <div style={{display:"flex",gap:"4px",alignItems:"center"}}>
                        {n.hot&&<span style={{color:C.red,fontSize:"8px",animation:"pulse 1.5s infinite"}}>ğŸ”¥</span>}
                        <span style={{color:C.accent,fontSize:"8px"}}>â†—</span>
                      </div>
                    </a>
                  ))}
                </div>
                <div>
                  <div style={{color:C.green,fontWeight:"bold",fontSize:"9px",marginBottom:"8px",letterSpacing:"1px"}}>ğŸ“° HABERLER</div>
                  {[
                    {t:"Bitcoin kurumsal alÄ±mlarÄ± Ocak rekoru kÄ±rdÄ±",src:"Bloomberg",impact:"YÃœKSELÄ°Å",c:C.green,url:"https://bloomberg.com"},
                    {t:"SEC ETH staking onayÄ±nÄ± deÄŸerlendiriyor",src:"Reuters",impact:"OLUMLU",c:C.green,url:"https://reuters.com"},
                    {t:"Solana yeni TPS rekoru: 65,000",src:"Solana Labs",impact:"YÃœKSELÄ°Å",c:C.green,url:"https://solana.com"},
                    {t:"FED enflasyon beklentinin altÄ±nda",src:"FRED",impact:"OLUMLU",c:C.green,url:"https://fred.stlouisfed.org"},
                    {t:"Coinbase Base, 10M kullanÄ±cÄ±ya ulaÅŸtÄ±",src:"Coinbase",impact:"OLUMLU",c:C.green,url:"https://base.org"},
                    {t:"Tether USDT arzÄ±nÄ± 5B$ artÄ±rdÄ±",src:"Tether",impact:"Ä°ZLE",c:C.yellow,url:"https://tether.to"},
                    {t:"Kripto vergi dÃ¼zenlemesi AB'de onaylandÄ±",src:"EU Parliament",impact:"DÄ°KKAT",c:C.red,url:"https://europarl.europa.eu"},
                    {t:"Binance Futures yeni token ekledi",src:"Binance",impact:"NÃ–TR",c:C.yellow,url:"https://www.binance.com"},
                    {t:"ECB faiz kararÄ± beklenenden erken",src:"Reuters",impact:"DÄ°KKAT",c:C.orange,url:"https://reuters.com"},
                    {t:"BIST 100 yeni tarihi zirvede",src:"Borsa Ä°stanbul",impact:"OLUMLU",c:C.green,url:"https://borsaistanbul.com"},
                  ].map((n,i)=>(
                    <a key={i} href={n.url} target="_blank" rel="noopener noreferrer"
                      style={{display:"flex",gap:"8px",padding:"7px 0",borderBottom:`1px solid #07121c`,textDecoration:"none",alignItems:"center"}}>
                      <div style={{flex:1}}>
                        <div style={{fontSize:"10px",color:"#b0cce0"}}>{n.t}</div>
                        <div style={{fontSize:"8px",color:C.muted}}>ğŸ“° {n.src}</div>
                      </div>
                      <span style={{...S.pill(n.c),fontSize:"7px"}}>{n.impact}</span>
                    </a>
                  ))}
                </div>
              </div>
            </div>
          )}

          {/* â•â•â• FOREX PAIRS â•â•â• */}
          {tab==="forex_pairs"&&(
            <div style={S.scroll}>
              <table style={S.tbl}>
                <thead><tr>{["PARÄ°TE","FÄ°YAT","DEÄÄ°ÅÄ°M","SÄ°NYAL","AI ANALÄ°Z"].map(h=><th key={h} style={S.th}>{h}</th>)}</tr></thead>
                <tbody>
                  {forexPrices.map((p,i)=>(
                    <tr key={p.sym} onClick={()=>runAI(p,"FOREX")}>
                      <td style={S.td}><span style={{fontWeight:"bold",color:C.white}}>{p.sym}</span></td>
                      <td style={S.td}><span style={{color:C.white,fontFamily:"monospace"}}>{p.price.toFixed(p.price>100?2:5)}</span></td>
                      <td style={S.td}><span style={{color:pC(p.chg),fontWeight:"bold"}}>{fC(p.chg)}</span></td>
                      <td style={S.td}><span style={{...S.pill(p.sig==="AL"?C.green:p.sig==="SAT"?C.red:C.yellow)}}>{p.sig}</span></td>
                      <td style={S.td}><button style={{...S.btn(false,"#f59e0b"),fontSize:"7px"}} onClick={e=>{e.stopPropagation();runAI(p,"FOREX");}}>ğŸ¤– AIâ–¸</button></td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          )}

          {/* â•â•â• FOREX SESSIONS â•â•â• */}
          {tab==="forex_sessions"&&(
            <div style={{padding:"14px"}}>
              <div style={{color:"#f59e0b",fontWeight:"bold",fontSize:"9px",marginBottom:"12px",letterSpacing:"1px"}}>ğŸ• SEANS DURUMU â€” UTC {clock}</div>
              {[{name:"ğŸŒ Tokyo",range:"00:00â€“09:00",open:new Date().getUTCHours()>=0&&new Date().getUTCHours()<9,vol:"DÃ¼ÅŸÃ¼k",pairs:["USD/JPY","AUD/USD","NZD/USD"]},
                {name:"ğŸ‡¬ğŸ‡§ London",range:"08:00â€“17:00",open:new Date().getUTCHours()>=8&&new Date().getUTCHours()<17,vol:"YÃ¼ksek",pairs:["EUR/USD","GBP/USD","EUR/GBP"]},
                {name:"ğŸ‡ºğŸ‡¸ New York",range:"13:00â€“22:00",open:new Date().getUTCHours()>=13&&new Date().getUTCHours()<22,vol:"Ã‡ok YÃ¼ksek",pairs:["EUR/USD","USD/JPY","GBP/USD"]},
                {name:"ğŸŒ™ Sydney",range:"22:00â€“07:00",open:new Date().getUTCHours()>=22||new Date().getUTCHours()<7,vol:"DÃ¼ÅŸÃ¼k",pairs:["AUD/USD","NZD/USD","AUD/JPY"]},
              ].map(s=>(
                <div key={s.name} style={{background:s.open?"#041810":"#0a0c14",border:`1px solid ${s.open?C.green:C.dim}22`,borderRadius:"6px",padding:"12px 16px",marginBottom:"8px"}}>
                  <div style={{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"}}>
                    <span style={{fontSize:"16px"}}>{s.name}</span>
                    <span style={{fontFamily:"monospace",fontSize:"9px",color:C.muted}}>{s.range} UTC</span>
                    <span style={{...S.pill(s.open?C.green:C.muted)}}>{s.open?"AÃ‡IK":"KAPALI"}</span>
                    <span style={{marginLeft:"auto",fontSize:"9px",color:s.open?C.yellow:C.muted}}>Volatilite: {s.vol}</span>
                  </div>
                  <div style={{display:"flex",gap:"6px"}}>
                    {s.pairs.map(p=><span key={p} style={{...S.pill(s.open?C.accent:C.muted)}}>{p}</span>)}
                  </div>
                </div>
              ))}
            </div>
          )}

          {/* â•â•â• FOREX ECONOMIC CALENDAR â•â•â• */}
          {tab==="forex_cal"&&(
            <div style={{padding:"14px"}}>
              <div style={{color:"#f59e0b",fontWeight:"bold",fontSize:"9px",marginBottom:"12px",letterSpacing:"1px"}}>ğŸ“… EKONOMÄ°K TAKVÄ°M â€” BUGÃœN</div>
              <table style={S.tbl}>
                <thead><tr>{["SAAT","BAYRAK","ETKÄ°NLÄ°K","Ã–NEM","TAHMÄ°N"].map(h=><th key={h} style={S.th}>{h}</th>)}</tr></thead>
                <tbody>
                  {ECO_CAL.map((e,i)=>(
                    <tr key={i}>
                      <td style={S.td}><span style={{fontFamily:"monospace",color:C.white}}>{e.time}</span></td>
                      <td style={S.td}><span style={{fontSize:"16px"}}>{e.flag}</span></td>
                      <td style={S.td}><span style={{color:C.white}}>{e.event}</span></td>
                      <td style={S.td}><span style={{...S.pill(e.impact==="YÃœK"?C.red:e.impact==="ORT"?C.yellow:C.muted)}}>{e.impact}</span></td>
                      <td style={S.td}><span style={{fontFamily:"monospace",color:C.text}}>{e.forecast}</span></td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          )}

          {/* â•â•â• STOCK TABLE â•â•â• */}
          {tab==="stock_table"&&(
            <div style={S.scroll}>
              <table style={S.tbl}>
                <thead><tr>{["HÄ°SSE","BORSA","FÄ°YAT","DEÄÄ°ÅÄ°M","HACÄ°M","SÄ°NYAL","AI"].map(h=><th key={h} style={S.th}>{h}</th>)}</tr></thead>
                <tbody>
                  {[{sym:"NVDA",ex:"NASDAQ",price:"$875.40",chg:"+3.2%",vol:"$8.4B",sig:"AL"},
                    {sym:"AAPL",ex:"NASDAQ",price:"$191.20",chg:"+0.8%",vol:"$3.1B",sig:"AL"},
                    {sym:"TSLA",ex:"NASDAQ",price:"$248.60",chg:"-1.4%",vol:"$5.2B",sig:"Ä°ZLE"},
                    {sym:"MSFT",ex:"NASDAQ",price:"$412.80",chg:"+1.1%",vol:"$2.8B",sig:"AL"},
                    {sym:"META",ex:"NASDAQ",price:"$484.10",chg:"+2.3%",vol:"$4.1B",sig:"AL"},
                    {sym:"AMZN",ex:"NASDAQ",price:"$186.40",chg:"+0.9%",vol:"$2.9B",sig:"AL"},
                    {sym:"GOOGL",ex:"NASDAQ",price:"$162.30",chg:"+0.4%",vol:"$1.8B",sig:"Ä°ZLE"},
                    {sym:"BIST.100",ex:"BIST",price:"9,240",chg:"-0.18%",vol:"â‚º42B",sig:"Ä°ZLE"},
                    {sym:"THYAO",ex:"BIST",price:"â‚º284.40",chg:"+1.2%",vol:"â‚º1.8B",sig:"AL"},
                    {sym:"SASA",ex:"BIST",price:"â‚º46.80",chg:"-0.8%",vol:"â‚º980M",sig:"Ä°ZLE"},
                  ].map((s,i)=>(
                    <tr key={i}>
                      <td style={S.td}><span style={{fontWeight:"bold",color:C.white}}>{s.sym}</span></td>
                      <td style={S.td}><span style={{background:"#3b82f618",border:"1px solid #3b82f644",color:"#3b82f6",borderRadius:"3px",padding:"1px 7px",fontSize:"8px"}}>{s.ex}</span></td>
                      <td style={S.td}><span style={{color:C.white}}>{s.price}</span></td>
                      <td style={S.td}><span style={{color:s.chg.startsWith("-")?C.red:C.green,fontWeight:"bold"}}>{s.chg}</span></td>
                      <td style={S.td}><span style={{color:"#6a9ab0"}}>{s.vol}</span></td>
                      <td style={S.td}><span style={{...S.pill(s.sig==="AL"?C.green:s.sig==="SAT"?C.red:C.yellow)}}>{s.sig}</span></td>
                      <td style={S.td}><button style={{...S.btn(false,"#3b82f6"),fontSize:"7px"}}>ğŸ¤– AIâ–¸</button></td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          )}

          {/* â•â•â• INDICES â•â•â• */}
          {tab==="indices"&&(
            <div style={{padding:"14px"}}>
              <table style={S.tbl}>
                <thead><tr>{["ENDEKs","DEÄER","DEÄÄ°ÅÄ°M","DURUM"].map(h=><th key={h} style={S.th}>{h}</th>)}</tr></thead>
                <tbody>
                  {INDICES.map((idx,i)=>(
                    <tr key={i}>
                      <td style={S.td}><span style={{fontWeight:"bold",color:C.white}}>{idx.name}</span></td>
                      <td style={S.td}><span style={{fontFamily:"monospace",color:C.white}}>{idx.val}</span></td>
                      <td style={S.td}><span style={{color:idx.up?C.green:C.red,fontWeight:"bold"}}>{idx.chg}</span></td>
                      <td style={S.td}><span style={{...S.pill(idx.open?C.green:C.muted)}}>{idx.open?"AÃ‡IK":"KAPALI"}</span></td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          )}

          {/* â•â•â• ETF TABLE â•â•â• */}
          {tab==="etf_table"&&(
            <div style={S.scroll}>
              <table style={S.tbl}>
                <thead><tr>{["ETF","KATEGORÄ°","FÄ°YAT","DEÄÄ°ÅÄ°M","AUM","SÄ°NYAL"].map(h=><th key={h} style={S.th}>{h}</th>)}</tr></thead>
                <tbody>
                  {[{sym:"SPY",cat:"Hisse/ABD",price:"$524.18",chg:"+0.42%",aum:"$510B",sig:"AL"},
                    {sym:"QQQ",cat:"Teknoloji",price:"$442.80",chg:"+0.61%",aum:"$238B",sig:"AL"},
                    {sym:"IBIT",cat:"Bitcoin ETF",price:"$42.16",chg:"+2.14%",aum:"$18.4B",sig:"AL"},
                    {sym:"GLD",cat:"AltÄ±n",price:"$218.40",chg:"+0.92%",aum:"$58B",sig:"AL"},
                    {sym:"TLT",cat:"Tahvil/ABD",price:"$92.14",chg:"-0.34%",aum:"$42B",sig:"Ä°ZLE"},
                    {sym:"EEM",cat:"GeliÅŸen Piy.",price:"$41.28",chg:"-0.18%",aum:"$18B",sig:"Ä°ZLE"},
                    {sym:"VNQ",cat:"Gayrimenkul",price:"$84.60",chg:"-0.94%",aum:"$28B",sig:"SAT"},
                    {sym:"ARKK",cat:"Ä°novasyon",price:"$48.20",chg:"+1.84%",aum:"$6.8B",sig:"Ä°ZLE"},
                  ].map((e,i)=>(
                    <tr key={i}>
                      <td style={S.td}><span style={{fontWeight:"bold",color:C.white}}>{e.sym}</span></td>
                      <td style={S.td}><span style={{...S.pill("#8b5cf6")}}>{e.cat}</span></td>
                      <td style={S.td}><span style={{color:C.white}}>{e.price}</span></td>
                      <td style={S.td}><span style={{color:e.chg.startsWith("-")?C.red:C.green,fontWeight:"bold"}}>{e.chg}</span></td>
                      <td style={S.td}><span style={{color:"#4a7a90"}}>{e.aum}</span></td>
                      <td style={S.td}><span style={{...S.pill(e.sig==="AL"?C.green:e.sig==="SAT"?C.red:C.yellow)}}>{e.sig}</span></td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          )}

          {/* â•â•â• BTC ETF â•â•â• */}
          {tab==="btcetf"&&(
            <div style={{padding:"14px"}}>
              <div style={{color:"#8b5cf6",fontWeight:"bold",fontSize:"9px",marginBottom:"12px",letterSpacing:"1px"}}>â‚¿ BITCOIN ETF â€” GÃœNLÃœK NET AKIÅLAR</div>
              <table style={S.tbl}>
                <thead><tr>{["ETF","FONU","AUM","GÃœNLÃœK AKIÅ","TOPLAM AKIÅ","DURUM"].map(h=><th key={h} style={S.th}>{h}</th>)}</tr></thead>
                <tbody>
                  {[{sym:"IBIT",fund:"BlackRock",aum:"$18.4B",daily:"+$842M",total:"+$14.2B",ok:true},
                    {sym:"FBTC",fund:"Fidelity",aum:"$9.8B",daily:"+$612M",total:"+$8.4B",ok:true},
                    {sym:"BITB",fund:"Bitwise",aum:"$2.1B",daily:"+$124M",total:"+$1.8B",ok:true},
                    {sym:"ARKB",fund:"Ark Invest",aum:"$3.4B",daily:"-$214M",total:"+$2.9B",ok:false},
                    {sym:"GBTC",fund:"Grayscale",aum:"$24.1B",daily:"-$480M",total:"-$18.4B",ok:false},
                  ].map((e,i)=>(
                    <tr key={i}>
                      <td style={S.td}><span style={{fontWeight:"bold",color:C.white}}>{e.sym}</span></td>
                      <td style={S.td}><span style={{color:C.text}}>{e.fund}</span></td>
                      <td style={S.td}><span style={{color:"#4a7a90"}}>{e.aum}</span></td>
                      <td style={S.td}><span style={{color:e.ok?C.green:C.red,fontWeight:"bold"}}>{e.daily}</span></td>
                      <td style={S.td}><span style={{color:e.ok?C.green:C.red}}>{e.total}</span></td>
                      <td style={S.td}><span style={{...S.pill(e.ok?C.green:C.red)}}>{e.ok?"GÄ°RÄ°Å":"Ã‡IKIÅ"}</span></td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          )}

          {/* â•â•â• YIELD CURVE â•â•â• */}
          {tab==="yield_curve"&&(
            <div style={{padding:"14px"}}>
              <div style={{color:"#f59e0b",fontWeight:"bold",fontSize:"9px",marginBottom:"12px",letterSpacing:"1px"}}>ğŸ“ˆ ABD HAZÄ°NE GETÄ°RÄ° EÄRÄ°SÄ°</div>
              <table style={S.tbl}>
                <thead><tr>{["VADESÄ°","GETÄ°RÄ°","DEÄÄ°ÅÄ°M","DURUM"].map(h=><th key={h} style={S.th}>{h}</th>)}</tr></thead>
                <tbody>
                  {[{m:"1 AylÄ±k",y:"5.32%",c:"+0.01%"},
                    {m:"3 AylÄ±k",y:"5.28%",c:"+0.02%"},
                    {m:"6 AylÄ±k",y:"5.18%",c:"+0.01%"},
                    {m:"1 YÄ±llÄ±k",y:"4.92%",c:"-0.02%"},
                    {m:"2 YÄ±llÄ±k",y:"4.64%",c:"-0.04%"},
                    {m:"5 YÄ±llÄ±k",y:"4.44%",c:"-0.03%"},
                    {m:"10 YÄ±llÄ±k",y:"4.72%",c:"+0.04%"},
                    {m:"20 YÄ±llÄ±k",y:"4.98%",c:"+0.02%"},
                    {m:"30 YÄ±llÄ±k",y:"4.82%",c:"+0.01%"},
                  ].map((r,i)=>(
                    <tr key={i}>
                      <td style={S.td}><span style={{color:C.white}}>{r.m}</span></td>
                      <td style={S.td}><span style={{color:"#f59e0b",fontWeight:"bold",fontFamily:"monospace"}}>{r.y}</span></td>
                      <td style={S.td}><span style={{color:r.c.startsWith("-")?C.red:C.green}}>{r.c}</span></td>
                      <td style={S.td}>
                        <div style={{width:"80px",height:"4px",background:"#091c2c",borderRadius:"2px",overflow:"hidden"}}>
                          <div style={{height:"100%",width:((parseFloat(r.y)/5.4)*100)+"%",background:"#f59e0b",borderRadius:"2px"}}/>
                        </div>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          )}

          {/* â•â•â• GLOBAL BONDS â•â•â• */}
          {tab==="bond_global"&&(
            <div style={S.scroll}>
              <table style={S.tbl}>
                <thead><tr>{["ÃœLKE","10Y GETÄ°RÄ°","DEÄÄ°ÅÄ°M","RATING","SÄ°NYAL"].map(h=><th key={h} style={S.th}>{h}</th>)}</tr></thead>
                <tbody>
                  {[{c:"ğŸ‡ºğŸ‡¸ ABD",y:"4.72%",ch:"+0.04%",r:"AAA",sig:"Ä°ZLE"},
                    {c:"ğŸ‡©ğŸ‡ª Almanya",y:"2.41%",ch:"+0.02%",r:"AAA",sig:"AL"},
                    {c:"ğŸ‡¬ğŸ‡§ Ä°ngiltere",y:"4.18%",ch:"+0.06%",r:"AA",sig:"Ä°ZLE"},
                    {c:"ğŸ‡¯ğŸ‡µ Japonya",y:"0.94%",ch:"+0.01%",r:"A",sig:"AL"},
                    {c:"ğŸ‡¹ğŸ‡· TÃ¼rkiye",y:"28.4%",ch:"-0.40%",r:"BB-",sig:"Ä°ZLE"},
                    {c:"ğŸ‡¨ğŸ‡³ Ã‡in",y:"2.28%",ch:"+0.03%",r:"A+",sig:"AL"},
                    {c:"ğŸ‡§ğŸ‡· Brezilya",y:"11.24%",ch:"+0.12%",r:"BB",sig:"Ä°ZLE"},
                    {c:"ğŸ‡®ğŸ‡³ Hindistan",y:"6.84%",ch:"-0.06%",r:"BBB-",sig:"AL"},
                  ].map((b,i)=>(
                    <tr key={i}>
                      <td style={S.td}><span style={{color:C.white}}>{b.c}</span></td>
                      <td style={S.td}><span style={{color:"#f59e0b",fontWeight:"bold",fontFamily:"monospace"}}>{b.y}</span></td>
                      <td style={S.td}><span style={{color:b.ch.startsWith("-")?C.red:C.green}}>{b.ch}</span></td>
                      <td style={S.td}><span style={{...S.pill("#f59e0b")}}>{b.r}</span></td>
                      <td style={S.td}><span style={{...S.pill(b.sig==="AL"?C.green:C.yellow)}}>{b.sig}</span></td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          )}

          {/* â•â•â• CORPORATE BONDS â•â•â• */}
          {tab==="corp_bonds"&&(
            <div style={S.scroll}>
              <table style={S.tbl}>
                <thead><tr>{["Ä°HRAÃ‡CI","VADE","KUPON","YTM","SPREAD","SÄ°NYAL"].map(h=><th key={h} style={S.th}>{h}</th>)}</tr></thead>
                <tbody>
                  {[{i:"Apple Inc",m:"2030",c:"3.45%",y:"4.12%",s:"40bp",sig:"AL"},
                    {i:"Microsoft",m:"2033",c:"3.70%",y:"4.28%",s:"56bp",sig:"AL"},
                    {i:"Tesla",m:"2028",c:"5.30%",y:"5.82%",s:"110bp",sig:"Ä°ZLE"},
                    {i:"JPMorgan",m:"2031",c:"3.90%",y:"4.41%",s:"69bp",sig:"AL"},
                    {i:"Ford Motor",m:"2026",c:"7.45%",y:"7.92%",s:"220bp",sig:"SAT"},
                    {i:"Amazon",m:"2029",c:"3.15%",y:"4.08%",s:"36bp",sig:"AL"},
                  ].map((b,i)=>(
                    <tr key={i}>
                      <td style={S.td}><span style={{fontWeight:"bold",color:C.white}}>{b.i}</span></td>
                      <td style={S.td}><span style={{fontFamily:"monospace",color:C.text}}>{b.m}</span></td>
                      <td style={S.td}><span style={{color:C.text}}>{b.c}</span></td>
                      <td style={S.td}><span style={{color:"#f59e0b",fontWeight:"bold"}}>{b.y}</span></td>
                      <td style={S.td}><span style={{color:"#6a9ab0"}}>{b.s}</span></td>
                      <td style={S.td}><span style={{...S.pill(b.sig==="AL"?C.green:b.sig==="SAT"?C.red:C.yellow)}}>{b.sig}</span></td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          )}

          {/* â•â•â• AI ANALÄ°Z â•â•â• */}
          {tab==="ai"&&(
            <div style={{padding:"12px 14px"}}>
              {!selected&&<div style={{textAlign:"center",color:C.muted,padding:"60px 20px"}}>
                Herhangi bir sekmeden varlÄ±k seÃ§in â†’ AI analizi otomatik baÅŸlar<br/>
                <span style={{fontSize:"9px"}}>Kripto, Forex, Hisse, ETF, Tahvil â€” tÃ¼m piyasalar destekleniyor</span>
              </div>}
              {selected&&(
                <>
                  <div style={{display:"flex",gap:"10px",alignItems:"center",marginBottom:"10px",flexWrap:"wrap"}}>
                    <div style={{fontSize:"18px",fontWeight:"bold",color:C.accent}}>
                      {selected._displaySrc==="DEX"?selected.baseToken?.symbol:selected._displaySrc==="FOREX"?selected.sym:selected.name}
                    </div>
                    <span style={S.pill(selected._displaySrc==="TV"?C.accent:selected._displaySrc==="COIN"?C.accent2:selected._displaySrc==="FOREX"?"#f59e0b":C.orange)}>{selected._displaySrc}</span>
                    {selected._links&&<div style={{display:"flex",gap:"4px",flexWrap:"wrap"}}>{selected._links.map((l,i)=><ExLink key={i} link={l}/>)}</div>}
                    <button style={{...S.btn(true,C.accent),marginLeft:"auto"}} onClick={()=>runAI(selected,selected._displaySrc)}>
                      {aiLoading?"âŸ³ ANALÄ°Z...":"ğŸ¤– Yeniden Analiz"}
                    </button>
                  </div>
                  {aiLoading&&<div style={S.aiBox}><span style={{color:C.accent,animation:"pulse 1s infinite"}}>âŸ³ </span><span style={{color:C.muted}}>Claude AI analiz ediyor...</span></div>}
                  {!aiLoading&&aiText&&(
                    <div style={S.aiBox}>
                      <div style={{color:C.green,fontWeight:"bold",marginBottom:"10px",fontSize:"10px",letterSpacing:"1px"}}>
                        ğŸ¤– CLAUDE AI â€” {selected._displaySrc==="DEX"?selected.baseToken?.symbol:selected._displaySrc==="FOREX"?selected.sym:selected.name}
                      </div>
                      {aiText}
                    </div>
                  )}
                </>
              )}
            </div>
          )}

        </div>{/* /content */}

        {/* â”€â”€ FOOTER â”€â”€ */}
        <div style={{borderTop:`1px solid #060f1c`,padding:"4px 14px",display:"flex",gap:"12px",fontSize:"7px",color:"#0d2a3e",flexWrap:"wrap",flexShrink:0}}>
          <span style={{color:"#1a4060"}}>Kaynak: TradingView Scanner + DexScreener API + Balina Takip</span>
          <span style={{color:"#1a4060"}}>AI: Claude Sonnet 4.6</span>
          <span style={{color:"#1a4060"}}>Forex: 4 Seans Takibi</span>
          <span style={{color:C.red,opacity:.6}}>âš ï¸ YatÄ±rÄ±m tavsiyesi deÄŸildir. DYOR.</span>
          {lastScan&&<span style={{marginLeft:"auto",color:"#1a4060"}}>Son tarama: {lastScan.toLocaleTimeString("tr-TR")}</span>}
        </div>

      </div>{/* /main */}
    </div>
  );
}

const root=ReactDOM.createRoot(document.getElementById("root"));
root.render(<ProPtrex/>);
</script>
</body>
</html>
