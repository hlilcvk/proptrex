<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PROPTREX â€” Exchange Hub</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Oxanium:wght@400;600;700;800&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html,body,#root{height:100%;overflow:hidden}
body{background:#03060b;color:#c0d8ee;font-family:'JetBrains Mono',monospace;font-size:11px}
::-webkit-scrollbar{width:4px;height:4px}::-webkit-scrollbar-track{background:#03060b}::-webkit-scrollbar-thumb{background:#12203a;border-radius:2px}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}
@keyframes fadeIn{from{opacity:0;transform:translateY(4px)}to{opacity:1;transform:translateY(0)}}
.fade-in{animation:fadeIn .3s ease both}
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel" data-presets="react">
const {useState,useEffect,useRef,useCallback,useMemo}=React;
const C={cyan:"#00e5ff",green:"#00ff88",red:"#ff2d55",yellow:"#fbbf24",orange:"#ff8c00",purple:"#a855f7",white:"#eaf2ff",txt:"#c0d8ee",txt2:"#6a94b8",muted:"#2e5a7a"};
const fP=n=>{if(!n||isNaN(n))return"â€”";const v=Math.abs(n);if(v<1e-5)return"$"+n.toExponential(2);if(v<.01)return"$"+n.toFixed(6);if(v<1)return"$"+n.toFixed(4);if(v<1e3)return"$"+n.toFixed(2);return"$"+n.toLocaleString("tr-TR",{maximumFractionDigits:2})};
const fU=n=>{if(!n)return"â€”";const v=Math.abs(n);if(v>=1e12)return"$"+(n/1e12).toFixed(2)+"T";if(v>=1e9)return"$"+(n/1e9).toFixed(2)+"B";if(v>=1e6)return"$"+(n/1e6).toFixed(1)+"M";if(v>=1e3)return"$"+(n/1e3).toFixed(0)+"K";return"$"+n.toFixed(0)};
const fC=n=>n==null||isNaN(n)?"â€”":(n>0?"+":"")+Number(n).toFixed(2)+"%";
const pC=n=>(n??0)>0?C.green:(n??0)<0?C.red:C.muted;

const EX={
  binance:{id:"binance",n:"Binance",c:"#f3ba2f",l:s=>`https://www.binance.com/tr/trade/${s}_USDT`},
  bybit:{id:"bybit",n:"Bybit",c:"#f7a600",l:s=>`https://www.bybit.com/trade/usdt/${s}USDT`},
  okx:{id:"okx",n:"OKX",c:"#fff",l:s=>`https://www.okx.com/trade-spot/${s.toLowerCase()}-usdt`},
  gateio:{id:"gateio",n:"Gate.io",c:"#2354e6",l:s=>`https://www.gate.io/trade/${s}_USDT`},
  mexc:{id:"mexc",n:"MEXC",c:"#2a85ff",l:s=>`https://www.mexc.com/tr-TR/exchange/${s}_USDT`},
  bitget:{id:"bitget",n:"Bitget",c:"#00f0ff",l:s=>`https://www.bitget.com/spot/${s}USDT`},
};
const EXL=Object.values(EX);

// â•â•â• REAL API FETCHERS â•â•â•
const api=async(url,opt)=>{try{const r=await fetch(url,opt);if(!r.ok)throw r.status;return r.json()}catch(e){console.warn(url.slice(0,40),e);return null}};

async function fetchBinanceSpot(){
  const d=await api("https://api.binance.com/api/v3/ticker/24hr");
  return(d||[]).filter(t=>t.symbol.endsWith("USDT")&&+t.quoteVolume>50000).map(t=>({sym:t.symbol.replace("USDT",""),ex:"binance",type:"SPOT",price:+t.lastPrice,ch:+t.priceChangePercent,vol:+t.quoteVolume,hi:+t.highPrice,lo:+t.lowPrice,trades:+t.count}))
}
async function fetchBinanceFut(){
  const d=await api("https://fapi.binance.com/fapi/v1/ticker/24hr");
  return(d||[]).filter(t=>t.symbol.endsWith("USDT")&&+t.quoteVolume>100000).map(t=>({sym:t.symbol.replace("USDT",""),ex:"binance",type:"FUTURES",price:+t.lastPrice,ch:+t.priceChangePercent,vol:+t.quoteVolume,hi:+t.highPrice,lo:+t.lowPrice}))
}
async function fetchFunding(){
  const d=await api("https://fapi.binance.com/fapi/v1/premiumIndex");
  const m={};(d||[]).filter(t=>t.symbol.endsWith("USDT")).forEach(t=>m[t.symbol.replace("USDT","")]={fr:+t.lastFundingRate*100,mp:+t.markPrice});return m
}
async function fetchBybit(){
  const d=await api("https://api.bybit.com/v5/market/tickers?category=spot");
  return(d?.result?.list||[]).filter(t=>t.symbol.endsWith("USDT")&&+t.turnover24h>50000).map(t=>({sym:t.symbol.replace("USDT",""),ex:"bybit",type:"SPOT",price:+t.lastPrice,ch:+t.price24hPcnt*100,vol:+t.turnover24h,hi:+t.highPrice24h,lo:+t.lowPrice24h}))
}
async function fetchOKX(){
  const d=await api("https://www.okx.com/api/v5/market/tickers?instType=SPOT");
  return(d?.data||[]).filter(t=>t.instId.endsWith("-USDT")&&+t.volCcy24h>50000).map(t=>({sym:t.instId.replace("-USDT",""),ex:"okx",type:"SPOT",price:+t.last,ch:((+t.last-+t.open24h)/+t.open24h)*100,vol:+t.volCcy24h,hi:+t.high24h,lo:+t.low24h}))
}
async function fetchGate(){
  const d=await api("https://api.gateio.ws/api/v4/spot/tickers");
  return(d||[]).filter(t=>t.currency_pair.endsWith("_USDT")&&+t.quote_volume>50000).map(t=>({sym:t.currency_pair.replace("_USDT",""),ex:"gateio",type:"SPOT",price:+t.last,ch:+t.change_percentage,vol:+t.quote_volume,hi:+t.high_24h,lo:+t.low_24h}))
}
async function fetchMEXC(){
  const d=await api("https://api.mexc.com/api/v3/ticker/24hr");
  return(d||[]).filter(t=>t.symbol.endsWith("USDT")&&+t.quoteVolume>50000).map(t=>({sym:t.symbol.replace("USDT",""),ex:"mexc",type:"SPOT",price:+t.lastPrice,ch:+t.priceChangePercent,vol:+t.quoteVolume,hi:+t.highPrice,lo:+t.lowPrice}))
}
async function fetchCG(){
  return await api("https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=250&page=1&sparkline=false&price_change_percentage=1h,24h,7d")
}
async function fetchFG(){const d=await api("https://api.alternative.me/fng/?limit=1");return d?.data?.[0]||null}
async function fetchDL(){return await api("https://api.llama.fi/v2/chains")}
async function fetchDS(){return await api("https://api.dexscreener.com/token-boosts/top/v1")}
async function fetchTV(f="volume"){
  const filters={volume:[{left:"volume",operation:"greater",right:500000}],gainers:[{left:"change",operation:"greater",right:5},{left:"volume",operation:"greater",right:100000}],oversold:[{left:"RSI",operation:"less",right:35},{left:"volume",operation:"greater",right:100000}],dip:[{left:"change",operation:"less",right:-5},{left:"RSI",operation:"in_range",right:[25,45]}],whale:[{left:"volume",operation:"greater",right:5e6}]};
  const d=await api("https://scanner.tradingview.com/crypto/scan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filter:filters[f]||filters.volume,options:{lang:"tr"},markets:["crypto"],symbols:{query:{types:[]},tickers:[]},columns:["name","description","close","change","change_abs","volume","market_cap_calc","Recommend.All","RSI","RSI[1]","MACD.macd","MACD.signal","EMA20","EMA50","EMA200","Volatility.D","average_volume_10d_calc","exchange"],sort:{sortBy:"volume",sortOrder:"desc"},range:[0,200]})});
  const cols=["name","desc","close","change","chAbs","vol","mcap","rec","rsi","rsi1","macdM","macdS","ema20","ema50","ema200","volD","avgVol","exchange"];
  return(d?.data||[]).map(i=>{const o={_id:i.s};(i.d||[]).forEach((v,j)=>o[cols[j]]=v);return o})
}

function calcScore(t){
  let s=0;const sig=[];const risk=[];
  const rsi=t.rsi??50,ch=t.ch??0,rec=t.rec??0,vol=t.vol??0,avg=t.avgVol??1,p=t.price??0;
  const vr=avg>0?vol/avg:0;
  if(vr>5){s+=30;sig.push("ğŸš€ Hacim x"+vr.toFixed(1))}else if(vr>2){s+=15;sig.push("ğŸ“ˆ Hacim x"+vr.toFixed(1))}
  if(rsi<30){s+=25;sig.push("âš¡ RSI:"+rsi.toFixed(0))}else if(rsi<40){s+=12;sig.push("ğŸ“‰ RSI:"+rsi.toFixed(0))}else if(rsi>70){risk.push("âš ï¸ RSI:"+rsi.toFixed(0));s-=10}
  if(t.ema20&&t.ema50&&p>t.ema20&&t.ema20>t.ema50){s+=15;sig.push("ğŸŸ¢ EMAâ†‘")}
  if(rec>0.5){s+=20;sig.push("ğŸ“Š TV AL")}else if(rec<-0.3){risk.push("ğŸ“Š TV SAT");s-=10}
  if(ch>5&&ch<25){s+=10;sig.push("â¬†ï¸+"+ch.toFixed(1)+"%")}
  if(ch<-5&&rsi<40){s+=20;sig.push("ğŸ¯ Dip")}
  if(t.fr!=null&&t.fr<-0.01){s+=10;sig.push("ğŸ’° Fund:"+t.fr.toFixed(3)+"%")}
  s=Math.max(0,Math.min(s,100));
  const lv=s>=70?"GÃœÃ‡LÃœ AL":s>=45?"AL":s>=25?"Ä°ZLE":"BEKLE";
  return{score:s,level:lv,sig,risk}
}

const Badge=({id})=>{const e=EX[id];if(!e)return null;return<span style={{fontSize:"7px",padding:"1px 5px",background:e.c+"18",border:"1px solid "+e.c+"44",color:e.c,borderRadius:"3px",fontWeight:"bold"}}>{e.n}</span>};
const SBar=({s,l})=>{const c=l==="GÃœÃ‡LÃœ AL"?C.green:l==="AL"?"#7fff00":l==="Ä°ZLE"?C.yellow:C.muted;return<span style={{display:"inline-flex",alignItems:"center",gap:"3px"}}><span style={{width:"40px",height:"4px",background:"#091c2c",borderRadius:"2px",overflow:"hidden",display:"inline-block"}}><span style={{display:"block",height:"100%",width:s+"%",background:c,borderRadius:"2px"}}/></span><span style={{color:c,fontSize:"8px",fontWeight:"bold"}}>{s}</span></span>};
const LPill=({l})=>{const m={"GÃœÃ‡LÃœ AL":C.green,"AL":"#7fff00","Ä°ZLE":C.yellow,"BEKLE":C.muted};const c=m[l]||C.muted;return<span style={{background:c+"18",border:"1px solid "+c+"44",color:c,borderRadius:"3px",padding:"1px 6px",fontSize:"8px",fontWeight:"bold"}}>{l||"â€”"}</span>};
const TPill=({t})=>{const c=t==="SPOT"?C.cyan:C.purple;return<span style={{background:c+"15",border:"1px solid "+c+"33",color:c,borderRadius:"2px",padding:"0 5px",fontSize:"7px",fontWeight:"bold"}}>{t}</span>};

function App(){
  const[view,setView]=useState("spot");
  const[raw,setRaw]=useState({bs:[],bf:[],by:[],ok:[],ga:[],mx:[],tv:[],fund:{}});
  const[cg,setCg]=useState([]);
  const[fg,setFg]=useState(null);
  const[chains,setChains]=useState([]);
  const[dex,setDex]=useState([]);
  const[busy,setBusy]=useState(false);
  const[search,setSearch]=useState("");
  const[sortC,setSortC]=useState("vol");
  const[sortD,setSortD]=useState("desc");
  const[exF,setExF]=useState(new Set(EXL.map(e=>e.id)));
  const[sigF,setSigF]=useState("ALL");
  const[tvF,setTvF]=useState("volume");
  const[last,setLast]=useState(null);
  const[clk,setClk]=useState("");
  const[sel,setSel]=useState(null);
  const[st,setSt]=useState({});
  const[alerts,setAlerts]=useState([]);
  const seen=useRef(new Set());

  useEffect(()=>{const t=setInterval(()=>setClk(new Date().toUTCString().match(/(\d\d:\d\d:\d\d)/)?.[1]||""),1000);return()=>clearInterval(t)},[]);

  const load=useCallback(async()=>{
    setBusy(true);const s={};
    const r=await Promise.allSettled([
      fetchBinanceSpot().then(d=>{s.BinSpot=d.length;return["bs",d]}),
      fetchBinanceFut().then(d=>{s.BinFut=d.length;return["bf",d]}),
      fetchFunding().then(d=>{s.Fund=Object.keys(d).length;return["fund",d]}),
      fetchBybit().then(d=>{s.Bybit=d.length;return["by",d]}),
      fetchOKX().then(d=>{s.OKX=d.length;return["ok",d]}),
      fetchGate().then(d=>{s.Gate=d.length;return["ga",d]}),
      fetchMEXC().then(d=>{s.MEXC=d.length;return["mx",d]}),
      fetchTV(tvF).then(d=>{s.TV=d.length;return["tv",d]}),
    ]);
    const n={bs:[],bf:[],by:[],ok:[],ga:[],mx:[],tv:[],fund:{}};
    r.forEach(x=>{if(x.status==="fulfilled"){const[k,v]=x.value;n[k]=v}});
    setRaw(n);setSt(s);setLast(new Date());setBusy(false);
  },[tvF]);

  const loadExtra=useCallback(async()=>{
    const[a,b,c,d]=await Promise.allSettled([fetchCG(),fetchFG(),fetchDL(),fetchDS()]);
    if(a.status==="fulfilled"&&a.value)setCg(a.value);
    if(b.status==="fulfilled")setFg(b.value);
    if(c.status==="fulfilled"&&c.value)setChains(c.value.sort((a,b)=>(b.tvl||0)-(a.tvl||0)).slice(0,25));
    if(d.status==="fulfilled"&&Array.isArray(d.value))setDex(d.value.slice(0,25));
  },[]);

  useEffect(()=>{load();loadExtra();const t=setInterval(load,15000);const t2=setInterval(loadExtra,60000);return()=>{clearInterval(t);clearInterval(t2)}},[load,loadExtra]);

  const merged=useMemo(()=>{
    const all=[];const fm=raw.fund||{};
    const cgm={};(cg||[]).forEach(c=>cgm[c.symbol?.toUpperCase()]=c);

    (raw.tv||[]).forEach(t=>{
      const sym=(t.name||"").split(":").pop()?.replace(/USDT|USD/g,"")||"";
      const exS=(t.exchange||t.name?.split(":")?.[0]||"").toUpperCase();
      let eid="binance";if(exS.includes("BYBIT"))eid="bybit";else if(exS.includes("OKX"))eid="okx";else if(exS.includes("GATE"))eid="gateio";else if(exS.includes("MEXC"))eid="mexc";
      const g=cgm[sym.toUpperCase()];const f=fm[sym];
      const o={sym,ex:eid,type:t.name?.includes("PERP")?"FUTURES":"SPOT",price:t.close,ch:t.change,vol:t.vol,mcap:t.mcap||(g?.market_cap),rsi:t.rsi,ema20:t.ema20,ema50:t.ema50,rec:t.rec,avgVol:t.avgVol,fr:f?.fr,desc:t.desc||(g?.name),src:"TV",_id:"tv_"+t._id,img:g?.image,rank:g?.market_cap_rank,ch1h:g?.price_change_percentage_1h_in_currency,ch7d:g?.price_change_percentage_7d_in_currency};
      o._a=calcScore(o);all.push(o);
    });

    const addCex=arr=>arr.forEach(t=>{
      const k=t.sym+"_"+t.ex+"_"+t.type;if(all.find(a=>a._id===k))return;
      const g=cgm[t.sym.toUpperCase()];const f=fm[t.sym];
      const o={...t,mcap:g?.market_cap,desc:g?.name,fr:f?.fr,img:g?.image,rank:g?.market_cap_rank,ch1h:g?.price_change_percentage_1h_in_currency,ch7d:g?.price_change_percentage_7d_in_currency,_id:k,rsi:null,ema20:null,ema50:null,rec:null,avgVol:null,src:"CEX"};
      o._a=calcScore(o);all.push(o);
    });
    addCex(raw.bs);addCex(raw.bf);addCex(raw.by);addCex(raw.ok);addCex(raw.ga);addCex(raw.mx);

    all.filter(t=>t._a.level==="GÃœÃ‡LÃœ AL").forEach(t=>{
      const k=t._id+"_"+Math.floor(Date.now()/180000);
      if(!seen.current.has(k)){seen.current.add(k);setAlerts(p=>[{id:k,ts:new Date(),...t},...p].slice(0,80))}
    });
    return all;
  },[raw,cg]);

  const filtered=useMemo(()=>{
    let d=[...merged];
    if(view==="spot")d=d.filter(t=>t.type==="SPOT");else if(view==="futures")d=d.filter(t=>t.type==="FUTURES");
    if(exF.size<EXL.length)d=d.filter(t=>exF.has(t.ex));
    if(sigF!=="ALL")d=d.filter(t=>t._a.level===sigF);
    if(search){const s=search.toUpperCase();d=d.filter(t=>(t.sym||"").toUpperCase().includes(s)||(t.desc||"").toUpperCase().includes(s))}
    const m=new Map();d.forEach(t=>{const k=t.sym+"_"+t.type;if(!m.has(k)||t.src==="TV")m.set(k,t)});d=Array.from(m.values());
    d.sort((a,b)=>{let va,vb;switch(sortC){case"sym":return sortD==="asc"?(a.sym||"").localeCompare(b.sym):(b.sym||"").localeCompare(a.sym);case"price":va=a.price||0;vb=b.price||0;break;case"ch":va=a.ch||0;vb=b.ch||0;break;case"vol":va=a.vol||0;vb=b.vol||0;break;case"mcap":va=a.mcap||0;vb=b.mcap||0;break;case"rsi":va=a.rsi||50;vb=b.rsi||50;break;case"score":va=a._a.score;vb=b._a.score;break;case"fr":va=Math.abs(a.fr||0);vb=Math.abs(b.fr||0);break;default:va=a.vol||0;vb=b.vol||0}return sortD==="asc"?va-vb:vb-va});
    return d;
  },[merged,view,exF,sigF,search,sortC,sortD]);

  const sC=merged.filter(t=>t.type==="SPOT").length,fC2=merged.filter(t=>t.type==="FUTURES").length;
  const hs=c=>{if(sortC===c)setSortD(d=>d==="asc"?"desc":"asc");else{setSortC(c);setSortD("desc")}};
  const si=c=>sortC===c?(sortD==="asc"?"â†‘":"â†“"):"";

  const th={padding:"5px 8px",textAlign:"left",fontSize:"7px",fontWeight:700,color:C.txt2,letterSpacing:"1px",textTransform:"uppercase",borderBottom:"1px solid #12203a",position:"sticky",top:0,background:"#050a14",cursor:"pointer",userSelect:"none",whiteSpace:"nowrap"};
  const td={padding:"4px 8px",borderBottom:"1px solid #080e1a",fontSize:"10px",whiteSpace:"nowrap"};

  return<div style={{display:"flex",flexDirection:"column",height:"100vh",position:"relative",zIndex:1}}>
    {/* HEADER */}
    <div style={{display:"flex",alignItems:"center",gap:"10px",padding:"0 14px",height:"44px",background:"rgba(3,6,11,.95)",borderBottom:"1px solid #12203a",flexShrink:0}}>
      <a href="/" style={{display:"flex",alignItems:"center",gap:"7px",textDecoration:"none"}}>
        <div style={{width:"26px",height:"26px",background:"linear-gradient(135deg,#00e5ff,#a855f7)",clipPath:"polygon(50% 0%,100% 25%,100% 75%,50% 100%,0% 75%,0% 25%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",fontWeight:800,color:"#000",fontFamily:"Oxanium"}}>PX</div>
        <span style={{fontFamily:"Oxanium",fontSize:"14px",fontWeight:800,color:C.white,letterSpacing:"2px"}}>PROP<span style={{color:C.cyan}}>TREX</span></span>
      </a>
      <span style={{fontSize:"8px",color:C.muted,letterSpacing:"1px"}}>EXCHANGE HUB</span>
      {fg&&<div style={{background:"#060c16",border:"1px solid #12203a",borderRadius:"5px",padding:"4px 10px",display:"flex",alignItems:"center",gap:"6px"}}>
        <span style={{fontSize:"7px",color:C.txt2}}>F&G</span>
        <span style={{fontSize:"16px",fontWeight:800,color:+fg.value<=25?C.red:+fg.value<=50?C.orange:+fg.value<=75?C.yellow:C.green,fontFamily:"Oxanium"}}>{fg.value}</span>
        <span style={{fontSize:"7px",color:C.txt2}}>{fg.value_classification}</span>
      </div>}
      <div style={{marginLeft:"auto",display:"flex",alignItems:"center",gap:"10px"}}>
        {busy&&<span style={{color:C.cyan,fontSize:"9px",animation:"pulse 1s infinite"}}>âŸ³</span>}
        <span style={{fontSize:"8px",color:C.txt2}}>UTC {clk}</span>
        <a href="/platform" style={{fontSize:"8px",color:C.cyan,textDecoration:"none",fontWeight:700}}>âš¡ Platform</a>
      </div>
    </div>

    {/* TABS */}
    <div style={{display:"flex",gap:"1px",padding:"0 14px",background:"#050a14",borderBottom:"1px solid #12203a",flexShrink:0}}>
      {[["spot","SPOT",sC,C.cyan],["futures","FUTURES",fC2,C.purple],["all","HEPSÄ°",merged.length,C.green],["defi","DEFÄ°",chains.length,C.orange],["alerts","ALERTS",alerts.length,C.red]].map(([k,l,n,c])=>
        <span key={k} style={{padding:"7px 14px",fontSize:"9px",fontWeight:700,fontFamily:"Oxanium",color:view===k?C.cyan:C.txt2,background:view===k?"#0a1422":"transparent",borderBottom:view===k?"2px solid "+C.cyan:"2px solid transparent",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"}} onClick={()=>setView(k)}>
          <span style={{color:c}}>â—</span>{l}<span style={{fontSize:"7px",color:C.muted}}>({n})</span>
        </span>)}
    </div>

    {/* API STATUS */}
    <div style={{display:"flex",gap:"6px",padding:"5px 14px",background:"#050a14",borderBottom:"1px solid #0a1422",fontSize:"7px",flexWrap:"wrap",alignItems:"center",flexShrink:0}}>
      {Object.entries(st).map(([k,v])=><span key={k} style={{background:(v>0?C.green:C.red)+"15",border:"1px solid "+(v>0?C.green:C.red)+"33",color:v>0?C.green:C.red,padding:"1px 6px",borderRadius:"3px",fontWeight:700}}>{v>0?"âœ“":"âœ—"} {k}:{v||0}</span>)}
      {last&&<span style={{marginLeft:"auto",color:C.muted}}>Son: {last.toLocaleTimeString("tr-TR")}</span>}
    </div>

    {/* SEARCH + FILTERS */}
    <div style={{display:"flex",gap:"5px",padding:"5px 14px",background:"#050a14",borderBottom:"1px solid #0a1422",alignItems:"center",flexShrink:0,flexWrap:"wrap"}}>
      <span style={{color:C.muted}}>ğŸ”</span>
      <input style={{flex:1,maxWidth:"240px",background:"#080e1a",border:"1px solid #1a2e4a",color:C.txt,borderRadius:"4px",padding:"4px 8px",fontSize:"10px",fontFamily:"inherit",outline:"none"}} placeholder="Coin ara..." value={search} onChange={e=>setSearch(e.target.value)}/>
      {[["ALL","Hepsi"],["GÃœÃ‡LÃœ AL","ğŸŸ¢"],["AL","ğŸŸ¡"],["Ä°ZLE","âš¡"]].map(([v,l])=>
        <span key={v} style={{padding:"2px 7px",fontSize:"8px",fontWeight:700,background:sigF===v?C.cyan+"18":"transparent",border:"1px solid "+(sigF===v?C.cyan+"66":"#12203a"),color:sigF===v?C.cyan:C.txt2,borderRadius:"3px",cursor:"pointer"}} onClick={()=>setSigF(v)}>{l}</span>)}
      <span style={{width:"1px",height:"14px",background:"#12203a"}}/>
      {[["volume","ğŸ“Š"],["gainers","ğŸ“ˆ"],["oversold","âš¡"],["dip","ğŸ¯"],["whale","ğŸ‹"]].map(([v,i])=>
        <span key={v} style={{padding:"2px 5px",fontSize:"8px",background:tvF===v?C.yellow+"18":"transparent",border:"1px solid "+(tvF===v?C.yellow+"66":"#12203a"),color:tvF===v?C.yellow:C.muted,borderRadius:"3px",cursor:"pointer"}} onClick={()=>setTvF(v)} title={v}>{i}</span>)}
      <span style={{width:"1px",height:"14px",background:"#12203a"}}/>
      {EXL.map(e=>{const a=exF.has(e.id);return<span key={e.id} style={{padding:"2px 5px",fontSize:"7px",fontWeight:700,background:a?e.c+"18":"transparent",border:"1px solid "+(a?e.c+"55":"#0a1422"),color:a?e.c:C.muted,borderRadius:"3px",cursor:"pointer"}} onClick={()=>{const s=new Set(exF);s.has(e.id)?s.delete(e.id):s.add(e.id);setExF(s)}}>{e.n}</span>})}
    </div>

    {/* CONTENT */}
    {view!=="defi"&&view!=="alerts"?<div style={{flex:1,overflow:"auto"}}>
      <table style={{width:"100%",borderCollapse:"collapse"}}><thead><tr>
        <th style={{...th,width:"28px"}}>#</th>
        <th style={th} onClick={()=>hs("sym")}>SEMBOL {si("sym")}</th>
        <th style={th}>TÄ°P</th><th style={th}>BORSA</th>
        <th style={th} onClick={()=>hs("price")}>FÄ°YAT {si("price")}</th>
        <th style={th} onClick={()=>hs("ch")}>24s% {si("ch")}</th>
        <th style={th} onClick={()=>hs("vol")}>HACÄ°M {si("vol")}</th>
        <th style={th} onClick={()=>hs("mcap")}>MCAP {si("mcap")}</th>
        <th style={th} onClick={()=>hs("rsi")}>RSI {si("rsi")}</th>
        <th style={th} onClick={()=>hs("fr")}>FUND {si("fr")}</th>
        <th style={th} onClick={()=>hs("score")}>DIP SCORE {si("score")}</th>
        <th style={th}>SÄ°NYAL</th><th style={th}>Ä°ÅLEM</th>
      </tr></thead><tbody>
        {filtered.length===0&&<tr><td colSpan={13} style={{...td,textAlign:"center",color:C.muted,padding:"40px"}}>{busy?"âŸ³ API'lerden veri Ã§ekiliyor...":"Veri bulunamadÄ±"}</td></tr>}
        {filtered.slice(0,500).map((d,i)=>{const ex=EX[d.ex];const s=sel===d._id;
          return<tr key={d._id} style={{background:s?"#0a1a2e":"transparent",cursor:"pointer"}} onClick={()=>setSel(s?null:d._id)}
            onMouseEnter={e=>e.currentTarget.style.background="#0a1422"} onMouseLeave={e=>e.currentTarget.style.background=s?"#0a1a2e":"transparent"}>
            <td style={{...td,color:C.muted,fontSize:"8px"}}>{i+1}</td>
            <td style={td}><div style={{display:"flex",alignItems:"center",gap:"4px"}}>
              {d.img&&<img src={d.img} width="14" height="14" style={{borderRadius:"50%"}}/>}
              <span style={{fontWeight:700,color:C.white}}>{d.sym}</span>
              {d.desc&&<span style={{fontSize:"8px",color:C.muted}}>{(d.desc||"").slice(0,16)}</span>}
              {d.rank&&<span style={{fontSize:"7px",color:C.muted}}>#{d.rank}</span>}
            </div></td>
            <td style={td}><TPill t={d.type}/></td>
            <td style={td}><Badge id={d.ex}/></td>
            <td style={{...td,fontWeight:700,color:C.white}}>{fP(d.price)}</td>
            <td style={{...td,fontWeight:700,color:pC(d.ch)}}>{fC(d.ch)}</td>
            <td style={{...td,color:C.txt2}}>{fU(d.vol)}</td>
            <td style={{...td,color:C.txt2,fontSize:"9px"}}>{fU(d.mcap)}</td>
            <td style={td}>{d.rsi!=null?<span style={{fontWeight:700,color:d.rsi<30?C.green:d.rsi>70?C.red:C.txt2}}>{d.rsi.toFixed(0)}</span>:<span style={{color:C.muted}}>â€”</span>}</td>
            <td style={td}>{d.fr!=null?<span style={{fontWeight:700,color:d.fr<0?C.green:d.fr>0.03?C.red:C.txt2}}>{d.fr.toFixed(3)}%</span>:<span style={{color:C.muted}}>â€”</span>}</td>
            <td style={td}><SBar s={d._a.score} l={d._a.level}/></td>
            <td style={td}><LPill l={d._a.level}/></td>
            <td style={td}>{ex&&<a href={ex.l(d.sym)} target="_blank" rel="noopener noreferrer" style={{background:C.cyan+"12",border:"1px solid "+C.cyan+"33",color:C.cyan,borderRadius:"3px",padding:"2px 6px",fontSize:"8px",fontWeight:700,textDecoration:"none"}} onClick={e=>e.stopPropagation()}>Ä°ÅŸlem â†—</a>}</td>
          </tr>})}
      </tbody></table>
    </div>:view==="defi"?<div style={{flex:1,overflow:"auto",padding:"12px 14px"}}>
      <div style={{background:"#060c16",border:"1px solid #12203a",borderRadius:"6px",padding:"10px",marginBottom:"12px"}}>
        <div style={{fontSize:"8px",color:C.txt2,letterSpacing:"1px",marginBottom:"6px"}}>ğŸ”— ZÄ°NCÄ°R TVL â€” DefiLlama API</div>
        {chains.slice(0,15).map((ch,i)=>{const mx=chains[0]?.tvl||1;return<div key={ch.name} style={{display:"flex",alignItems:"center",gap:"6px",marginBottom:"3px"}}>
          <span style={{fontSize:"8px",color:C.txt2,width:"16px"}}>{i+1}</span>
          <span style={{fontSize:"9px",color:C.white,width:"70px",fontWeight:700}}>{ch.name}</span>
          <div style={{flex:1,height:"8px",background:"#091c2c",borderRadius:"2px",overflow:"hidden"}}><div style={{width:(ch.tvl/mx*100)+"%",height:"100%",background:"linear-gradient(90deg,#00e5ff,#a855f7)",borderRadius:"2px"}}/></div>
          <span style={{fontSize:"8px",color:C.cyan,minWidth:"60px",textAlign:"right"}}>{fU(ch.tvl)}</span>
        </div>})}
      </div>
      <div style={{background:"#060c16",border:"1px solid #12203a",borderRadius:"6px",padding:"10px"}}>
        <div style={{fontSize:"8px",color:C.txt2,letterSpacing:"1px",marginBottom:"6px"}}>ğŸ”¥ TREND â€” DexScreener API</div>
        <div style={{display:"flex",gap:"6px",flexWrap:"wrap"}}>{dex.map((t,i)=><div key={i} style={{background:"#080e1a",border:"1px solid #12203a",borderRadius:"5px",padding:"5px 8px",fontSize:"8px",minWidth:"110px"}}>
          <div style={{fontWeight:700,color:C.white}}>{t.tokenAddress?.slice(0,6)}â€¦</div>
          <div style={{color:C.txt2,fontSize:"7px"}}>{t.chainId} Â· boost:{t.amount}</div>
          {t.url&&<a href={t.url} target="_blank" rel="noopener noreferrer" style={{color:C.cyan,fontSize:"7px",textDecoration:"none"}}>â†—</a>}
        </div>)}</div>
      </div>
    </div>:<div style={{flex:1,overflow:"auto",padding:"12px 14px"}}>
      <div style={{fontSize:"11px",fontWeight:700,color:C.cyan,marginBottom:"8px",fontFamily:"Oxanium"}}>ğŸš¨ ALERTS ({alerts.length})</div>
      {alerts.map(a=><div key={a.id} className="fade-in" style={{background:"#080e1a",border:"1px solid #1a2e4a",borderRadius:"5px",padding:"7px 10px",marginBottom:"3px",display:"flex",gap:"8px",alignItems:"center"}}>
        <span style={{fontSize:"14px"}}>ğŸš€</span>
        <div style={{flex:1}}><div style={{display:"flex",gap:"5px",alignItems:"center"}}><span style={{fontWeight:800,color:C.white}}>{a.sym}</span><Badge id={a.ex}/><LPill l={a._a?.level}/><SBar s={a._a?.score} l={a._a?.level}/></div>
          <div style={{fontSize:"8px",color:C.txt2,display:"flex",gap:"5px",flexWrap:"wrap"}}><span>{fP(a.price)}</span><span style={{color:pC(a.ch)}}>{fC(a.ch)}</span>{a._a?.sig?.map((s,i)=><span key={i} style={{color:C.green}}>{s}</span>)}</div>
        </div><span style={{fontSize:"7px",color:C.muted}}>{a.ts?.toLocaleTimeString("tr-TR")}</span>
      </div>)}
    </div>}

    {/* DETAIL BAR */}
    {sel&&view!=="defi"&&view!=="alerts"&&(()=>{const d=filtered.find(x=>x._id===sel);if(!d)return null;const ex=EX[d.ex];
      return<div style={{borderTop:"1px solid #1a2e4a",background:"#060c16",padding:"6px 14px",flexShrink:0,display:"flex",gap:"10px",alignItems:"center",flexWrap:"wrap",fontSize:"10px"}}>
        <span style={{fontWeight:800,color:C.white,fontSize:"13px"}}>{d.sym}</span><TPill t={d.type}/><Badge id={d.ex}/>
        <span style={{color:C.white,fontWeight:700}}>{fP(d.price)}</span><span style={{color:pC(d.ch),fontWeight:700}}>{fC(d.ch)}</span>
        {d.ch1h!=null&&<span style={{color:pC(d.ch1h),fontSize:"8px"}}>1s:{fC(d.ch1h)}</span>}
        {d.ch7d!=null&&<span style={{color:pC(d.ch7d),fontSize:"8px"}}>7g:{fC(d.ch7d)}</span>}
        {d.rsi!=null&&<span style={{color:C.txt2}}>RSI:<span style={{fontWeight:700,color:d.rsi<30?C.green:d.rsi>70?C.red:C.txt}}>{d.rsi.toFixed(1)}</span></span>}
        {d.fr!=null&&<span style={{color:C.txt2}}>Fund:<span style={{fontWeight:700,color:d.fr<0?C.green:C.txt}}>{d.fr.toFixed(4)}%</span></span>}
        <LPill l={d._a.level}/>
        <div style={{display:"flex",gap:"3px",flexWrap:"wrap"}}>{d._a.sig?.map((s,i)=><span key={i} style={{fontSize:"7px",color:C.green,background:C.green+"12",borderRadius:"3px",padding:"1px 4px"}}>{s}</span>)}{d._a.risk?.map((s,i)=><span key={i} style={{fontSize:"7px",color:C.red,background:C.red+"12",borderRadius:"3px",padding:"1px 4px"}}>{s}</span>)}</div>
        <div style={{display:"flex",gap:"3px",marginLeft:"auto"}}>
          {ex&&<a href={ex.l(d.sym)} target="_blank" rel="noopener noreferrer" style={{background:ex.c+"18",border:"1px solid "+ex.c+"44",color:ex.c,borderRadius:"3px",padding:"2px 6px",fontSize:"8px",fontWeight:700,textDecoration:"none"}}>{ex.n} â†—</a>}
          <a href={"https://tr.tradingview.com/chart/?symbol=BINANCE:"+d.sym+"USDT"} target="_blank" rel="noopener noreferrer" style={{background:"#1e88e518",border:"1px solid #1e88e544",color:"#1e88e5",borderRadius:"3px",padding:"2px 6px",fontSize:"8px",fontWeight:700,textDecoration:"none"}}>TV â†—</a>
        </div>
      </div>})()}

    {/* FOOTER */}
    <div style={{borderTop:"1px solid #080e1a",padding:"3px 14px",display:"flex",gap:"8px",fontSize:"7px",color:"#1a4060",flexWrap:"wrap",flexShrink:0,background:"#030610"}}>
      <span>API: Binance Spot+Futures+Funding Â· Bybit Â· OKX Â· Gate.io Â· MEXC Â· CoinGecko Â· DefiLlama Â· DexScreener Â· TradingView Â· Fear&Greed</span>
      <span style={{color:C.red,opacity:.5}}>âš ï¸ DYOR</span>
      <span style={{marginLeft:"auto"}}>PROPTREX v3.0</span>
    </div>
  </div>;
}
ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
</script>
</body>
</html>
